{"version":3,"file":"widget.min.js","names":["d","i","client_url","client_id","client_secret","client_theme","base","count","metas","getElementsByTagName","length","n","getAttribute","c","querydata","element","name","render","card","cardurl","theme","user","repo","github","split","width","height","target","key","secret","identity","iframe","createElement","setAttribute","url","src","Math","min","parentNode","clientWidth","window","addEventListener","e","id","data","sender","heighty","replaceChild","cards","querySelectorAll","elements","ret","className","indexOf","push","queryclass","githubCard","document"],"sources":["src/widget.js"],"sourcesContent":["(function(d) {\r\n  var base = \"//cfblog.17lai.site/libs/githubCards/\";\r\n\r\n  var i, count = 0;\r\n\r\n  var metas = d.getElementsByTagName('meta');\r\n  var client_url, client_id, client_secret, client_theme;\r\n  for (i = 0; i < metas.length; i++) {\r\n    var n = metas[i].getAttribute('name');\r\n    var c = metas[i].getAttribute('content');\r\n    if (n === 'gc:url') {\r\n      client_url = c;\r\n    } else if (n === 'gc:base') {\r\n      base = c;\r\n    } else if (n === 'gc:client-id') {\r\n      client_id = c;\r\n    } else if (n === 'gc:client-secret') {\r\n      client_secret = c;\r\n    } else if (n === 'gc:theme') {\r\n      client_theme = c;\r\n    }\r\n  }\r\n\r\n  function queryclass(name) {\r\n    if (d.querySelectorAll) {\r\n      return d.querySelectorAll('.' + name);\r\n    }\r\n    var elements = d.getElementsByTagName('div');\r\n    var ret = [];\r\n    for (i = 0; i < elements.length; i++) {\r\n      if (~elements[i].className.split(' ').indexOf(name)) {\r\n        ret.push(elements[i]);\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  function querydata(element, name) {\r\n    return element.getAttribute('data-' + name);\r\n  }\r\n\r\n  function heighty(iframe) {\r\n    if (window.addEventListener) {\r\n      window.addEventListener('message', function(e) {\r\n        if (iframe.id === e.data.sender) {\r\n          iframe.height = e.data.height;\r\n        }\r\n      }, false);\r\n    }\r\n  }\r\n\r\n  function render(card, cardurl) {\r\n    cardurl = cardurl || client_url;\r\n    if (!cardurl) {\r\n      var theme = querydata(card, 'theme') || client_theme || 'default';\r\n      cardurl = base + 'jsdelivr/cards/' + theme + '.html';\r\n    }\r\n    var user = querydata(card, 'user');\r\n    var repo = querydata(card, 'repo');\r\n    var github = querydata(card, 'github');\r\n    if (github) {\r\n      github = github.split('/');\r\n      if (github.length && !user) {\r\n        user = github[0];\r\n        repo = repo || github[1];\r\n      }\r\n    }\r\n    if (!user) {\r\n      return;\r\n    }\r\n\r\n    count += 1;\r\n    var width = querydata(card, 'width');\r\n    var height = querydata(card, 'height');\r\n    var target = querydata(card, 'target');\r\n\r\n    var key = querydata(card, 'client-id') || client_id;\r\n    var secret = querydata(card, 'client-secret') || client_secret;\r\n\r\n    var identity = 'ghcard-' + user + '-' + count;\r\n\r\n    var iframe = d.createElement('iframe');\r\n    iframe.setAttribute('id', identity);\r\n\tiframe.setAttribute('title', 'GitHub Profile');\r\n    iframe.setAttribute('frameborder', 0);\r\n    iframe.setAttribute('scrolling', 0);\r\n    iframe.setAttribute('allowtransparency', true);\r\n\r\n    var url = cardurl + '?user=' + user + '&identity=' + identity;\r\n    if (repo) {\r\n      url += '&repo=' + repo;\r\n    }\r\n    if (target) {\r\n      url += '&target=' + target;\r\n    }\r\n    if (key && secret) {\r\n      url += '&client_id=' + key + '&client_secret=' + secret;\r\n    }\r\n    iframe.src = url;\r\n    iframe.width = width || Math.min(card.parentNode.clientWidth || 400, 400);\r\n    if (height) {\r\n      iframe.height = height;\r\n    }\r\n    heighty(iframe);\r\n    card.parentNode.replaceChild(iframe, card);\r\n    return iframe;\r\n  }\r\n\r\n  var cards = queryclass('github-card');\r\n  for (i = 0; i < cards.length; i++) {\r\n    render(cards[i]);\r\n  }\r\n\r\n  if (window.githubCard) {\r\n    window.githubCard.render = render;\r\n  }\r\n\r\n})(document);\r\n"],"mappings":"CAAA,SAAUA,GACR,IAEIC,EAGAC,EAAYC,EAAWC,EAAeC,EALtCC,EAAO,wCAEJC,EAAQ,EAEXC,EAAQR,EAAES,qBAAqB,QAEnC,IAAKR,EAAI,EAAGA,EAAIO,EAAME,OAAQT,IAAK,CACjC,IAAIU,EAAIH,EAAMP,GAAGW,aAAa,QAC1BC,EAAIL,EAAMP,GAAGW,aAAa,WACpB,WAAND,EACFT,EAAaW,EACE,YAANF,EACTL,EAAOO,EACQ,iBAANF,EACTR,EAAYU,EACG,qBAANF,EACTP,EAAgBS,EACD,aAANF,IACTN,EAAeQ,EAEnB,CAgBA,SAASC,EAAUC,EAASC,GAC1B,OAAOD,EAAQH,aAAa,QAAUI,EACxC,CAYA,SAASC,EAAOC,EAAMC,GAEpB,KADAA,EAAUA,GAAWjB,GACP,CACZ,IAAIkB,EAAQN,EAAUI,EAAM,UAAYb,GAAgB,UACxDc,EAAUb,EAAO,kBAAoBc,EAAQ,OAC/C,CACA,IAAIC,EAAOP,EAAUI,EAAM,QACvBI,EAAOR,EAAUI,EAAM,QACvBK,EAAST,EAAUI,EAAM,UAQ7B,GAPIK,IACFA,EAASA,EAAOC,MAAM,MACXd,SAAWW,IACpBA,EAAOE,EAAO,GACdD,EAAOA,GAAQC,EAAO,IAGrBF,EAAL,CAIAd,GAAS,EACT,IAAIkB,EAAQX,EAAUI,EAAM,SACxBQ,EAASZ,EAAUI,EAAM,UACzBS,EAASb,EAAUI,EAAM,UAEzBU,EAAMd,EAAUI,EAAM,cAAgBf,EACtC0B,EAASf,EAAUI,EAAM,kBAAoBd,EAE7C0B,EAAW,UAAYT,EAAO,IAAMd,EAEpCwB,EAAS/B,EAAEgC,cAAc,UAC7BD,EAAOE,aAAa,KAAMH,GAC7BC,EAAOE,aAAa,QAAS,kBAC1BF,EAAOE,aAAa,cAAe,GACnCF,EAAOE,aAAa,YAAa,GACjCF,EAAOE,aAAa,qBAAqB,GAEzC,IAAIC,EAAMf,EAAU,SAAWE,EAAO,aAAeS,EAiBrD,OAhBIR,IACFY,GAAO,SAAWZ,GAEhBK,IACFO,GAAO,WAAaP,GAElBC,GAAOC,IACTK,GAAO,cAAgBN,EAAM,kBAAoBC,GAEnDE,EAAOI,IAAMD,EACbH,EAAON,MAAQA,GAASW,KAAKC,IAAInB,EAAKoB,WAAWC,aAAe,IAAK,KACjEb,IACFK,EAAOL,OAASA,GA5DpB,SAAiBK,GACXS,OAAOC,kBACTD,OAAOC,iBAAiB,WAAW,SAASC,GACtCX,EAAOY,KAAOD,EAAEE,KAAKC,SACvBd,EAAOL,OAASgB,EAAEE,KAAKlB,OAE3B,IAAG,EAEP,CAsDEoB,CAAQf,GACRb,EAAKoB,WAAWS,aAAahB,EAAQb,GAC9Ba,CApCP,CAqCF,CAEA,IAAIiB,EArFJ,SAAoBhC,GAClB,GAAIhB,EAAEiD,iBACJ,OAAOjD,EAAEiD,iBAAiB,IAAMjC,GAElC,IAAIkC,EAAWlD,EAAES,qBAAqB,OAClC0C,EAAM,GACV,IAAKlD,EAAI,EAAGA,EAAIiD,EAASxC,OAAQT,KAC1BiD,EAASjD,GAAGmD,UAAU5B,MAAM,KAAK6B,QAAQrC,IAC5CmC,EAAIG,KAAKJ,EAASjD,IAGtB,OAAOkD,CACT,CAyEYI,CAAW,eACvB,IAAKtD,EAAI,EAAGA,EAAI+C,EAAMtC,OAAQT,IAC5BgB,EAAO+B,EAAM/C,IAGXuC,OAAOgB,aACThB,OAAOgB,WAAWvC,OAASA,EAG9B,CArHD,CAqHGwC","ignoreList":[]}