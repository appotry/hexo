<!DOCTYPE HTML><html lang="zh-CN" data-default-color-scheme="auto"><head><meta http-equiv="Permissions-Policy" content="fullscreen=*, geolocation=*, camera=*, microphone=*"><meta charset="utf-8"><meta name="keywords" content="linux, bash, shell"><meta name="description" content="Linux就是未来！在Linux下，Bash的地位无可忽视，日常工作中涉及到Linux下的管理与操作基本都是在Bash中进行，因此，为了提高Linux下工作效率，自然而然的就变成了如何高效使用Bash的问题。"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="夜法之书"><meta name="theme-color" content="#7e9fc4"><meta name="msapplication-TileImage" content="/medias/icons/android-chrome-192x192.png"><meta name="msapplication-TileColor" content="#7e9fc4"><meta http-equiv="Content-Security-Policy" content="default-src * vitals.vercel-insights.com 'unsafe-inline' 'unsafe-eval'; script-src * 'unsafe-inline' 'unsafe-eval' blob:; connect-src * 'unsafe-inline'; img-src * data: blob: 'unsafe-inline'; font-src * data: blob: 'unsafe-inline'; worker-src * 'self' blob: data:; frame-src *; style-src * 'unsafe-inline';"><link rel="apple-touch-icon" href="/medias/icons/apple-touch-icon.png"><link rel="mask-icon" href="/medias/icons/android-chrome-512x512.svg" color="#000000"><title>Linux Bash Shell 使用技巧归纳整理 | 夜法之书</title><link rel="manifest" href="/manifest.json"><link rel="icon" type="image/webp" href="/favicon.webp"><link href="//cimg1.17lai.fun" rel="preconnect" crossorigin><link href="https://live2dapi.17lai.site" rel="preconnect" crossorigin><link href="https://live2dapi.17lai.site" rel="dns-prefetch" crossorigin><link href="//cdn.webpushr.com" rel="preconnect" crossorigin><link href="//bot.webpushr.com" rel="preconnect" crossorigin><link href="//analytics.webpushr.com" rel="preconnect" crossorigin><link href="https://waline.17lai.site" rel="preconnect" crossorigin><link href="https://waline.17lai.site" rel="dns-prefetch" crossorigin><link rel="alternate" type="application/atom+xml" title="所有订阅ATOM--夜法之书" href="https://blog.17lai.site/atom.xml"><link rel="alternate" type="application/rss+xml" title="所有订阅RSS2--夜法之书" href="https://blog.17lai.site/rss.xml"><link rel="alternate" type="application/json" title="所有订阅JSON--夜法之书" href="https://blog.17lai.site/feed.json"><script src="/libs/jquery/jquery.min.js?v=3.7.1"></script><link rel="stylesheet preload" as="style" type="text/css" href="/libs/awesome/css/all.min.css?v=5.15.4" importance="auto"><link rel="modulepreload" href="/libs/waline/waline.min.js?v=3.8.0" as="script" importance="low"><link rel="stylesheet preload" as="style" type="text/css" href="/libs/materialize/materialize.min.css?v=1.2.2"><link rel="stylesheet preload" as="style" type="text/css" href="/libs/aos/aos.min.css"><link rel="stylesheet preload" as="style" type="text/css" href="/libs/animate/animate.min.css" importance="low"><link rel="stylesheet preload" as="style" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css" importance="low"><link rel="stylesheet preload" as="style" type="text/css" href="/libs/jquery/jquery-ui.min.css?v=1.14.0" importance="low"><link rel="stylesheet preload" as="style" type="text/css" href="/css/main.css?v=1.3.2"><noscript><link rel="stylesheet" href="/libs/materialize/materialize.min.css?v=1.2.2"><link rel="stylesheet" href="/css/main.css?v=1.3.2"></noscript><link rel="stylesheet preload" as="style" href="/libs/tocbot/tocbot.min.css?v=4.36.4"><link rel="stylesheet preload" as="style" type="text/css" href="/libs/share/css/share.min.css?v=1.0.16"><link rel="stylesheet preload" as="style" type="text/css" href="/css/highlight.css?v=1.0.0" id="highlight-css"><link rel="stylesheet preload" as="style" type="text/css" href="/css/highlight-dark.css?v=1.0.0" id="highlight-css-dark"><link rel="stylesheet" href="/libs/waline/waline.min.css?v=3.8.0" importance="low"><link rel="modulepreload" href="/libs/waline/waline.min.js?v=3.8.0" as="script" importance="low"><link rel="stylesheet" type="text/css" href="/css/waline.css?v=1.0.2" media="none" onload='"all"!=media&&(media="all")'><link rel="preload" href="/libs/jquery/jquery.min.js?v=3.7.1" as="script" importance="high"><link rel="preload" href="/js/utils.js?v=1.1.2" as="script" importance="high"><link rel="preload" href="/js/color-schema.js?v=1.0.1" as="script" importance="high"><link rel="stylesheet preload" as="style" type="text/css" href="/libs/live2d/waifu.css" importance="low"><link rel="preload" href="/libs/materialize/materialize.min.js?v=1.2.2" as="script" importance="auto"><link rel="preload" href="/libs/masonry/masonry.pkgd.min.js?v=4.2.2" as="script"><link rel="preload" href="/libs/aos/aos.min.js?v=2.3.4" as="script"><link rel="preload" href="/libs/lightGallery/js/lightgallery-all.min.js?v=1.10.0" as="script" importance="low"><link rel="preload" href="/js/events.js?v=1.0.0" as="script"><link rel="preload" href="/js/plugins.js?v=1.1.3" as="script"><link rel="preload" href="/libs/scrollprogress/scrollProgress.min.js?v=3.0.2" as="script"><link rel="preload" href="/js/boot.js?v=1.0.0" as="script" importance="low"><link rel="preload" href="/libs/tocbot/tocbot.min.js?v=4.36.4" as="script"><link rel="preload" href="/libs/tag-common/index.js" as="script"><link rel="prefetch" as="script" href="/libs/share/js/social-share.min.js?v=1.0.16" importance="low"><link rel="preload" href="/libs/prism/components/prism-core.min.js?v=1.30.0" as="script"><link rel="preload" href="/libs/prism/plugins/autoloader/prism-autoloader.min.js" as="script"><link rel="stylesheet preload" as="style" type="text/css" href="/libs/prism/plugins/line-numbers/prism-line-numbers.min.css"><link rel="preload" href="/libs/prism/plugins/line-numbers/prism-line-numbers.min.js" as="script"><script id="matery-configs">var Matery=window.Matery||{};Matery.ctx=Object.assign({},Matery.ctx);var CONFIG={hostname:"blog.17lai.site",root:"/",version:"2.0.0",zh_default:2,typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},postTyped:{enable:!0,loop:!1,showCursor:!0,cursorChar:"_",startDelay:50,typeSpeed:70,backSpeed:50},subtitleTyped:{loop:!0,showCursor:!0,cursorChar:"_",startDelay:100,typeSpeed:80,backSpeed:50},anchorjs:{enable:!1,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!1,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,show_full:!0,show_expand:!0,shrink:!0,break:!1,image_caption:{enable:!0},fun_features:{typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!1,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!1,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},monitortext:{enable:!1,text:"你看不到我！"},videobg:{enable:!1,url:"/video_url.json?v=1.0.0"}},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0,showToggleBtn:!0},outdate:{enable:!1,warning_day:365,error_day:3650},lazyload:{enable:!0,loading_img:"/medias_webp/loading2.svg",loading_img_dark:"/medias_webp/loading2-dark.svg",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!1,baidu:{enable:!1,id:"22cc5bdea6e529c1349d44b7306b3b8c"},baiduPush:!1,google:{enable:!1,measurement_id:"G-JNYZP4ZLDJ"},umami:{enable:!0,totalTraffic:!0,totalNumberOfvisitors:!0,pageStats:!0,src:"https://ana.17lai.site/script.js",start_time:"2023-01-01T00:00:00.000Z",token:"OgIvVJnSmkB37SNyb9UYE33p9hKuI/6jodFSsENOJbyjfg+AG+lYaU499pgVo8gZ1uPIUu9mYMFOk0E9U5cFMbUvI2guPKZZHMxp/xs+1vWtaoV7055ou/e8Ig8Rpm23VRreWzvLZiu+TpbreotPGLXUCYLxUqeedDjKvFPb+Rx6D34/l+gEetxG/vbJJvfTgITk+snFv0zwxx9i2Ig8jhycilhDEhKKva/8L/0+uAewZ2i+6mq4Mn+s0UKfzXVCsDCJ08lJS9UcyjL5d8t5eZ8A2u1b3IV0ElqiaCepF7+HgmsTPR8c2h76Sf1yaUJa+0tPvMcRGLjClA5tFB3+N5hOF8anC072cw==",api_server:"https://ana.17lai.site",website_id:"e532f69d-5606-40c9-9dbb-bfa04258384f"},tencent:{enable:!1,sid:null,cid:null},woyaola:{enable:!1,id:"JynRUZuReKUzZQSo",ck:"JynRUZuReKUzZQSo"},cnzz:{enable:!1,id:null},leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Matery.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js?v=1.1.2"></script><script src="/js/color-schema.js?v=1.0.1"></script><link rel="stylesheet" href="/libs/prism/plugins/line-numbers/prism-line-numbers.min.css"><script async>window.WebGLRenderingContext||console.log("您的浏览器不支持WebGL，可能会影响部分页面显示，请尝试重启浏览器，使用最新版 Chrome 或 Edge 浏览器。");var windowWidth=window.innerWidth,minFunWidth=1400;window.addEventListener("resize",(function(){windowWidth=window.innerWidth}));var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}});window.addEventListener("testpassive",null,opts),window.removeEventListener("testpassive",null,opts)}catch(e){}var runningOnBrowser="undefined"!=typeof window,isBot=runningOnBrowser&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo|Google (Page Speed|Web Preview)/i.test(navigator.userAgent)</script><script async>const swUrl="/sw.js",swScope="/";(async()=>{if("serviceWorker"in navigator)try{const r=await navigator.serviceWorker.register(swUrl,{scope:"/"});console.log("[PWA]Service Worker registered:",r)}catch(r){console.error("[PWA]Service Worker registration failed:",r)}})()</script><script async>Matery.ctx.dnt||isBot||function(){var t=document.createElement("script");t.async=!0,t.dataset.cache=!0,t.dataset.websiteId="e532f69d-5606-40c9-9dbb-bfa04258384f",t.src="https://ana.17lai.site/script.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script>let HEXO_MMEDIA_DATA={js:[],css:[],aplayerData:[],metingData:[],artPlayerData:[],dplayerData:[]}</script><meta name="generator" content="Hexo 8.1.1"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img no-lazy src="/favicon.webp" width="108" height="108" style="width:40px;height:45px" class="logo-img" alt="LOGO"> <span class="logo-span">夜法之书</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse" aria-label="侧边菜单"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item menu-2d-home"><a href="/" class="nav-link"><i class="fas fa-home"></i> 首页</a></li><li class="hide-on-med-and-down nav-item menu-2d-nav"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://nav.17lai.site/" class="nav-link"><i class="fas fa-suitcase"></i> 导航</a></li><li class="hide-on-med-and-down nav-item menu-2d-sosuo"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://so.17lai.site/" class="nav-link"><i class="fas fa-mask"></i> SO</a></li><li class="hide-on-med-and-down nav-item menu-2d-media"><a href="#" class="nav-link"><i class="fas fa-music"></i> 多媒体 <i class="fas fa-chevron-down" aria-hidden="true"></i></a><ul class="sub-nav menus_item_child"><li class="menu-2d-musics"><a class="nav-link" href="/musics/"><i class="fas fa-music fa-fw" style="margin-top:-20px"></i> 音乐</a></li><li class="menu-2d-galleries"><a class="nav-link" href="/galleries/"><i class="fas fa-image fa-fw" style="margin-top:-20px"></i> 相册</a></li><li class="menu-2d-movies"><a class="nav-link" href="/movies/"><i class="fas fa-film fa-fw" style="margin-top:-20px"></i> 视频</a></li><li class="menu-2d-musicplayer"><a class="nav-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://musicplayer.17lai.site/"><i class="fas fa-music fa-fw" style="margin-top:-20px"></i> 在线云音乐</a></li><li class="menu-2d-music"><a class="nav-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://music.17lai.site/"><i class="fas fa-music fa-fw" style="margin-top:-20px"></i> 音乐播放器</a></li></ul></li><li class="hide-on-med-and-down nav-item menu-2d-posts"><a href="#" class="nav-link"><i class="fas fa-folder-plus"></i> 文章 <i class="fas fa-chevron-down" aria-hidden="true"></i></a><ul class="sub-nav menus_item_child"><li class="menu-2d-tags"><a class="nav-link" href="/tags/"><i class="fas fa-tags fa-fw" style="margin-top:-20px"></i> 标签</a></li><li class="menu-2d-categories"><a class="nav-link" href="/categories/"><i class="fas fa-bookmark fa-fw" style="margin-top:-20px"></i> 分类</a></li><li class="menu-2d-archives"><a class="nav-link" href="/archives/"><i class="fas fa-archive fa-fw" style="margin-top:-20px"></i> 归档</a></li></ul></li><li class="hide-on-med-and-down nav-item menu-2d-toolbox"><a href="#" class="nav-link"><i class="fas fa-toolbox"></i> 工具 <i class="fas fa-chevron-down" aria-hidden="true"></i></a><ul class="sub-nav menus_item_child"><li class="menu-2d-tg"><a class="nav-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://t.me/chat_17laisite"><i class="fab fa-telegram-plane fa-fw" style="margin-top:-20px"></i> TG交流群</a></li><li class="menu-2d-linuxtool"><a class="nav-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://linux-command.17lai.site/"><i class="fas fa-terminal fa-fw" style="margin-top:-20px"></i> Linux命令</a></li><li class="menu-2d-cheatsheets"><a class="nav-link" href="/dash/"><i class="fas fa-laptop-code fa-fw" style="margin-top:-20px"></i> 各种快查表</a></li><li class="menu-2d-onebox"><a class="nav-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://alist.17lai.site/"><i class="fas fa-cloud fa-fw" style="margin-top:-20px"></i> 私人网盘</a></li><li class="menu-2d-staticnav"><a class="nav-link" href="/nav/"><i class="fas fa-tools fa-fw" style="margin-top:-20px"></i> 网址导航</a></li></ul></li><li class="hide-on-med-and-down nav-item menu-2d-mirror"><a href="#" class="nav-link"><i class="fas fa-link"></i> 镜像 <i class="fas fa-chevron-down" aria-hidden="true"></i></a><ul class="sub-nav menus_item_child"><li class="menu-2d-mirror-cf"><a class="nav-link" target="_blank" rel="noopener" href="https://cfblog.17lai.site/"><i class="fas fa-link fa-fw" style="margin-top:-20px"></i> CF镜像</a></li><li class="menu-2d-mirror-vps20"><a class="nav-link" target="_blank" rel="noopener" href="https://v20blog.17lai.site/"><i class="fas fa-link fa-fw" style="margin-top:-20px"></i> VPS镜像</a></li><li class="menu-2d-mirror-main"><a class="nav-link" href="https://blog.17lai.site/"><i class="fas fa-link fa-fw" style="margin-top:-20px"></i> 主站</a></li></ul></li><li class="hide-on-med-and-down nav-item menu-2d-friends"><a href="/friends/" class="nav-link"><i class="fas fa-link"></i> 友链</a></li><li class="hide-on-med-and-down nav-item menu-2d-msg"><a href="/msg/" class="nav-link"><i class="fas fa-comment-alt"></i> 留言</a></li><li class="hide-on-med-and-down nav-item menu-2d-about"><a href="/about/" class="nav-link"><i class="fas fa-user-circle"></i> 关于</a></li><li class="nav-item menu-2d-search"><a href="#searchModal" class="nav-link modal-trigger" data-umami-event-search="search modal click" onclick="handleSearchClick()"><i id="searchIcon" class="fas fa-search" title="搜索"></i></a></li><li class="nav-item menu-2d-dark" data-umami-event-color="color toggle" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" rel="external nofollow noreferrer" aria-label="Color Toggle">&nbsp; <i class="fas fa-sun" id="color-toggle-icon"></i>&nbsp;</a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><div><img src="/favicon.webp" width="108" height="108" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload style="width:45px;height:45px" class="logo-img circle responsive-img" alt="LOGO"><div class="logo-name">夜法之书</div><div class="logo-desc">~软件驱动世界~个人独立技术博客，关于Linux,开源，Nas，Docker，嵌入式，理财，健身等主题！</div></div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://nav.17lai.site/" class="waves-effect waves-light"><i class="fa-fw fas fa-suitcase"></i> 导航</a></li><li class="m-nav-item"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://so.17lai.site/" class="waves-effect waves-light"><i class="fa-fw fas fa-mask"></i> SO</a></li><li class="m-nav-item"><a href="javascript:;" rel="external nofollow noreferrer"><i class="fa-fw fas fa-music"></i> 多媒体 <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/musics/" style="margin-left:75px"><i class="fas fa-music fa-fw" style="position:absolute;left:50px"></i> <span>音乐</span></a></li><li><a href="/galleries/" style="margin-left:75px"><i class="fas fa-image fa-fw" style="position:absolute;left:50px"></i> <span>相册</span></a></li><li><a href="/movies/" style="margin-left:75px"><i class="fas fa-film fa-fw" style="position:absolute;left:50px"></i> <span>视频</span></a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://musicplayer.17lai.site/" style="margin-left:75px"><i class="fas fa-music fa-fw" style="position:absolute;left:50px"></i> <span>在线云音乐</span></a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://music.17lai.site/" style="margin-left:75px"><i class="fas fa-music fa-fw" style="position:absolute;left:50px"></i> <span>音乐播放器</span></a></li></ul></li><li class="m-nav-item"><a href="javascript:;" rel="external nofollow noreferrer"><i class="fa-fw fas fa-folder-plus"></i> 文章 <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/tags/" style="margin-left:75px"><i class="fas fa-tags fa-fw" style="position:absolute;left:50px"></i> <span>标签</span></a></li><li><a href="/categories/" style="margin-left:75px"><i class="fas fa-bookmark fa-fw" style="position:absolute;left:50px"></i> <span>分类</span></a></li><li><a href="/archives/" style="margin-left:75px"><i class="fas fa-archive fa-fw" style="position:absolute;left:50px"></i> <span>归档</span></a></li></ul></li><li class="m-nav-item"><a href="javascript:;" rel="external nofollow noreferrer"><i class="fa-fw fas fa-toolbox"></i> 工具 <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://t.me/chat_17laisite" style="margin-left:75px"><i class="fab fa-telegram-plane fa-fw" style="position:absolute;left:50px"></i> <span>TG交流群</span></a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://linux-command.17lai.site/" style="margin-left:75px"><i class="fas fa-terminal fa-fw" style="position:absolute;left:50px"></i> <span>Linux命令</span></a></li><li><a href="/dash/" style="margin-left:75px"><i class="fas fa-laptop-code fa-fw" style="position:absolute;left:50px"></i> <span>各种快查表</span></a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://alist.17lai.site/" style="margin-left:75px"><i class="fas fa-cloud fa-fw" style="position:absolute;left:50px"></i> <span>私人网盘</span></a></li><li><a href="/nav/" style="margin-left:75px"><i class="fas fa-tools fa-fw" style="position:absolute;left:50px"></i> <span>网址导航</span></a></li></ul></li><li class="m-nav-item"><a href="javascript:;" rel="external nofollow noreferrer"><i class="fa-fw fas fa-link"></i> 镜像 <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a target="_blank" rel="noopener" href="https://cfblog.17lai.site/" style="margin-left:75px"><i class="fas fa-link fa-fw" style="position:absolute;left:50px"></i> <span>CF镜像</span></a></li><li><a target="_blank" rel="noopener" href="https://v20blog.17lai.site/" style="margin-left:75px"><i class="fas fa-link fa-fw" style="position:absolute;left:50px"></i> <span>VPS镜像</span></a></li><li><a href="https://blog.17lai.site/" style="margin-left:75px"><i class="fas fa-link fa-fw" style="position:absolute;left:50px"></i> <span>主站</span></a></li></ul></li><li class="m-nav-item"><a href="/friends/" class="waves-effect waves-light"><i class="fa-fw fas fa-link"></i> 友链</a></li><li class="m-nav-item"><a href="/msg/" class="waves-effect waves-light"><i class="fa-fw fas fa-comment-alt"></i> 留言</a></li><li class="m-nav-item"><a href="/about/" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li></ul></div></div></nav></header><div id="banner" class="bg-cover pd-header post-cover" style="background-image:url(/medias_webp/cover/shell.webp)"><div class="bg-cover-before"></div><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand center"><h1 id="post-title" class="description center-align post-title"><span id="typed-strings"><span>Linux Bash Shell 使用技巧归纳整理</span> </span><span id="typed"></span></h1><div class="center-align"><div id="umami-page-views-container" class="post-meta" style="display:inline"><i class="far fa-eye fa-fw"></i>查阅:&nbsp;&nbsp; <span id="umami-page-views" style="display:none;min-width:2rem"></span> <i id="umami_pageviews_loading_icon" class="fas fa-sync fa-spin" style="display:inline-block;min-width:2rem"></i>&nbsp;&nbsp;</div><div id="waline_container_comment_count" class="post-meta" style="display:inline"><i class="far fa-comment fa-fw"></i>评论:&nbsp;&nbsp; <span id="waline_comments_count" class="waline-comment-count" data-path="/posts/43780ce1/" style="display:none;min-width:2rem"></span> <i id="waline_commentcount_loading_icon" class="fas fa-sync fa-spin infinite-rotate" style="display:inline-block;min-width:2rem"></i>条</div></div></div></div></div></div><div class="bg-cover-after"></div></div><main class="post-container content"><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/linux/"><span class="chip bg-color">linux</span> </a><a href="/tags/shell/"><span class="chip bg-color">shell</span> </a><a href="/tags/bash/"><span class="chip bg-color">bash</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/linux/" class="post-category">linux</a><link rel="alternate dns-prefetch" type="application/atom+xml" title="分类订阅--linux" href="https://blog.17lai.site/categories/linux/atom.xml"></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i> <span>发布:&nbsp;&nbsp;</span><time datetime="2023-12-21 19:41" pubdate> 2023年12月21日 晚上</time></div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i> <span>更新:&nbsp;&nbsp;</span><time datetime="2025-11-17 23:01" update> 2025年11月17日 晚上</time></div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i>字数:&nbsp;&nbsp; 22.8k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i>阅时:&nbsp;&nbsp; 101 分</div><div id="read_mode" class="info-break-policy" style="display:inline"><i class="fas fa-expand-arrows-alt" title="【进入/离开】 阅读模式" aria-hidden="true"></i>&nbsp;&nbsp; <span title="【进入/离开】阅读模式" aria-hidden="true">阅读模式</span></div></div></div><hr class="clearfix"><div class="card-content article-card-content markdown-body"><div id="articleContent"><blockquote><p>Linux就是未来！在Linux下，Bash的地位无可忽视，日常工作中涉及到Linux下的管理与操作基本都是在Bash中进行，因此，为了提高Linux下工作效率，自然而然的就变成了如何高效使用Bash的问题。</p></blockquote><span id="more"></span><h2 id="快捷键">快捷键</h2><blockquote><p>常用快查指南，也可以看这里 <a href="/cheatsheets/Bash_Shortcuts.docset/Contents/Resources/Documents/">Bash Shortcuts</a></p></blockquote><h3 id="编辑命令">编辑命令</h3><ul><li>Ctrl + a ：移到命令行首</li><li>Ctrl + e ：移到命令行尾</li><li>Ctrl + f ：按字符前移（右向）</li><li>Ctrl + b ：按字符后移（左向）</li><li>Alt + f ：按单词前移（右向）</li><li>Alt + b ：按单词后移（左向）</li><li>Ctrl + xx：在命令行首和光标之间移动</li><li>Ctrl + u ：从光标处删除至命令行首</li><li>Ctrl + k ：从光标处删除至命令行尾</li><li>Ctrl + w ：从光标处删除至字首</li><li>Alt + d ：从光标处删除至字尾</li><li>Ctrl + d ：删除光标处的字符</li><li>Ctrl + h ：删除光标前的字符</li><li>Ctrl + y ：粘贴至光标后</li><li>Alt + c ：从光标处更改为首字母大写的单词</li><li>Alt + u ：从光标处更改为全部大写的单词</li><li>Alt + l ：从光标处更改为全部小写的单词</li><li>Ctrl + t ：交换光标处和之前的字符</li><li>Alt + t ：交换光标处和之前的单词</li><li>Alt + Backspace：与 Ctrl + w <s>相同</s>类似，分隔符有些差别 [感谢 rezilla 指正]</li></ul><h3 id="重新执行命令">重新执行命令</h3><ul><li>Ctrl + r：逆向搜索命令历史</li><li>Ctrl + g：从历史搜索模式退出</li><li>Ctrl + p：历史中的上一条命令</li><li>Ctrl + n：历史中的下一条命令</li><li>Alt + .：使用上一条命令的最后一个参数</li></ul><h3 id="控制命令">控制命令</h3><ul><li>Ctrl + l：清屏</li><li>Ctrl + o：执行当前命令，并选择上一条命令</li><li>Ctrl + s：阻止屏幕输出</li><li>Ctrl + q：允许屏幕输出</li><li>Ctrl + c：终止命令</li><li>Ctrl + z：挂起命令</li></ul><h3 id="Bang-命令">Bang (!) 命令</h3><ul><li>!!：执行上一条命令</li><li>!blah：执行最近的以 blah 开头的命令，如 !ls</li><li>!blah:p：仅打印输出，而不执行</li><li>!$：上一条命令的最后一个参数，与 Alt + . 相同</li><li>! <span id="mjx-544f8f4"><style>#mjx-544f8f4{display:contents;clip:auto!important;color:transparent}mjx-container[jax=SVG]{direction:ltr}mjx-container[jax=SVG]>svg{overflow:visible;min-height:1px;min-width:1px}mjx-container[jax=SVG]>svg a{fill:#00f;stroke:#00f}mjx-assistive-mml{position:absolute!important;top:0;left:0;clip:rect(1px,1px,1px,1px);padding:1px 0 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}mjx-assistive-mml[display=block]{width:100%!important}mjx-container[jax=SVG][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=SVG][display=true][width=full]{display:flex}mjx-container[jax=SVG][justify=left]{text-align:left}mjx-container[jax=SVG][justify=right]{text-align:right}g[data-mml-node=merror]>g{fill:red;stroke:red}g[data-mml-node=merror]>rect[data-background]{fill:#ff0;stroke:none}g[data-mml-node=mtable]>line[data-line],svg[data-table]>g>line[data-line]{stroke-width:70px;fill:none}g[data-mml-node=mtable]>rect[data-frame],svg[data-table]>g>rect[data-frame]{stroke-width:70px;fill:none}g[data-mml-node=mtable]>.mjx-dashed,svg[data-table]>g>.mjx-dashed{stroke-dasharray:140}g[data-mml-node=mtable]>.mjx-dotted,svg[data-table]>g>.mjx-dotted{stroke-linecap:round;stroke-dasharray:0,140}g[data-mml-node=mtable]>g>svg{overflow:visible}[jax=SVG] mjx-tool{display:inline-block;position:relative;width:0;height:0}[jax=SVG] mjx-tool>mjx-tip{position:absolute;top:0;left:0}mjx-tool>mjx-tip{display:inline-block;padding:.2em;border:1px solid #888;font-size:70%;background-color:#f8f8f8;color:#000;box-shadow:2px 2px 5px #aaa}g[data-mml-node=maction][data-toggle]{cursor:pointer}mjx-status{display:block;position:fixed;left:1em;bottom:1em;min-width:25%;padding:.2em .4em;border:1px solid #888;font-size:90%;background-color:#f8f8f8;color:#000}foreignObject[data-mjx-xml]{font-family:initial;line-height:normal;overflow:visible}mjx-container[jax=SVG] path[data-c],mjx-container[jax=SVG] use[data-c]{stroke-width:3}g[data-mml-node=xypic] path{stroke-width:inherit}.MathJax g[data-mml-node=xypic] path{stroke-width:inherit}</style><mjx-container class="MathJax" jax="SVG" style="position:relative"><svg style="vertical-align:-.452ex" xmlns="http://www.w3.org/2000/svg" width="14.337ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 6336.8 950" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></g><g data-mml-node="mi" transform="translate(555.8,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mi" transform="translate(1058.8,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">：</text></g><g data-mml-node="mi" transform="translate(2058.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">打</text></g><g data-mml-node="mi" transform="translate(3058.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">印</text></g><g data-mml-node="mi" transform="translate(4058.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">输</text></g><g data-mml-node="mi" transform="translate(5058.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">出</text></g><g data-mml-node="mo" transform="translate(6058.8,0)"><path data-c="21" d="M78 661Q78 682 96 699T138 716T180 700T199 661Q199 654 179 432T158 206Q156 198 139 198Q121 198 119 206Q118 209 98 431T78 661ZM79 61Q79 89 97 105T141 121Q164 119 181 104T198 61Q198 31 181 16T139 1Q114 1 97 16T79 61Z"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>:</mo><mi>p</mi><mi>：</mi><mi mathvariant="normal">打</mi><mi mathvariant="normal">印</mi><mi mathvariant="normal">输</mi><mi mathvariant="normal">出</mi><mo>!</mo></math></mjx-assistive-mml></mjx-container></span>的内容</li><li>!*：上一条命令的所有参数</li><li>!<em>:p：打印输出 !</em> 的内容</li><li><code>^blah</code>：删除上一条命令中的 blah</li><li><code>^blah^foo</code>：将上一条命令中的 blah 替换为 foo</li><li><code>^blah^foo^</code>：将上一条命令中所有的 blah 都替换为 foo</li></ul><blockquote><p>详细介绍</p></blockquote><p>快捷键的一些说明：</p><ol><li>CTRL=C：这个键是指PC键盘上的Ctrl键</li><li>ALT=M：这个键是PC键盘上的ALT键，如果你键盘上没有这个键，可以尝试使用ESC键代替</li><li>SHIFT=S：此键是PC上的Shift键</li><li>ESC=E：这个键是PC键盘上的ESC键，此键一般在键盘的左上角</li><li>BACKSPACE=DEL：此键是是PC键盘上的Backspace键，一般位于主键盘区的右上角</li><li>文中”[]“括住的为快捷键内容，”-”两边的内容是按住左边键，再按右边键获得，”,”逗号两边的内容是先按左边键，松开后再按右边键。如：[CTRL-v]是表示按下Ctrl键之后，不要松开，再按下v键。</li><li>默认的情况下，快捷键的组成格式是：&lt;CTRL | ALT | ESC &gt;-[SHIFT-]<char>。即由Ctrl、Alt、Esc之一开头，中划线，Shift，中划线，和一个字符组成。其中，中括号内的Shift和”-”有时可省略。</char></li><li>默认情况下，快捷键只有最后一个为字符，其他的键值均为功能键</li><li>出现[CTRL-?]这类快捷键，由于”?”是需要使用Shift按键才能获得的字符，因此此类快捷键默认使用的是[CTRL-SHIFT-?]</li></ol><p>要注意，在Bash里面，快捷键可能会被写成八进制或者十六进制的形式（跟在转义符后面）; 脚本文件中的快捷键并不是总能起作用的。另外快捷键有个规律，<em>Ctrl开头的快捷键一般是针对字符的，而Alt开头的快捷键一般是针对词的</em>。</p><p>Bash下，如果使用的是shell脚本文件，快捷键不一定是一样的，有的时候会出现同一个快捷键有不同的表现，这种情况一般是由于Bash所处的模式不同而引起的，你可以通过set命令来调整模式：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">set -o emacs
##切到emacs模式
set -o vi
##切到vi模式
set -o
## 查看当前选项的设置状态</code></pre></div></figure><p>这个是Bash的option选项，你可以根据具体情况进行设置，本文使用的是emacs模式。</p><table><thead><tr><th style="text-align:left">快捷键</th><th style="text-align:left">快捷键说明</th></tr></thead><tbody><tr><td style="text-align:left">CTRL-A</td><td style="text-align:left">将光标移到行首（在命令行下）</td></tr><tr><td style="text-align:left">CTRL-B</td><td style="text-align:left">退格 (非破坏性的)，这个只是将光标位置往回移动一个位置。</td></tr><tr><td style="text-align:left">CTRL-C</td><td style="text-align:left">中断，终结一个前台作业。</td></tr><tr><td style="text-align:left">CTRL-D</td><td style="text-align:left">“EOF” (文件结尾：end of file)。它用于表示标准输入（stdin）的结束。在控制台或xterm 窗口输入文本时，CTRL-D 删除在光标下的字符。从一个shell中退出 (类似于exit)。如果没有字符存在，CTRL-D 则会登出该会话。在一个xterm窗口中，则会产生关闭此窗口的效果。</td></tr><tr><td style="text-align:left">CTRL-E</td><td style="text-align:left">将光标移动到行尾（在命令行下）</td></tr><tr><td style="text-align:left">CTRL-F</td><td style="text-align:left">将光标向前移动一个字符（在命令行下）</td></tr><tr><td style="text-align:left">CTRL-G</td><td style="text-align:left">BEL。在一些老式打印机终端上，这会引发一个响铃。在xterm终端上可能是哔的一声。</td></tr><tr><td style="text-align:left">CTRL-H</td><td style="text-align:left">擦除(Rubout)(破坏性的退格)。在光标往回移动的时候，同时擦除光标前的一个字符。</td></tr><tr><td style="text-align:left">CTRL-I</td><td style="text-align:left">水平制表符。</td></tr><tr><td style="text-align:left">CTRL-J</td><td style="text-align:left">新行(换行[line feed]并到行首)。在脚本中，也可能表示为八进制形式(‘/012′)或十六进制形式(‘/x0a’)。</td></tr><tr><td style="text-align:left">CTRL-K</td><td style="text-align:left">垂直制表符(Vertical tab)。在控制台或 xterm 窗口输入文本时，CTRL-K会删除从光标所在处到行尾的所有字符。在脚本中，也可能表示为八进制形式(‘/013′)或十六进制形式(‘/x0b’)。在脚本中，CTRL-K可能会有不一样的行为，下面的例子给出其不一样的行为：<code>#!/bin/bash ## 一个CTRL-K垂直制表符的例子 var=$'/x0aBottom Line/x0bTop line/x0a' ## 直接输出 echo &quot;$var&quot; ## 使用col来过滤控制字符 echo &quot;$var&quot; | col ## 上面的显示将会不一样 exit 0</code></td></tr><tr><td style="text-align:left">CTRL-L</td><td style="text-align:left">跳纸，换页(Formfeed)，清屏。清空终端屏幕。在终端上，这个命令的作用和clear命令一样。但当这个命令发送到打印机时，Ctrl-L会直接跳到纸张(Paper sheet)的末尾。</td></tr><tr><td style="text-align:left">CTRL-M</td><td style="text-align:left">回车(Carriage return)。</td></tr><tr><td style="text-align:left">CTRL-N</td><td style="text-align:left">擦除从history缓冲区召回的一行文本（在命令行下）。如果当前输入是历史记录中选择的时候，这个是从这个历史记录开始，每按一次，是更接近的一条命令。</td></tr><tr><td style="text-align:left">CTRL-O</td><td style="text-align:left">产生一个新行（在命令行下）。</td></tr><tr><td style="text-align:left">CTRL-P</td><td style="text-align:left">从history缓冲区召回上一次的命令（在命令行下）。此快捷键召回的顺序是由近及远的召回，即按一次，召回的是前一次的命令，再按一次，是召回上一次之前的命令，这和CTRL-N都是以当前的输入为起点，但是两个命令操作刚好相反，CTRL-N是从起点开始由远及近（如果起点是历史命令的话）。</td></tr><tr><td style="text-align:left">CTRL-Q</td><td style="text-align:left">Resume (XON)。恢复/解冻，这个命令是恢复终端的stdin用的，可参见CTRL-S。</td></tr><tr><td style="text-align:left">CTRL-R</td><td style="text-align:left">回溯搜索(Backwards search)history缓冲区内的文本（在命令行下）。注意：按下之后，提示符会变成(reverse-i-search)”:输入的搜索内容出现在单引号内，同时冒号后面出现最近最匹配的历史命令。</td></tr><tr><td style="text-align:left">CTRL-S</td><td style="text-align:left">Suspend(XOFF)，挂起。这个是冻结终端的stdin。要恢复可以按CTRL-Q。</td></tr><tr><td style="text-align:left">CTRL-T</td><td style="text-align:left">交换光标位置与光标的前一个位置的字符内容（在命令行下）。比如：echo $var;，假设光标在a上，那么，按下C-T之后，v和a将会交换位置：echo $avr;。</td></tr><tr><td style="text-align:left">CTRL-U</td><td style="text-align:left">擦除从光标位置开始到行首的所有字符内容。在某些设置下，CTRL-U会不以光标位置为参考而删除整行的输入。</td></tr><tr><td style="text-align:left">CTRL-V</td><td style="text-align:left">在输入文本的时候，按下C-V之后，可以插入控制字符。比如：echo -e '/x0a’;和echo<ctrl-v><ctrl-j>;这两种效果一样。这点功能在文本编辑器内非常有效。</ctrl-j></ctrl-v></td></tr><tr><td style="text-align:left">CTRL-W</td><td style="text-align:left">当在控制台或一个xterm窗口敲入文本时, CTRL-W 会删除从在光标处往后（回）的第一个空白符之间的内容。在某些设置里, CTRL-W 删除光标往后（回）到第一个非文字和数字之间的字符。</td></tr><tr><td style="text-align:left">CTRL-X</td><td style="text-align:left">在某些文字处理程序中，这个控制字符将会剪切高亮的文本并且将它复制到剪贴板中。</td></tr><tr><td style="text-align:left">CTRL-Y</td><td style="text-align:left">将之前已经清除的文本粘贴回来（主要针对CTRL-U或CTRL-W）。</td></tr><tr><td style="text-align:left">CTRL-Z</td><td style="text-align:left">暂停一个前台的作业；在某些文本处理程序中也作为替换操作；在MSDOS文件系统中作为EOF（End-of-file)字符。</td></tr><tr><td style="text-align:left">CTRL-/</td><td style="text-align:left">退出。和CTRL-C差不多，也可能dump一个”core”文件到你的工作目录下(这个文件可能对你没用)。</td></tr><tr><td style="text-align:left">CTRL-/</td><td style="text-align:left">撤消操作，Undo。</td></tr><tr><td style="text-align:left">CTRL-_</td><td style="text-align:left">撤消操作。</td></tr><tr><td style="text-align:left">CTRL-xx</td><td style="text-align:left">在行首和光标两个位置间进行切换，此处是两个”x”字符。</td></tr><tr><td style="text-align:left">ALT-B</td><td style="text-align:left">光标往回跳一个词，词以非字母为界(跳动到当前光标所在词的开头)。</td></tr><tr><td style="text-align:left">ALT-F</td><td style="text-align:left">光标往前跳一个词(移动到光标所在词的末尾)。</td></tr><tr><td style="text-align:left">ALT-D</td><td style="text-align:left">删除光标所在位置到光标所在词的结尾位置的所有内容(如果光标是在词开头，则删除整个词)。</td></tr><tr><td style="text-align:left">ALT-BASKSPACE</td><td style="text-align:left">删除光标所在位置到词开头的所有内容。</td></tr><tr><td style="text-align:left">ALT-C</td><td style="text-align:left">将光标所在位置的字母转为大写(如果光标在一个词的起始位置或之前，则词首字母大写)。</td></tr><tr><td style="text-align:left">ALT-U</td><td style="text-align:left">将光标所在位置到词尾的所有字母转为大写。</td></tr><tr><td style="text-align:left">ALT-L</td><td style="text-align:left">将光标位置到词尾的所有字母转为小写。</td></tr><tr><td style="text-align:left">ALT-R</td><td style="text-align:left">取消所有变更，并将当前行恢复到在历史记录中的原始状态(前提是当前命令是从历史记录中来的，如果是手动输入，则会清空行)。</td></tr><tr><td style="text-align:left">ALT-T</td><td style="text-align:left">当光标两侧都存在词的时候，交换光标两侧词的位置。如：abc<alt-t>bcd -&gt; bcd abc</alt-t></td></tr><tr><td style="text-align:left">ALT-.</td><td style="text-align:left">使用前一次命令的最后一个词(命令本身也是一个词，参见后一篇的Bang命令中的词指示符概念)。</td></tr><tr><td style="text-align:left">ALT-_</td><td style="text-align:left">同ALT-.。</td></tr><tr><td style="text-align:left">ALT-数值</td><td style="text-align:left">这个数值可以是正或者是负，这个键单独没有作用，必须后面再接其他内容，如果后面是字符，则表示重复次数。如：[ALT-10,k]则光标位置会插入10个k字符(负值在这种情况下无效)；如果后面接的是命令，则数字会影响后面命令的执行结果，如：[ALT–10,CTRL-D]则向CTRL-D默认方向相反(负数)的方向执行10次操作。</td></tr><tr><td style="text-align:left">ALT-&lt;</td><td style="text-align:left">移动到历史记录中的第一行命令。</td></tr><tr><td style="text-align:left">ALT-&gt;</td><td style="text-align:left">移动到历史的最后一行，即当前正在输入的行(没有输入的情况下为空)。</td></tr><tr><td style="text-align:left">ALT-P</td><td style="text-align:left">从当前行开始向前搜索，有必要则向”上”移动，移动时，使用非增量搜索查找用户提供的字符串。</td></tr><tr><td style="text-align:left">ALT-N</td><td style="text-align:left">从当前行开始向后搜索，如果有必要向”下”移动，移动时，使用非增量搜索查找用户提供的字符串。</td></tr><tr><td style="text-align:left">ALT-CTRL-Y</td><td style="text-align:left">在标志点上插入前一个命令的第一个参数(一般是前一行的第二个词)。如果有参数n，则插入前一个命令的第n个词(前一行的词编号从0开始，见历史扩展)。负的参数将插入冲前一个命令的结尾开始的第n个词。参数n通过M-No.的方式传递，如：[ALT-0,ALT-CTRL-Y]插入前一个命令的第0个词(命令本身)。</td></tr><tr><td style="text-align:left">ALT-Y</td><td style="text-align:left">轮询到删除环，并复制新的顶端文本。只能在yank[CTRL-Y]或者yank-pop[M-Y]之后使用这个命令。</td></tr><tr><td style="text-align:left">ALT-?</td><td style="text-align:left">列出能够补全标志点前的条目。</td></tr><tr><td style="text-align:left">ALT-*</td><td style="text-align:left">把能够补全[ALT-?]命令能生成的所有文本条目插入到标志点前。</td></tr><tr><td style="text-align:left">ALT-/</td><td style="text-align:left">试图对标志点前的文本进行文件名补全。[CTRL-X,/]把标志点前的文本当成文件名并列出可以补全的条目。</td></tr><tr><td style="text-align:left">ALT-~</td><td style="text-align:left">把标志点前的文本当成用户名并试图进行补全。[CTRL-X,~]列出可以作为用户名补全标志点前的条目。</td></tr><tr><td style="text-align:left">ALT-$</td><td style="text-align:left">把标志点前的文本当成Shell变量并试图进行补全。[CTRL-X,$]列出可以作为变量补全标志点前的条目。</td></tr><tr><td style="text-align:left">ALT-@</td><td style="text-align:left">把标志点前的文本当成主机名并试图进行补全。[CTRL-X,@]列出可以作为主机补全标志点前的条目。</td></tr><tr><td style="text-align:left">ALT-!</td><td style="text-align:left">把标志点前的文本当成命令名并试图进行补全。进行命令名补全时会依次使用别名、保留字、Shell函数、shell内部命令，最后是可执行文件名。[CTRL-X,!]把标志点前的文本当成命令名并列出可补全的条目。</td></tr><tr><td style="text-align:left">ALT-TAB</td><td style="text-align:left">把标志点前的文本与历史记录中的文本进行比较以寻找匹配的并试图进行补全。</td></tr><tr><td style="text-align:left">ALT-{</td><td style="text-align:left">进行文件名补全，把可以补全的条目列表放在大括号之间，让shell可以使用。</td></tr></tbody></table><p>在Bash下，如果能够妥善的使用快捷键，在Linux系统的操作会变得非常快捷，比如我们在使用cat创建一个文件时，我们可以使用快捷键[CTRL-D]：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">## 不用快捷键
cat &gt;&gt;&#x2F;tmp&#x2F;test&lt;&lt;_EOF
##这里是内容
##最后我们要在新行里面输入_EOF
##cat见到_EOF才会将内容写到文件中

##使用快捷键
cat &gt;&gt;&#x2F;tmp&#x2F;test
##这里输入内容
##输入完毕之后，直接[CTRL-D]结束</code></pre></div></figure><p>有的时候我们需要创建一个文件，而后对这个文件进行操作：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">touch &#x2F;tmp&#x2F;a-test-file-from-blog.useasp.net

## 不使用快捷键，文件名要重新输入
chmod u+x &#x2F;tmp&#x2F;a-test-file-from-blog.useasp.net

##使用快捷键
chmod u+x &lt;ALT-.&gt;
## 快捷键[M-.]自动会将上面的最后一个参数附加</code></pre></div></figure><p>怎么样，有没有更有效率？</p><p>当然，Bash的快捷键只有在不断的使用中，才能达到真正的高效，在开始连要用那个快捷键都要思考半天的情况下，高效是很难的——但磨刀不误砍材工，前期的投入是值得的。</p><p>如果你想自己的Bash有那么一些不同，你也可以自己自定义快捷键，使用bind命令即可，Bash中的快捷键其实是Readline来提供的，因此，这里快捷键的设置其实就是配置Readline，Readline中分两种快捷键，一种是Readline内部的函数快捷键，另外一种是执行Shell命令，设置的时候稍有不同：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">##查看Readline中可以使用的函数名称
bind -l
##查看当前绑定的案件配置与其对应的功能
bind -v
##已经绑定的快捷键
bind -p

##绑定自定义执行命令shell命令的快捷键
bind -x &#39;&quot;&#x2F;C-x&#x2F;C-l&quot;:ls -al&#39;
## 绑定后，按[C-x,C-L]就能执行ls -al

## 绑定内置函数功能
bind &quot;&#x2F;C-x&quot;:backword-delte-char
##这个是这行Readline库中的函数backword-delte-char</code></pre></div></figure><p>这种设置只是针对当前的会话有效，一旦会话丢失，这样设置的快捷键就会丢失，为了能够让设置的快捷键永久有效，我们就需要将快捷键的配置写入文件。在Linux系统中，能永久保存快捷键的地方有两个，全局和用户的配置文件，全局的是/etc/inputrc，而用户的是在用户的根目录下~/.inputrc，全局的会影响所有的用户，而用户根目录下的只会对相应的用户产生影响。inputrc文件的大概样子像下面这样：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">## 本例来自CentOS6.4的默认配置文件
$if mode&#x3D;emacs

# for linux console and RH&#x2F;Debian xterm
&quot;&#x2F;e[1~&quot;: beginning-of-line
&quot;&#x2F;e[4~&quot;: end-of-line
# commented out keymappings for pgup&#x2F;pgdown to reach begin&#x2F;end of history
#&quot;&#x2F;e[5~&quot;: beginning-of-history
#&quot;&#x2F;e[6~&quot;: end-of-history
&quot;&#x2F;e[5~&quot;: history-search-backward
&quot;&#x2F;e[6~&quot;: history-search-forward
&quot;&#x2F;e[3~&quot;: delete-char
&quot;&#x2F;e[2~&quot;: quoted-insert
&quot;&#x2F;e[5C&quot;: forward-word
&quot;&#x2F;e[5D&quot;: backward-word
&quot;&#x2F;e[1;5C&quot;: forward-word
&quot;&#x2F;e[1;5D&quot;: backward-word

# for rxvt
&quot;&#x2F;e[8~&quot;: end-of-line
&quot;&#x2F;eOc&quot;: forward-word
&quot;&#x2F;eOd&quot;: backward-word

# for non RH&#x2F;Debian xterm, can&#39;t hurt for RH&#x2F;DEbian xterm
&quot;&#x2F;eOH&quot;: beginning-of-line
&quot;&#x2F;eOF&quot;: end-of-line

# for freebsd console
&quot;&#x2F;e[H&quot;: beginning-of-line
&quot;&#x2F;e[F&quot;: end-of-line
$endif</code></pre></div></figure><p>说明：</p><ol><li><p>在配置文件中，/C代表CTRL，/M代表ALT，/e代表ESC，//是反斜杠/，/'是单引号，/&quot;是双引号；</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">&#x2F;C-    control prefix
&#x2F;M-    meta prefix
&#x2F;e     an escape character
&#x2F;&#x2F;     backslash
&#x2F;&quot;     literal &quot;, a double quote
&#x2F;’     literal ’, a single quote</code></pre></div></figure></li><li><p>如果要查看某一个功能键的字符序列可以通过[CTRL-V]来实现，或者输入cat后回车，进入编辑中，直接按快捷键</p></li><li><p>配置文件中可能会使用八进制或者十六进制来表示字符。</p></li></ol><p>如果我们针对常用的操作设置成适当的快捷键，也许以前需要巴拉巴拉敲上半天的命令，你一个快捷键就能搞定，这无疑将会大大的提高我们的工作效率！</p><h2 id="Bash-别名">Bash 别名</h2><p><strong>10 个方便的 Bash 别名</strong></p><p>1、 你有几次遇到需要解压 <code>.tar</code> 文件但无法记住所需的确切参数？别名可以帮助你！只需将以下内容添加到 <code>.bash_profile</code> 中，然后使用 <code>untar FileName</code> 解压缩任何 <code>.tar</code> 文件。</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">alias untar&#x3D;&#39;tar -zxvf &#39;</code></pre></div></figure><p>2、 下载文件时，如果出现问题想要恢复下载？</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">alias wget&#x3D;&#39;wget -c &#39;</code></pre></div></figure><p>3、 快速为新的帐户生成随机的 20 个字符的密码。</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">alias getpass&#x3D;&quot;openssl rand -base64 20&quot;</code></pre></div></figure><p>4、 对下载的文件进行校验和测试。</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">alias sha&#x3D;&#39;shasum -a 256 &#39;</code></pre></div></figure><p>5、 普通的 <code>ping</code> 将永远持续下去。通常我们不希望这样，让我们将其限制在五次之内。</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">alias ping&#x3D;&#39;ping -c 5&#39;</code></pre></div></figure><p>6、 在任何你想要的文件夹中启动一个 <code>Web</code> 服务器。</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">alias www&#x3D;&#39;python -m SimpleHTTPServer 8000&#39;</code></pre></div></figure><p>7、 想知道你的网络有多快？只需下载 <code>Speedtest-cli</code> 并使用此别名即可。你可以使用 <code>speedtest-cli --list</code> 命令选择离你所在位置更近的服务器。</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">alias speed&#x3D;&#39;speedtest-cli --server 2406 --simple&#39;</code></pre></div></figure><p>8、 在命令行中快速获取你的外部 <code>IP</code> 地址。</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">alias ipe&#x3D;&#39;curl ipinfo.io&#x2F;ip&#39;</code></pre></div></figure><p>9、 在命令行中快速获取你的本地 <code>IP</code> 地址。</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">alias ipi&#x3D;&#39;ipconfig getifaddr en0&#39;</code></pre></div></figure><p>10、 快速清空屏幕。</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">alias c&#x3D;&#39;clear&#39;</code></pre></div></figure><p>如你所见，<code>Bash</code> 别名是一种在命令行上简化操作的超级简便方法。想了解更多信息？建议你 <code>Google</code> 搜索 <code>“Bash 别名”</code> 或在 <code>Github</code> 中找找看。</p><h2 id="Bash-参数处理">Bash 参数处理</h2><p>在编写shell程序时经常需要处理命令行参数，本文描述在bash下的命令行处理方式。<br>选项与参数：<br>如下命令行：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">.&#x2F;test.sh -f config.conf -v --prefix&#x3D;&#x2F;home</code></pre></div></figure><p>-f为选项，它需要一个参数，即config.conf, -v 也是一个选项，但它不需要参数。<br>–prefix我们称之为一个长选项，即选项本身多于一个字符，它也需要一个参数，用等号连接，当然等号不是必须的，/home可以直接写在–prefix后面，即–prefix/home,更多的限制后面具体会讲到。<br>在bash中，可以用以下三种方式来处理命令行参数，每种方式都有自己的应用场景。</p><ul><li>手工处理方式</li><li>getopts</li><li>getopt<br>依次讨论这三种处理方式。</li></ul><h3 id="手工处理方式">手工处理方式</h3><p>在手工处理方式中，首先要知道几个变量，还是以上面的命令行为例：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">*    $0 ： .&#x2F;test.sh,即命令本身，相当于c&#x2F;c++中的argv[0]
*    $1 ： -f,第一个参数.
*    $2 ： config.conf
*    $3, $4 ... ：类推。
*    $#  参数的个数，不包括命令本身，上例中$#为4.
*    $@ ：参数本身的列表，也不包括命令本身，如上例为 -f config.conf -v --prefix&#x3D;&#x2F;home
*    $* ：和$@相同，但&quot;$*&quot; 和 &quot;$@&quot;(加引号)并不同，&quot;$*&quot;将所有的参数解释成一个字符串，而&quot;$@&quot;是一个参数数组。</code></pre></div></figure><p>例子：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
for arg in &quot;$*&quot;  
do  
   echo $arg  
done  
for arg in &quot;$@&quot;  
do  
 echo $arg  
done  </code></pre></div></figure><p>执行./test.sh -f config.conf -n 10 会打印：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">-f config.conf -n 10    #这是&quot;$*&quot;的输出  
-f   #以下为$@的输出  
config.conf  
-n  
10  </code></pre></div></figure><p>所以，手工处理的方式即对这些变量的处理。因为手工处理高度依赖于你在命令行上所传参数的位置，所以一般都只用来处理较简单的参数。</p><p>例如：<br><code>./test.sh 10</code>而很少使用./test -n 10这种带选项的方式。 典型用法为：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
if [ x$1 !&#x3D; x ]  
then  
    #...有参数  
else  
then  
    #...没有参数  
fi  </code></pre></div></figure><p>为什么要使用 x$1 != x 这种方式来比较呢？想像一下这种方式比较：<br><code>if [ -n $1 ] #$1不为空</code>但如果用户不传参数的时候，$1为空，这时 就会变成 [ -n ] ,所以需要加一个辅助字符串来进行比较。<br>手工处理方式能满足大多数的简单需求，配合shift使用也能构造出强大的功能，但在要处理复杂选项的时候建议用下面的两种方法。</p><h3 id="getopts-getopt">getopts/getopt</h3><p>处理命令行参数是一个相似而又复杂的事情，为此，c提供了getopt/getopt_long等函数，<br>c++的boost提供了options库，在shell中，处理此事的是getopts和getopt.<br>getopts和getopt功能相似但又不完全相同，其中getopt是独立的可执行文件，而getopts是由bash内置的。<br>先来看看参数传递的典型用法:</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">* .&#x2F;test.sh -a -b -c  ： 短选项，各选项不需参数  
* .&#x2F;test.sh -abc   ： 短选项，和上一种方法的效果一样，只是将所有的选项写在一起。  
* .&#x2F;test.sh -a args -b -c ：短选项，其中-a需要参数，而-b -c不需参数。  
* .&#x2F;test.sh --a-long&#x3D;args --b-long ：长选项  </code></pre></div></figure><p>先来看getopts,它不支持长选项。<br>使用getopts非常简单：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#test.sh  
#!&#x2F;bin&#x2F;bash  
while getopts &quot;a:bc&quot; arg #选项后面的冒号表示该选项需要参数  
do  
        case $arg in  
             a)  
                echo &quot;a&#39;s arg:$optarg&quot; #参数存在$optarg中

             b)  
                echo &quot;b&quot;

             c)  
                echo &quot;c&quot;

             ?)  #当有不认识的选项的时候arg为?  
            echo &quot;unkonw argument&quot;  
        exit 1

        esac  
done</code></pre></div></figure><p>现在就可以使用：<br><code>./test.sh -a arg -b -c</code>或<br><code>./test.sh -a arg -bc</code>来加载了。<br>应该说绝大多数脚本使用该函数就可以了，如果需要支持长选项以及可选参数，那么就需要使用getopt.<br>getopt自带的一个例子：</p><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">
#!&#x2F;bin&#x2F;bash
# a small example program for using the new getopt(1) program.
# this program will only work with bash(1)
# an similar program using the tcsh(1) script language can be found
# as parse.tcsh
# example input and output (from the bash prompt):
# .&#x2F;parse.bash -a par1 &#39;another arg&#39; --c-long &#39;wow!*\?&#39; -cmore -b &quot; very long &quot;
# option a
# option c, no argument
# option c, argument &#96;more&#39;
# option b, argument &#96; very long &#39;
# remaining arguments:
# --&gt; &#96;par1&#39;
# --&gt; &#96;another arg&#39;
# --&gt; &#96;wow!*\?&#39;
# note that we use &#96;&quot;$@&quot;&#39; to let each command-line parameter expand to a
# separate word. the quotes around &#96;$@&#39; are essential!
# we need temp as the &#96;eval set --&#39; would nuke the return value of getopt.
#-o表示短选项，两个冒号表示该选项有一个可选参数，可选参数必须紧贴选项
#如-carg 而不能是-c arg
#--long表示长选项
#&quot;$@&quot;在上面解释过
# -n:出错时的信息
# -- ：举一个例子比较好理解：
#我们要创建一个名字为 &quot;-f&quot;的目录你会怎么办？
# mkdir -f #不成功，因为-f会被mkdir当作选项来解析，这时就可以使用
# mkdir -- -f 这样-f就不会被作为选项。
temp&#x3D;&#96;getopt -o ab:c:: --long a-long,b-long:,c-long:: \
     -n &#39;example.bash&#39; -- &quot;$@&quot;&#96;
if [ $? !&#x3D; 0 ] ; then echo &quot;terminating...&quot; &gt;&amp;2 ; exit 1 ; fi
# note the quotes around &#96;$temp&#39;: they are essential!
#set 会重新排列参数的顺序，也就是改变$1,$2...$n的值，这些值在getopt中重新排列过了
eval set -- &quot;$temp&quot;
#经过getopt的处理，下面处理具体选项。
while true ; do
        case &quot;$1&quot; in
                -a|--a-long) echo &quot;option a&quot; ; shift ;;
                -b|--b-long) echo &quot;option b, argument \&#96;$2&#39;&quot; ; shift 2 ;;
                -c|--c-long)
                        # c has an optional argument. as we are in quoted mode,
                        # an empty parameter will be generated if its optional
                        # argument is not found.
                        case &quot;$2&quot; in
                                &quot;&quot;) echo &quot;option c, no argument&quot;; shift 2 ;;
                                *)  echo &quot;option c, argument \&#96;$2&#39;&quot; ; shift 2 ;;
                        esac ;;
                --) shift ; break ;;
                *) echo &quot;internal error!&quot; ; exit 1 ;;
        esac
done
echo &quot;remaining arguments:&quot;
for arg do
   echo &#39;--&gt; &#39;&quot;\&#96;$arg&#39;&quot; ;
done
</code></pre></div></figure><p>比如使用<br><code>./test -a -b arg arg1 -c</code>你可以看到,命令行中多了个arg1参数，在经过getopt和set之后，命令行会变为：<br><code>-a -b arg -c -- arg1</code><code>$1</code>指向-a, <code>$2</code>指向-b,<code>$3</code>指向arg,<code>$4</code>指向-c,<code>$5</code>指向–,而多出的arg1则被放到了最后。</p><h3 id="总结">总结</h3><p>一般小脚本手工处理也就够了，getopts能处理绝大多数的情况，getopt较复杂，功能也更强大。</p><h2 id="100个实用的经典-Linux-Shell-脚本">100个实用的经典 Linux Shell 脚本</h2><ol><li>编写 hello world 脚本</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写 hello world 脚本  
  
echo &quot;Hello World!&quot;  </code></pre></div></figure><ol start="2"><li>通过位置变量创建 Linux 系统账户及密码</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 通过位置变量创建 Linux 系统账户及密码  
  
#$1 是执行脚本的第一个参数,$2 是执行脚本的第二个参数  
useradd    &quot;$1&quot;   
echo &quot;$2&quot;  |  passwd  ‐‐stdin  &quot;$1&quot;  </code></pre></div></figure><ol start="3"><li>备份日志</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
# 每周 5 使用 tar 命令备份&#x2F;var&#x2F;log 下的所有日志文件  
# vim  &#x2F;root&#x2F;logbak.sh  
# 编写备份脚本,备份后的文件名包含日期标签,防止后面的备份将前面的备份数据覆盖  
# 注意 date 命令需要使用反引号括起来,反引号在键盘&lt;tab&gt;键上面  
tar  -czf  log-&#96;date +%Y%m%d&#96;.tar.gz  &#x2F;var&#x2F;log   
  
# crontab ‐e  #编写计划任务,执行备份脚本  
00  03  *  *  5  &#x2F;root&#x2F;logbak.sh  </code></pre></div></figure><ol start="4"><li>一键部署 LNMP(RPM 包版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
# 一键部署 LNMP(RPM 包版本)  
# 使用 yum 安装部署 LNMP,需要提前配置好 yum 源,否则该脚本会失败  
# 本脚本使用于 centos7.2 或 RHEL7.2  
yum ‐y install httpd  
yum ‐y install mariadb mariadb‐devel mariadb‐server  
yum ‐y install php  php‐mysql  
  
systemctl start httpd mariadb  
systemctl enable httpd mariadb  </code></pre></div></figure><ol start="5"><li>监控内存和磁盘容量，小于给定值时报警</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 实时监控本机内存和硬盘剩余空间,剩余内存小于500M、根分区剩余空间小于1000M时,发送报警邮件给root管理员  
  
# 提取根分区剩余空间  
disk_size&#x3D;$(df &#x2F; | awk &#39;&#x2F;\&#x2F;&#x2F;&#123;print $4&#125;&#39;)  
  
# 提取内存剩余空间  
mem_size&#x3D;$(free | awk &#39;&#x2F;Mem&#x2F;&#123;print $4&#125;&#39;)  
while :  
do  
# 注意内存和磁盘提取的空间大小都是以 Kb 为单位  
if  [  $disk_size -le 512000 -a $mem_size -le 1024000  ]  
then  
    mail  ‐s  &quot;Warning&quot;  root  &lt;&lt;EOF  
  Insufficient resources,资源不足  
EOF  
fi  
done  </code></pre></div></figure><ol start="6"><li>猜数字游戏</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 脚本生成一个 100 以内的随机数,提示用户猜数字,根据用户的输入,提示用户猜对了,  
# 猜小了或猜大了,直至用户猜对脚本结束。  
  
# RANDOM 为系统自带的系统变量,值为 0‐32767的随机数  
# 使用取余算法将随机数变为 1‐100 的随机数  
num&#x3D;$[RANDOM%100+1]  
echo &quot;$num&quot;  
  
# 使用 read 提示用户猜数字  
# 使用 if 判断用户猜数字的大小关系:‐eq(等于),‐ne(不等于),‐gt(大于),‐ge(大于等于),  
# ‐lt(小于),‐le(小于等于)  
while  :  
do  
  read -p &quot;计算机生成了一个 1‐100 的随机数,你猜: &quot; cai  
    if [ $cai -eq $num ]  
    then  
         echo &quot;恭喜,猜对了&quot;  
         exit  
      elif [ $cai -gt $num ]  
      then  
             echo &quot;Oops,猜大了&quot;  
        else  
             echo &quot;Oops,猜小了&quot;  
   fi  
done  </code></pre></div></figure><ol start="7"><li>检测本机当前用户是否为超级管理员，如果是管理员，则使用 yum 安装 vsftpd，如果不是，则提示您非管理员(使用字串对比版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 检测本机当前用户是否为超级管理员,如果是管理员,则使用 yum 安装 vsftpd,如果不  
# 是,则提示您非管理员(使用字串对比版本)   
if [ $USER &#x3D;&#x3D; &quot;root&quot; ]  
then  
  yum ‐y install vsftpd  
else  
    echo &quot;您不是管理员,没有权限安装软件&quot;  
fi  </code></pre></div></figure><ol start="8"><li>检测本机当前用户是否为超级管理员，如果是管理员，则使用 yum 安装 vsftpd，如果不是，则提示您非管理员(使用 UID 数字对比版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 检测本机当前用户是否为超级管理员,如果是管理员,则使用 yum 安装 vsftpd,如果不  
# 是,则提示您非管理员(使用 UID 数字对比版本)  
if [ $UID -eq 0 ];then  
    yum ‐y install vsftpd  
else  
    echo &quot;您不是管理员,没有权限安装软件&quot;  
fi  </code></pre></div></figure><ol start="9"><li>编写脚本：提示用户输入用户名和密码，脚本自动创建相应的账户及配置密码。如果用户不输入账户名，则提示必须输入账户名并退出脚本；如果用户不输入密码，则统一使用默认的 123456 作为默认密码。</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写脚本:提示用户输入用户名和密码,脚本自动创建相应的账户及配置密码。如果用户  
# 不输入账户名,则提示必须输入账户名并退出脚本;如果用户不输入密码,则统一使用默  
# 认的 123456 作为默认密码。  
read -p &quot;请输入用户名: &quot; user  
#使用‐z 可以判断一个变量是否为空,如果为空,提示用户必须输入账户名,并退出脚本,退出码为 2  
#没有输入用户名脚本退出后,使用$?查看的返回码为 2  
if [ -z $user ];then  
     echo &quot;您不需输入账户名&quot;  
   exit 2  
fi  
#使用 stty ‐echo 关闭 shell 的回显功能  
#使用 stty  echo 打开 shell 的回显功能  
stty -echo  
read -p &quot;请输入密码: &quot; pass  
stty echo  
pass&#x3D;$&#123;pass:‐123456&#125;  
useradd &quot;$user&quot;  
echo &quot;$pass&quot; | passwd ‐‐stdin &quot;$user&quot;  </code></pre></div></figure><ol start="10"><li>输入三个数并进行升序排序</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 依次提示用户输入 3 个整数,脚本根据数字大小依次排序输出 3 个数字  
read -p &quot;请输入一个整数:&quot; num1  
read -p &quot;请输入一个整数:&quot; num2  
read -p &quot;请输入一个整数:&quot; num3  
# 不管谁大谁小,最后都打印 echo &quot;$num1,$num2,$num3&quot;  
# num1 中永远存最小的值,num2 中永远存中间值,num3 永远存最大值  
# 如果输入的不是这样的顺序,则改变数的存储顺序,如:可以将 num1 和 num2 的值对调  
tmp&#x3D;0  
# 如果 num1 大于 num2,就把 num1 和和 num2 的值对调,确保 num1 变量中存的是最小值  
if [ $num1 -gt $num2 ];then     
  tmp&#x3D;$num1  
  num1&#x3D;$num2  
  num2&#x3D;$tmp  
fi  
# 如果 num1 大于 num3,就把 num1 和 num3 对调,确保 num1 变量中存的是最小值  
if [ $num1 -gt $num3 ];then     
    tmp&#x3D;$num1  
    num1&#x3D;$num3  
    num3&#x3D;$tmp  
fi  
# 如果 num2 大于 num3,就把 num2 和 num3 对标,确保 num2 变量中存的是小一点的值  
if [ $num2 -gt $num3 ];then  
    tmp&#x3D;$num2  
    num2&#x3D;$num3  
    num3&#x3D;$tmp  
fi  
echo &quot;排序后数据(从小到大)为:$num1,$num2,$num3&quot;  </code></pre></div></figure><ol start="11"><li>石头、剪刀、布游戏</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写脚本,实现人机&lt;石头,剪刀,布&gt;游戏  
game&#x3D;(石头 剪刀 布)  
num&#x3D;$[RANDOM%3]  
computer&#x3D;$&#123;game[$num]&#125;  
# 通过随机数获取计算机的出拳  
# 出拳的可能性保存在一个数组中,game[0],game[1],game[2]分别是 3 中不同的可能  
  
echo &quot;请根据下列提示选择您的出拳手势&quot;  
echo &quot;1.石头&quot;  
echo &quot;2.剪刀&quot;  
echo &quot;3.布&quot;  
  
read -p &quot;请选择 1‐3:&quot; person  
case  $person  in  
1)  
  if [ $num -eq 0 ]  
  then  
    echo &quot;平局&quot;  
    elif [ $num -eq 1 ]  
    then  
      echo &quot;你赢&quot;  
  else  
    echo &quot;计算机赢&quot;  
  fi;;  
2)     
  if [ $num -eq 0 ]  
  then  
    echo &quot;计算机赢&quot;  
    elif [ $num -eq 1 ]  
    then  
      echo &quot;平局&quot;  
  else  
    echo &quot;你赢&quot;  
  fi;;  
3)  
  if [ $num -eq 0 ]  
  then  
    echo &quot;你赢&quot;  
    elif [ $num -eq 1 ]  
    then  
      echo &quot;计算机赢&quot;  
  else  
    echo &quot;平局&quot;  
  fi;;  
*)  
  echo &quot;必须输入 1‐3 的数字&quot;  
esac  </code></pre></div></figure><ol start="12"><li>编写脚本测试 192.168.4.0/24 整个网段中哪些主机处于开机状态，哪些主机处于关机状态(for 版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写脚本测试 192.168.4.0&#x2F;24 整个网段中哪些主机处于开机状态,哪些主机处于关机  
# 状态(for 版本)  
for i in &#123;1..254&#125;  
do  
  # 每隔0.3秒ping一次，一共ping2次，并以1毫秒为单位设置ping的超时时间  
     ping ‐c 2 ‐i 0.3 ‐W 1 192.168.4.$i  &amp;&gt;&#x2F;dev&#x2F;null  
    if  [ $? -eq 0 ];then  
         echo &quot;192.168.4.$i is up&quot;  
     else  
         echo  &quot;192.168.4.$i is down&quot;  
     fi  
done  </code></pre></div></figure><ol start="13"><li>编写脚本测试 192.168.4.0/24 整个网段中哪些主机处于开机状态，哪些主机处于关机状态(while 版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写脚本测试 192.168.4.0&#x2F;24 整个网段中哪些主机处于开机状态,哪些主机处于关机  
# 状态(while 版本)   
i&#x3D;1  
while [ $i -le 254 ]  
do  
     ping ‐c 2 ‐i 0.3 ‐W 1 192.168.4.$i  &amp;&gt;&#x2F;dev&#x2F;null  
     if  [ $? -eq 0 ];then  
         echo &quot;192.168.4.$i is up&quot;  
    else  
         echo  &quot;192.168.4.$i is down&quot;  
     fi  
     let i++  
done  </code></pre></div></figure><ol start="14"><li>编写脚本测试 192.168.4.0/24 整个网段中哪些主机处于开机状态，哪些主机处于关机状态(多进程版)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写脚本测试 192.168.4.0&#x2F;24 整个网段中哪些主机处于开机状态,哪些主机处于关机  
# 状态(多进程版)  
#定义一个函数,ping 某一台主机,并检测主机的存活状态  
myping()&#123;  
ping ‐c 2 ‐i 0.3 ‐W 1 $1  &amp;&gt;&#x2F;dev&#x2F;null  
if  [ $? -eq 0 ];then  
  echo &quot;$1 is up&quot;  
else  
  echo &quot;$1 is down&quot;  
fi  
&#125;  
for i in &#123;1..254&#125;  
do  
     myping 192.168.4.$i &amp;  
done  
# 使用&amp;符号,将执行的函数放入后台执行  
# 这样做的好处是不需要等待ping第一台主机的回应,就可以继续并发ping第二台主机,依次类推。  </code></pre></div></figure><ol start="15"><li>编写脚本,显示进度条</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写脚本,显示进度条  
jindu()&#123;  
while :  
do  
     echo -n &#39;#&#39;  
     sleep 0.2  
done  
&#125;  
jindu &amp;  
cp -a $1 $2  
killall $0  
echo &quot;拷贝完成&quot;  </code></pre></div></figure><ol start="16"><li>进度条,动态时针版本；定义一个显示进度的函数,屏幕快速显示| / ‐ \</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 进度条,动态时针版本  
# 定义一个显示进度的函数,屏幕快速显示|  &#x2F; ‐ \  
rotate_line()&#123;  
INTERVAL&#x3D;0.5  #设置间隔时间  
COUNT&#x3D;&quot;0&quot;     #设置4个形状的编号,默认编号为 0(不代表任何图像)  
while :  
do  
  COUNT&#x3D;&#96;expr $COUNT + 1&#96; #执行循环,COUNT 每次循环加 1,(分别代表4种不同的形状)  
  case $COUNT in          #判断 COUNT 的值,值不一样显示的形状就不一样  
  &quot;1&quot;)                    #值为 1 显示‐  
          echo -e &#39;‐&#39;&quot;\b\c&quot;  
          sleep $INTERVAL  
          ;;  
    &quot;2&quot;)                  #值为 2 显示\\,第一个\是转义  
          echo -e &#39;\\&#39;&quot;\b\c&quot;  
          sleep $INTERVAL  
          ;;  
    &quot;3&quot;)                  #值为 3 显示|  
          echo -e &quot;|\b\c&quot;  
          sleep $INTERVAL  
          ;;  
   &quot;4&quot;)                   #值为 4 显示&#x2F;  
          echo -e &quot;&#x2F;\b\c&quot;  
          sleep $INTERVAL  
          ;;  
    *)                    #值为其他时,将 COUNT 重置为 0  
          COUNT&#x3D;&quot;0&quot;;;  
    esac  
done  
&#125;  
rotate_line  </code></pre></div></figure><ol start="17"><li>9*9 乘法表</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 9*9 乘法表(编写 shell 脚本,打印 9*9 乘法表)   
for i in &#96;seq 9&#96;  
do  
    for j in &#96;seq $i&#96;  
     do  
         echo -n &quot;$j*$i&#x3D;$[i*j]  &quot;  
     done  
    echo  
done  </code></pre></div></figure><ol start="18"><li>使用死循环实时显示 eth0 网卡发送的数据包流量</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 使用死循环实时显示 eth0 网卡发送的数据包流量   
while :  
do  
   echo  &#39;本地网卡 eth0 流量信息如下: &#39;  
    ifconfig eth0 | grep &quot;RX pack&quot; | awk &#39;&#123;print $5&#125;&#39;  
    ifconfig eth0 | grep &quot;TX pack&quot; | awk &#39;&#123;print $5&#125;&#39;  
     sleep 1  
done  </code></pre></div></figure><ol start="19"><li>使用 user.txt 文件中的人员名单,在计算机中自动创建对应的账户并配置初始密码本脚本执行,需要提前准备一个 user.txt 文件,该文件中包含有若干用户名信息</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 使用 user.txt 文件中的人员名单,在计算机中自动创建对应的账户并配置初始密码  
# 本脚本执行,需要提前准备一个 user.txt 文件,该文件中包含有若干用户名信息  
for i in &#96;cat user.txt&#96;  
do  
     useradd  $i  
     echo &quot;123456&quot; | passwd ‐‐stdin $i  
done  </code></pre></div></figure><ol start="20"><li>编写批量修改扩展名脚本</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写批量修改扩展名脚本,如批量将 txt 文件修改为 doc 文件   
# 执行脚本时,需要给脚本添加位置参数  
# 脚本名  txt  doc(可以将 txt 的扩展名修改为 doc)  
# 脚本名  doc  jpg(可以将 doc 的扩展名修改为 jpg)  
for i in &#96;ls *.$1&#96;  
do  
     mv $i $&#123;i%.*&#125;.$2  
done  </code></pre></div></figure><ol start="21"><li>使用 expect 工具自动交互密码远程其他主机安装 httpd 软件</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 使用 expect 工具自动交互密码远程其他主机安装 httpd 软件   
  
# 删除~&#x2F;.ssh&#x2F;known_hosts 后,ssh 远程任何主机都会询问是否确认要连接该主机  
rm  ‐rf  ~&#x2F;.ssh&#x2F;known_hosts  
expect &lt;&lt;EOF  
spawn ssh 192.168.4.254  
expect &quot;yes&#x2F;no&quot; &#123;send &quot;yes\r&quot;&#125;  
# 根据自己的实际情况将密码修改为真实的密码字串  
expect &quot;password&quot; &#123;send  &quot;密码\r&quot;&#125;  
expect &quot;#&quot; &#123;send  &quot;yum ‐y install httpd\r&quot;&#125;  
expect &quot;#&quot; &#123;send  &quot;exit\r&quot;&#125;  
EOF  </code></pre></div></figure><ol start="22"><li>一键部署 LNMP(源码安装版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 一键部署 LNMP(源码安装版本)  
menu()  
&#123;  
clear  
echo &quot;  ##############‐‐‐‐Menu‐‐‐‐##############&quot;  
echo &quot;# 1. Install Nginx&quot;  
echo &quot;# 2. Install MySQL&quot;  
echo &quot;# 3. Install PHP&quot;  
echo &quot;# 4. Exit Program&quot;  
echo &quot;  ########################################&quot;  
&#125;  
  
choice()  
&#123;  
  read -p &quot;Please choice a menu[1‐9]:&quot; select  
&#125;  
  
install_nginx()  
&#123;  
  id nginx &amp;&gt;&#x2F;dev&#x2F;null  
  if [ $? -ne 0 ];then  
    useradd -s &#x2F;sbin&#x2F;nologin nginx  
  fi  
  if [ -f nginx‐1.8.0.tar.gz ];then  
    tar -xf nginx‐1.8.0.tar.gz  
    cd nginx‐1.8.0  
    yum -y install  gcc pcre‐devel openssl‐devel zlib‐devel make  
    .&#x2F;configure ‐‐prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx ‐‐with‐http_ssl_module  
    make  
    make install  
    ln -s &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx &#x2F;usr&#x2F;sbin&#x2F;  
    cd ..  
  else  
    echo &quot;没有 Nginx 源码包&quot;  
  fi  
&#125;  
  
install_mysql()  
&#123;  
  yum -y install gcc gcc‐c++ cmake ncurses‐devel perl  
  id mysql &amp;&gt;&#x2F;dev&#x2F;null  
  if [ $? -ne 0 ];then  
    useradd -s &#x2F;sbin&#x2F;nologin mysql  
  fi  
  if [ -f mysql‐5.6.25.tar.gz ];then  
    tar -xf mysql‐5.6.25.tar.gz  
    cd mysql‐5.6.25  
    cmake .  
    make  
    make install  
    &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;scripts&#x2F;mysql_install_db ‐‐user&#x3D;mysql ‐‐datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data&#x2F;  
‐‐basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;  
    chown -R root.mysql &#x2F;usr&#x2F;local&#x2F;mysql  
    chown -R mysql &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data  
    &#x2F;bin&#x2F;cp -f &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;support‐files&#x2F;mysql.server &#x2F;etc&#x2F;init.d&#x2F;mysqld  
    chmod +x &#x2F;etc&#x2F;init.d&#x2F;mysqld  
    &#x2F;bin&#x2F;cp -f &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;support‐files&#x2F;my‐default.cnf &#x2F;etc&#x2F;my.cnf  
    echo &quot;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;&quot; &gt;&gt; &#x2F;etc&#x2F;ld.so.conf  
    ldconfig  
    echo &#39;PATH&#x3D;\$PATH:&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;&#39; &gt;&gt; &#x2F;etc&#x2F;profile  
    export PATH  
  else  
    echo  &quot;没有 mysql 源码包&quot;  
    exit  
  fi  
&#125;  
  
install_php()  
&#123;  
#安装 php 时没有指定启动哪些模块功能,如果的用户可以根据实际情况自行添加额外功能如‐‐with‐gd 等  
yum  -y  install  gcc  libxml2‐devel  
if [ -f mhash‐0.9.9.9.tar.gz ];then  
  tar -xf mhash‐0.9.9.9.tar.gz  
  cd mhash‐0.9.9.9  
  .&#x2F;configure  
  make  
  make install  
  cd ..  
if [ ! ‐f &#x2F;usr&#x2F;lib&#x2F;libmhash.so ];then  
  ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmhash.so &#x2F;usr&#x2F;lib&#x2F;  
fi  
ldconfig  
else  
  echo &quot;没有 mhash 源码包文件&quot;  
  exit  
fi  
if [ -f libmcrypt‐2.5.8.tar.gz ];then  
  tar -xf libmcrypt‐2.5.8.tar.gz  
  cd libmcrypt‐2.5.8  
  .&#x2F;configure  
  make  
  make install  
  cd ..  
  if [ ! -f &#x2F;usr&#x2F;lib&#x2F;libmcrypt.so ];then    
    ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmcrypt.so &#x2F;usr&#x2F;lib&#x2F;  
  fi  
  ldconfig  
else  
  echo &quot;没有 libmcrypt 源码包文件&quot;  
  exit  
fi  
if [ -f php‐5.4.24.tar.gz ];then  
  tar -xf php‐5.4.24.tar.gz  
  cd php‐5.4.24  
  .&#x2F;configure  ‐‐prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;php5  ‐‐with‐mysql&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql  ‐‐enable‐fpm    ‐‐  
  enable‐mbstring  ‐‐with‐mcrypt  ‐‐with‐mhash  ‐‐with‐config‐file‐path&#x3D;&#x2F;usr&#x2F;local&#x2F;php5&#x2F;etc  ‐‐with‐  
  mysqli&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql_config  
  make &amp;&amp; make install  
  &#x2F;bin&#x2F;cp -f php.ini‐production &#x2F;usr&#x2F;local&#x2F;php5&#x2F;etc&#x2F;php.ini  
  &#x2F;bin&#x2F;cp -f &#x2F;usr&#x2F;local&#x2F;php5&#x2F;etc&#x2F;php‐fpm.conf.default &#x2F;usr&#x2F;local&#x2F;php5&#x2F;etc&#x2F;php‐fpm.conf  
  cd ..  
else  
  echo &quot;没有 php 源码包文件&quot;  
  exit  
fi   
&#125;  
  
while :  
do  
  menu  
  choice  
  case $select in  
  1)  
    install_nginx  
    ;;  
  2)  
    install_mysql  
    ;;  
  3)  
    install_php  
    ;;  
  4)  
    exit  
    ;;  
  *)  
    echo Sorry!  
  esac  
done  </code></pre></div></figure><ol start="23"><li>编写脚本快速克隆 KVM 虚拟机</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写脚本快速克隆 KVM 虚拟机  
  
# 本脚本针对 RHEL7.2 或 Centos7.2  
# 本脚本需要提前准备一个 qcow2 格式的虚拟机模板,  
# 名称为&#x2F;var&#x2F;lib&#x2F;libvirt&#x2F;images  &#x2F;.rh7_template 的虚拟机模板  
# 该脚本使用 qemu‐img 命令快速创建快照虚拟机  
# 脚本使用 sed 修改模板虚拟机的配置文件,将虚拟机名称、UUID、磁盘文件名、MAC 地址  
# exit code:    
#    65 ‐&gt; user input nothing  
#    66 ‐&gt; user input is not a number  
#    67 ‐&gt; user input out of range  
#    68 ‐&gt; vm disk image exists  
  
IMG_DIR&#x3D;&#x2F;var&#x2F;lib&#x2F;libvirt&#x2F;images  
BASEVM&#x3D;rh7_template  
read -p &quot;Enter VM number: &quot; VMNUM  
if [ $VMNUM -le 9 ];then  
VMNUM&#x3D;0$VMNUM  
fi  
  
if [ -z &quot;$&#123;VMNUM&#125;&quot; ]; then  
    echo &quot;You must input a number.&quot;  
    exit 65  
elif [[  $&#123;VMNUM&#125; &#x3D;~ [a‐z]  ]; then  
    echo &quot;You must input a number.&quot;  
    exit 66  
elif [ $&#123;VMNUM&#125; -lt 1 -o $&#123;VMNUM&#125; -gt 99 ]; then  
    echo &quot;Input out of range&quot;  
    exit 67  
fi  
  
NEWVM&#x3D;rh7_node$&#123;VMNUM&#125;  
  
if [ -e $IMG_DIR&#x2F;$&#123;NEWVM&#125;.img ]; then  
    echo &quot;File exists.&quot;  
    exit 68  
fi  
  
echo -en &quot;Creating Virtual Machine disk image......\t&quot;  
qemu‐img create -f qcow2 ‐b $IMG_DIR&#x2F;.$&#123;BASEVM&#125;.img $IMG_DIR&#x2F;$&#123;NEWVM&#125;.img &amp;&gt; &#x2F;dev&#x2F;null  
  
echo -e &quot;\e[32;1m[OK]\e[0m&quot;  
#virsh dumpxml $&#123;BASEVM&#125; &gt; &#x2F;tmp&#x2F;myvm.xml  
  
cat &#x2F;var&#x2F;lib&#x2F;libvirt&#x2F;images&#x2F;.rhel7.xml &gt; &#x2F;tmp&#x2F;myvm.xml  
sed -i &quot;&#x2F;&lt;name&gt;$&#123;BASEVM&#125;&#x2F;s&#x2F;$&#123;BASEVM&#125;&#x2F;$&#123;NEWVM&#125;&#x2F;&quot; &#x2F;tmp&#x2F;myvm.xml  
sed -i &quot;&#x2F;uuid&#x2F;s&#x2F;&lt;uuid&gt;.*&lt;\&#x2F;uuid&gt;&#x2F;&lt;uuid&gt;$(uuidgen)&lt;\&#x2F;uuid&gt;&#x2F;&quot; &#x2F;tmp&#x2F;myvm.xml  
sed -i &quot;&#x2F;$&#123;BASEVM&#125;\.img&#x2F;s&#x2F;$&#123;BASEVM&#125;&#x2F;$&#123;NEWVM&#125;&#x2F;&quot; &#x2F;tmp&#x2F;myvm.xml  
  
# 修改 MAC 地址,本例使用的是常量,每位使用该脚本的用户需要根据实际情况修改这些值   
# 最好这里可以使用便利,这样更适合于批量操作,可以克隆更多虚拟机   
sed -i &quot;&#x2F;mac &#x2F;s&#x2F;a1&#x2F;0c&#x2F;&quot; &#x2F;tmp&#x2F;myvm.xml  
  
echo -en &quot;Defining new virtual machine......\t\t&quot;  
virsh define &#x2F;tmp&#x2F;myvm.xml &amp;&gt; &#x2F;dev&#x2F;null  
echo -e &quot;\e[32;1m[OK]\e[0m&quot;  </code></pre></div></figure><ol start="24"><li>点名器脚本</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写一个点名器脚本  
  
# 该脚本,需要提前准备一个 user.txt 文件  
# 该文件中需要包含所有姓名的信息,一行一个姓名,脚本每次随机显示一个姓名  
while :  
do  
#统计 user 文件中有多少用户  
line&#x3D;&#96;cat user.txt |wc ‐l&#96;  
num&#x3D;$[RANDOM%line+1]  
sed -n &quot;$&#123;num&#125;p&quot;  user.txt  
sleep 0.2  
clear  
done  </code></pre></div></figure><ol start="25"><li>查看有多少远程的 IP 在连接本机</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 查看有多少远程的 IP 在连接本机(不管是通过 ssh 还是 web 还是 ftp 都统计)   
# 使用 netstat ‐atn 可以查看本机所有连接的状态,‐a 查看所有,  
# -t仅显示 tcp 连接的信息,‐n 数字格式显示  
# Local Address(第四列是本机的 IP 和端口信息)  
# Foreign Address(第五列是远程主机的 IP 和端口信息)  
# 使用 awk 命令仅显示第 5 列数据,再显示第 1 列 IP 地址的信息  
# sort 可以按数字大小排序,最后使用 uniq 将多余重复的删除,并统计重复的次数  
netstat -atn  |  awk  &#39;&#123;print $5&#125;&#39;  | awk  &#39;&#123;print $1&#125;&#39; | sort -nr  |  uniq -c  </code></pre></div></figure><ol start="26"><li>对 100 以内的所有正整数相加求和(1+2+3+4…+100)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 对 100 以内的所有正整数相加求和(1+2+3+4...+100)  
#seq 100 可以快速自动生成 100 个整数  
sum&#x3D;0  
for i in &#96;seq 100&#96;  
do  
    sum&#x3D;$[sum+i]  
done  
echo &quot;总和是:$sum&quot;  </code></pre></div></figure><ol start="27"><li>统计 13:30 到 14:30 所有访问 apache 服务器的请求有多少个</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 统计 13:30 到 14:30 所有访问 apache 服务器的请求有多少个  
  
# awk 使用‐F 选项指定文件内容的分隔符是&#x2F;或者:  
# 条件判断$7:$8 大于等于 13:30,并且要求,$7:$8 小于等于 14:30  
# 最后使用 wc ‐l 统计这样的数据有多少行,即多少个  
awk -F &quot;[ &#x2F;:]&quot; &#39;$7&quot;:&quot;$8&gt;&#x3D;&quot;13:30&quot; &amp;&amp; $7&quot;:&quot;$8&lt;&#x3D;&quot;14:30&quot;&#39; &#x2F;var&#x2F;log&#x2F;httpd&#x2F;access_log |wc -l  </code></pre></div></figure><ol start="28"><li>统计 13:30 到 14:30 所有访问本机 Aapche 服务器的远程 IP 地址是什么</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 统计 13:30 到 14:30 所有访问本机 Aapche 服务器的远程 IP 地址是什么   
# awk 使用‐F 选项指定文件内容的分隔符是&#x2F;或者:  
# 条件判断$7:$8 大于等于 13:30,并且要求,$7:$8 小于等于 14:30  
# 日志文档内容里面,第 1 列是远程主机的 IP 地址,使用 awk 单独显示第 1 列即可  
awk -F &quot;[ &#x2F;:]&quot; &#39;$7&quot;:&quot;$8&gt;&#x3D;&quot;13:30&quot; &amp;&amp; $7&quot;:&quot;$8&lt;&#x3D;&quot;14:30&quot;&#123;print $1&#125;&#39; &#x2F;var&#x2F;log&#x2F;httpd&#x2F;access_log  </code></pre></div></figure><ol start="29"><li>打印国际象棋棋盘</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 打印国际象棋棋盘  
# 设置两个变量,i 和 j,一个代表行,一个代表列,国际象棋为 8*8 棋盘  
# i&#x3D;1 是代表准备打印第一行棋盘,第 1 行棋盘有灰色和蓝色间隔输出,总共为 8 列  
# i&#x3D;1,j&#x3D;1 代表第 1 行的第 1 列;i&#x3D;2,j&#x3D;3 代表第 2 行的第 3 列  
# 棋盘的规律是 i+j 如果是偶数,就打印蓝色色块,如果是奇数就打印灰色色块  
# 使用 echo ‐ne 打印色块,并且打印完成色块后不自动换行,在同一行继续输出其他色块  
for i in &#123;1..8&#125;  
do  
    for j in &#123;1..8&#125;  
    do  
      sum&#x3D;$[i+j]  
    if [  $[sum%2] -eq 0 ];then  
       echo -ne &quot;\033[46m  \033[0m&quot;  
    else  
      echo -ne &quot;\033[47m  \033[0m&quot;  
    fi  
    done  
    echo  
done  </code></pre></div></figure><ol start="30"><li>统计每个远程 IP 访问了本机 apache 几次?</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 统计每个远程 IP 访问了本机 apache 几次?   
awk  &#39;&#123;ip[$1]++&#125;END&#123;for(i in ip)&#123;print ip[i],i&#125;&#125;&#39;  &#x2F;var&#x2F;log&#x2F;httpd&#x2F;access_log  </code></pre></div></figure><ol start="31"><li>统计当前 Linux 系统中可以登录计算机的账户有多少个</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 统计当前 Linux 系统中可以登录计算机的账户有多少个  
#方法 1:  
grep &quot;bash$&quot; &#x2F;etc&#x2F;passwd | wc -l  
#方法 2:  
awk -f: &#39;&#x2F;bash$&#x2F;&#123;x++&#125;end&#123;print x&#125;&#39;  &#x2F;etc&#x2F;passwd  </code></pre></div></figure><ol start="32"><li>统计/var/log 有多少个文件,并显示这些文件名</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 统计&#x2F;var&#x2F;log 有多少个文件,并显示这些文件名   
# 使用 ls 递归显示所有,再判断是否为文件,如果是文件则计数器加 1  
cd  &#x2F;var&#x2F;log  
sum&#x3D;0  
for i in &#96;ls -r *&#96;  
do  
   if [ -f $i ];then  
       let sum++  
         echo &quot;文件名:$i&quot;  
     fi  
done  
echo &quot;总文件数量为:$sum&quot;  </code></pre></div></figure><ol start="33"><li>自动为其他脚本添加解释器信息</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">Docker+K8s+Jenkins 主流技术全解视频资料【干货免费分享】  
  
#!&#x2F;bin&#x2F;bash  
  
# 自动为其他脚本添加解释器信息#!&#x2F;bin&#x2F;bash,如脚本名为 test.sh 则效果如下:   
# .&#x2F;test.sh  abc.sh  自动为 abc.sh 添加解释器信息  
# .&#x2F;test.sh  user.sh  自动为 user.sh 添加解释器信息  
# 先使用 grep 判断对象脚本是否已经有解释器信息,如果没有则使用 sed 添加解释器以及描述信息  
if  !  grep  -q  &quot;^#!&quot;  $1; then  
sed  &#39;1i #!&#x2F;bin&#x2F;bash&#39;  $1  
sed  &#39;2i #Description: &#39;  
fi  
# 因为每个脚本的功能不同,作用不同,所以在给对象脚本添加完解释器信息,以及 Description 后还希望  
# 继续编辑具体的脚本功能的描述信息,这里直接使用 vim 把对象脚本打开,并且光标跳转到该文件的第 2 行  
vim +2 $1  </code></pre></div></figure><ol start="34"><li>自动化部署 varnish 源码包软件</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 自动化部署 varnish 源码包软件   
# 本脚本需要提前下载 varnish‐3.0.6.tar.gz 这样一个源码包软件,该脚本即可用自动源码安装部署软件  
  
yum -y install gcc readline‐devel pcre‐devel  
useradd -s &#x2F;sbin&#x2F;nologin varnish  
tar -xf varnish‐3.0.6.tar.gz  
cd varnish‐3.0.6  
  
# 使用 configure,make,make install 源码安装软件包  
.&#x2F;configure ‐‐prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;varnish  
make &amp;&amp; make install  
  
# 在源码包目录下,将相应的配置文件拷贝到 Linux 系统文件系统中  
# 默认安装完成后,不会自动拷贝或安装配置文件到 Linux 系统,所以需要手动 cp 复制配置文件  
# 并使用 uuidgen 生成一个随机密钥的配置文件  
cp redhat&#x2F;varnish.initrc &#x2F;etc&#x2F;init.d&#x2F;varnish  
cp redhat&#x2F;varnish.sysconfig &#x2F;etc&#x2F;sysconfig&#x2F;varnish  
cp redhat&#x2F;varnish_reload_vcl &#x2F;usr&#x2F;bin&#x2F;  
ln -s &#x2F;usr&#x2F;local&#x2F;varnish&#x2F;sbin&#x2F;varnishd &#x2F;usr&#x2F;sbin&#x2F;  
ln -s &#x2F;usr&#x2F;local&#x2F;varnish&#x2F;bin&#x2F;* &#x2F;usr&#x2F;bin  
mkdir &#x2F;etc&#x2F;varnish  
cp &#x2F;usr&#x2F;local&#x2F;varnish&#x2F;etc&#x2F;varnish&#x2F;default.vcl &#x2F;etc&#x2F;varnish&#x2F;  
uuidgen &gt; &#x2F;etc&#x2F;varnish&#x2F;secret  </code></pre></div></figure><ol start="35"><li>编写 nginx 启动脚本</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 编写 nginx 启动脚本   
# 本脚本编写完成后,放置在&#x2F;etc&#x2F;init.d&#x2F;目录下,就可以被 Linux 系统自动识别到该脚本  
# 如果本脚本名为&#x2F;etc&#x2F;init.d&#x2F;nginx,则 service nginx start 就可以启动该服务  
# service nginx stop 就可以关闭服务  
# service nginx restart 可以重启服务  
# service nginx status 可以查看服务状态  
program&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx  
pid&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;logs&#x2F;nginx.pid  
start()&#123;  
if [ -f $pid ];then  
  echo  &quot;nginx 服务已经处于开启状态&quot;  
else  
  $program  
fi  
stop()&#123;  
if [ -! -f $pid ];then  
  echo &quot;nginx 服务已经关闭&quot;  
else  
  $program -s stop  
  echo &quot;关闭服务 ok&quot;  
fi  
&#125;  
status()&#123;  
if [ -f $pid ];then  
  echo &quot;服务正在运行...&quot;  
else  
  echo &quot;服务已经关闭&quot;  
fi  
&#125;  
  
case $1 in  
start)  
  start;;  
stop)  
  stop;;  
restart)  
  stop  
  sleep 1  
  start;;  
status)  
  status;;  
*)  
  echo  &quot;你输入的语法格式错误&quot;  
esac  </code></pre></div></figure><ol start="36"><li>自动对磁盘分区、格式化、挂载</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash"> #!&#x2F;bin&#x2F;bash  
  
# 自动对磁盘分区、格式化、挂载  
# 对虚拟机的 vdb 磁盘进行分区格式化,使用&lt;&lt;将需要的分区指令导入给程序 fdisk  
# n(新建分区),p(创建主分区),1(分区编号为 1),两个空白行(两个回车,相当于将整个磁盘分一个区)  
# 注意:1 后面的两个回车(空白行)是必须的!  
fdisk &#x2F;dev&#x2F;vdb &lt;&lt; EOF  
n  
p  
1  
  
  
wq  
EOF  
#格式化刚刚创建好的分区  
mkfs.xfs   &#x2F;dev&#x2F;vdb1  
#创建挂载点目录  
if [ -e &#x2F;data ]; then  
exit  
fi  
mkdir &#x2F;data  
#自动挂载刚刚创建的分区,并设置开机自动挂载该分区  
echo &#39;&#x2F;dev&#x2F;vdb1     &#x2F;data    xfs    defaults        1 2&#39;  &gt;&gt; &#x2F;etc&#x2F;fstab  
mount -a  </code></pre></div></figure><ol start="37"><li>自动优化 Linux 内核参数</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 自动优化 Linux 内核参数  
#脚本针对 RHEL7  
cat &gt;&gt; &#x2F;usr&#x2F;lib&#x2F;sysctl.d&#x2F;00‐system.conf &lt;&lt;EOF  
fs.file‐max&#x3D;65535  
net.ipv4.tcp_timestamps &#x3D; 0  
net.ipv4.tcp_synack_retries &#x3D; 5  
net.ipv4.tcp_syn_retries &#x3D; 5  
net.ipv4.tcp_tw_recycle &#x3D; 1  
net.ipv4.tcp_tw_reuse &#x3D; 1  
net.ipv4.tcp_fin_timeout &#x3D; 30  
#net.ipv4.tcp_keepalive_time &#x3D; 120  
net.ipv4.ip_local_port_range &#x3D; 1024  65535  
kernel.shmall &#x3D; 2097152  
kernel.shmmax &#x3D; 2147483648  
kernel.shmmni &#x3D; 4096  
kernel.sem &#x3D; 5010 641280 5010 128  
net.core.wmem_default&#x3D;262144  
net.core.wmem_max&#x3D;262144  
net.core.rmem_default&#x3D;4194304  
net.core.rmem_max&#x3D;4194304  
net.ipv4.tcp_fin_timeout &#x3D; 10  
net.ipv4.tcp_keepalive_time &#x3D; 30  
net.ipv4.tcp_window_scaling &#x3D; 0  
net.ipv4.tcp_sack &#x3D; 0  
EOF  
  
sysctl –p  </code></pre></div></figure><ol start="38"><li>切割 Nginx 日志文件(防止单个文件过大,后期处理很困难)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#mkdir  &#x2F;data&#x2F;scripts  
#vim   &#x2F;data&#x2F;scripts&#x2F;nginx_log.sh    
#!&#x2F;bin&#x2F;bash  
  
# 切割 Nginx 日志文件(防止单个文件过大,后期处理很困难)   
logs_path&#x3D;&quot;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;logs&#x2F;&quot;  
mv $&#123;logs_path&#125;access.log $&#123;logs_path&#125;access_$(date -d &quot;yesterday&quot; +&quot;%Y%m%d&quot;).log  
kill -USR1  &#96;cat &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;logs&#x2F;nginx.pid&#96;  
  
# chmod +x  &#x2F;data&#x2F;scripts&#x2F;nginx_log.sh  
# crontab  ‐e                    #脚本写完后,将脚本放入计划任务每天执行一次脚本  
0  1  *  *   *   &#x2F;data&#x2F;scripts&#x2F;nginx_log.sh </code></pre></div></figure><ol start="39"><li>检测 MySQL 数据库连接数量</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 检测 MySQL 数据库连接数量   
  
# 本脚本每 2 秒检测一次 MySQL 并发连接数,可以将本脚本设置为开机启动脚本,或在特定时间段执行  
# 以满足对 MySQL 数据库的监控需求,查看 MySQL 连接是否正常  
# 本案例中的用户名和密码需要根据实际情况修改后方可使用  
log_file&#x3D;&#x2F;var&#x2F;log&#x2F;mysql_count.log  
user&#x3D;root  
passwd&#x3D;123456  
while :  
do  
    sleep 2  
    count&#x3D;&#96;mysqladmin  -u  &quot;$user&quot;  -p  &quot;$passwd&quot;   status |  awk &#39;&#123;print $4&#125;&#39;&#96;  
    echo &quot;&#96;date +%Y‐%m‐%d&#96; 并发连接数为:$count&quot; &gt;&gt; $log_file  
done  </code></pre></div></figure><ol start="40"><li>根据 md5 校验码,检测文件是否被修改</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 根据 md5 校验码,检测文件是否被修改   
# 本示例脚本检测的是&#x2F;etc 目录下所有的 conf 结尾的文件,根据实际情况,您可以修改为其他目录或文件  
# 本脚本在目标数据没有被修改时执行一次,当怀疑数据被人篡改,再执行一次  
# 将两次执行的结果做对比,MD5 码发生改变的文件,就是被人篡改的文件  
for i in $(ls &#x2F;etc&#x2F;*.conf)  
do  
  md5sum &quot;$i&quot; &gt;&gt; &#x2F;var&#x2F;log&#x2F;conf_file.log  
done  </code></pre></div></figure><ol start="41"><li>检测 MySQL 服务是否存活</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 检测 MySQL 服务是否存活   
  
# host 为你需要检测的 MySQL 主机的 IP 地址,user 为 MySQL 账户名,passwd 为密码  
# 这些信息需要根据实际情况修改后方可使用  
host&#x3D;192.168.51.198  
user&#x3D;root  
passwd&#x3D;123456  
mysqladmin -h &#39;$host&#39; -u &#39;$user&#39; -p&#39;$passwd&#39; ping &amp;&gt;&#x2F;dev&#x2F;null  
if [ $? -eq 0 ]  
then  
        echo &quot;MySQL is UP&quot;  
else  
        echo &quot;MySQL is down&quot;  
fi  </code></pre></div></figure><ol start="42"><li>备份 MySQL 的 shell 脚本(mysqldump版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 备份 MySQL 的 shell 脚本(mysqldump版本)   
  
# 定义变量 user(数据库用户名),passwd(数据库密码),date(备份的时间标签)  
# dbname(需要备份的数据库名称,根据实际需求需要修改该变量的值,默认备份 mysql 数据库)  
  
user&#x3D;root  
passwd&#x3D;123456  
dbname&#x3D;mysql  
date&#x3D;$(date +%Y%m%d)  
  
# 测试备份目录是否存在,不存在则自动创建该目录  
[ ! -d &#x2F;mysqlbackup ] &amp;&amp; mkdir &#x2F;mysqlbackup  
# 使用 mysqldump 命令备份数据库  
mysqldump -u &quot;$user&quot; -p &quot;$passwd&quot; &quot;$dbname&quot; &gt; &#x2F;mysqlbackup&#x2F;&quot;$dbname&quot;-$&#123;date&#125;.sql  </code></pre></div></figure><ol start="43"><li>将文件中所有的小写字母转换为大写字母</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 将文件中所有的小写字母转换为大写字母   
# $1是位置参数,是你需要转换大小写字母的文件名称  
# 执行脚本,给定一个文件名作为参数,脚本就会将该文件中所有的小写字母转换为大写字母  
tr &quot;[a‐z]&quot; &quot;[A‐Z]&quot; &lt; $1  </code></pre></div></figure><ol start="44"><li>非交互自动生成 SSH 密钥文件</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 非交互自动生成 SSH 密钥文件   
# ‐t 指定 SSH 密钥的算法为 RSA 算法;‐N 设置密钥的密码为空;‐f 指定生成的密钥文件&gt;存放在哪里  
rm  -rf  ~&#x2F;.ssh&#x2F;&#123;known_hosts,id_rsa*&#125;  
ssh‐keygen -t RSA -N &#39;&#39; -f ~&#x2F;.ssh&#x2F;id_rsa  </code></pre></div></figure><ol start="45"><li>检查特定的软件包是否已经安装</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 检查特定的软件包是否已经安装   
if [ $# -eq 0 ];then  
  echo &quot;你需要制定一个软件包名称作为脚本参数&quot;  
  echo &quot;用法:$0 软件包名称 ...&quot;  
fi  
# $@提取所有的位置变量的值,相当于$*  
for package in &quot;$@&quot;  
do  
    if rpm -q $&#123;package&#125; &amp;&gt;&#x2F;dev&#x2F;null ;then  
    echo -e &quot;$&#123;package&#125;\033[32m 已经安装\033[0m&quot;  
    else  
    echo -e &quot;$&#123;package&#125;\033[34;1m 未安装\033[0m&quot;  
    fi  
done  </code></pre></div></figure><ol start="46"><li>监控 HTTP 服务器的状态(测试返回码)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 监控 HTTP 服务器的状态(测试返回码)  
  
# 设置变量,url为你需要检测的目标网站的网址(IP 或域名),比如百度  
url&#x3D;http:&#x2F;&#x2F;http:&#x2F;&#x2F;183.232.231.172&#x2F;index.html  
  
# 定义函数 check_http:  
# 使用 curl 命令检查 http 服务器的状态  
# ‐m 设置curl不管访问成功或失败,最大消耗的时间为 5 秒,5 秒连接服务为相应则视为无法连接  
# ‐s 设置静默连接,不显示连接时的连接速度、时间消耗等信息  
# ‐o 将 curl 下载的页面内容导出到&#x2F;dev&#x2F;null(默认会在屏幕显示页面内容)  
# ‐w 设置curl命令需要显示的内容%&#123;http_code&#125;,指定curl返回服务器的状态码  
check_http()  
&#123;  
        status_code&#x3D;$(curl -m 5 -s -o &#x2F;dev&#x2F;null -w %&#123;http_code&#125; $url)  
&#125;  
  
  
while :  
do  
        check_http  
        date&#x3D;$(date +%Y%m%d‐%H:%M:%S)  
  
  
# 生成报警邮件的内容  
        echo &quot;当前时间为:$date  
        $url 服务器异常,状态码为$&#123;status_code&#125;.  
        请尽快排查异常.&quot; &gt; &#x2F;tmp&#x2F;http$$.pid  
  
  
# 指定测试服务器状态的函数,并根据返回码决定是发送邮件报警还是将正常信息写入日志  
        if [ $status_code -ne 200 ];then  
                mail -s Warning root &lt; &#x2F;tmp&#x2F;http$$.pid  
        else  
                echo &quot;$url 连接正常&quot; &gt;&gt; &#x2F;var&#x2F;log&#x2F;http.log  
        fi  
        sleep 5  
done  </code></pre></div></figure><ol start="47"><li>自动添加防火墙规则,开启某些服务或端口(适用于 RHEL7)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 自动添加防火墙规则,开启某些服务或端口(适用于 RHEL7)  
#   
# 设置变量定义需要添加到防火墙规则的服务和端口号  
# 使用 firewall‐cmd ‐‐get‐services 可以查看 firewall 支持哪些服务  
service&#x3D;&quot;nfs http ssh&quot;  
port&#x3D;&quot;80 22 8080&quot;  
  
# 循环将每个服务添加到防火墙规则中  
for i in $service  
do  
    echo &quot;Adding $i service to firewall&quot;  
    firewall‐cmd  --add-service&#x3D;$&#123;i&#125;  
done  
  
#循环将每个端口添加到防火墙规则中  
for i in $port  
do  
    echo &quot;Adding $i Port to firewall&quot;  
    firewall‐cmd --add-port&#x3D;$&#123;i&#125;&#x2F;tcp  
done  
#将以上设置的临时防火墙规则,转换为永久有效的规则(确保重启后有效)  
firewall‐cmd  --runtime-to-permanent  </code></pre></div></figure><ol start="48"><li>使用脚本自动创建逻辑卷</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 使用脚本自动创建逻辑卷   
  
  
# 清屏,显示警告信息,创建将磁盘转换为逻辑卷会删除数据  
clear  
echo -e &quot;\033[32m           !!!!!!警告(Warning)!!!!!!\033[0m&quot;  
echo  
echo &quot;+++++++++++++++++++++++++++++++++++++++++++++++++&quot;  
echo &quot;脚本会将整个磁盘转换为 PV,并删除磁盘上所有数据!!!&quot;  
echo &quot;This Script will destroy all data on the Disk&quot;  
echo &quot;+++++++++++++++++++++++++++++++++++++++++++++++++&quot;  
echo  
read -p &quot;请问是否继续 y&#x2F;n?:&quot; sure  
  
# 测试用户输入的是否为 y,如果不是则退出脚本  
[ $sure !&#x3D; y ] &amp;&amp; exit  
  
# 提示用户输入相关参数(磁盘、卷组名称等数据),并测试用户是否输入了这些值,如果没有输入,则脚本退出  
read -p &quot;请输入磁盘名称,如&#x2F;dev&#x2F;vdb:&quot; disk  
[ -z $disk ] &amp;&amp; echo &quot;没有输入磁盘名称&quot; &amp;&amp; exit  
read -p &quot;请输入卷组名称:&quot; vg_name  
[ -z $vg_name ] &amp;&amp; echo &quot;没有输入卷组名称&quot; &amp;&amp; exit  
read -p &quot;请输入逻辑卷名称:&quot; lv_name  
[ -z $lv_name ] &amp;&amp; echo &quot;没有输入逻辑卷名称&quot; &amp;&amp; exit  
read -p &quot;请输入逻辑卷大小:&quot; lv_size  
[ -z $lv_size ] &amp;&amp; echo &quot;没有输入逻辑卷大小&quot; &amp;&amp; exit  
# 使用命令创建逻辑卷  
pvcreate $disk  
vgcreate $vg_name $disk  
lvcreate -L $&#123;lv_size&#125;M -n $&#123;lv_name&#125;  $&#123;vg_name&#125;  </code></pre></div></figure><ol start="49"><li>显示 CPU 厂商信息</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 显示 CPU 厂商信息   
awk &#39;&#x2F;vendor_id&#x2F;&#123;print $3&#125;&#39; &#x2F;proc&#x2F;cpuinfo | uniq</code></pre></div></figure><ol start="50"><li>删除某个目录下大小为 0 的文件</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 删除某个目录下大小为 0 的文件  
  
#&#x2F;var&#x2F;www&#x2F;html 为测试目录,脚本会清空该目录下所有 0 字节的文件  
dir&#x3D;&quot;&#x2F;var&#x2F;www&#x2F;html&quot;  
find $dir -type f -size 0 -exec rm -rf &#123;&#125; \;  </code></pre></div></figure><ol start="51"><li>查找 Linux 系统中的僵尸进程</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 查找 Linux 系统中的僵尸进程  
# awk 判断 ps 命令输出的第 8 列为 Z 是,显示该进程的 PID 和进程命令  
ps aux | awk &#39;&#123;if($8 &#x3D;&#x3D; &quot;Z&quot;)&#123;print $2,$11&#125;&#125;&#39;  </code></pre></div></figure><ol start="52"><li>提示用户输入年份后判断该年是否为闰年</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 提示用户输入年份后判断该年是否为闰年  
  
  
# 能被4整除并且并不能被100整除的年份是闰年  
# 能被400整除的年份也是闰年  
read -p &quot;请输入一个年份:&quot; year  
  
  
if [ &quot;$year&quot; &#x3D; &quot;&quot; ];then  
    echo &quot;没有输入年份&quot;  
    exit  
fi  
#使用正则测试变量 year 中是否包含大小写字母  
if [[ &quot;$year&quot; &#x3D;~ [a‐Z] ]];then  
    echo &quot;你输入的不是数字&quot;  
    exit  
fi  
# 判断是否为闰年  
if [ $[year % 4] -eq 0 ] &amp;&amp; [ $[year % 100] -ne 0 ];then  
    echo &quot;$year年是闰年&quot;    
elif [ $[year % 400] -eq 0 ];then  
    echo &quot;$year年是闰年&quot;  
else  
    echo &quot;$year年不是闰年&quot;  
fi  </code></pre></div></figure><ol start="53"><li>生成随机密码(urandom 版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 生成随机密码(urandom 版本)   
  
# &#x2F;dev&#x2F;urandom 文件是 Linux 内置的随机设备文件  
# cat &#x2F;dev&#x2F;urandom 可以看看里面的内容,ctrl+c 退出查看  
# 查看该文件内容后,发现内容有些太随机,包括很多特殊符号,我们需要的密码不希望使用这些符号  
# tr ‐dc &#39;_A‐Za‐z0‐9&#39; &lt; &#x2F;dev&#x2F;urandom  
# 该命令可以将随机文件中其他的字符删除,仅保留大小写字母,数字,下划线,但是内容还是太多  
# 我们可以继续将优化好的内容通过管道传递给 head 命令,在大量数据中仅显示头 10 个字节  
# 注意 A 前面有个下划线  
tr -dc &#39;_A‐Za‐z0‐9&#39; &lt;&#x2F;dev&#x2F;urandom | head -c 10  </code></pre></div></figure><ol start="54"><li>生成随机密码(字串截取版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 生成随机密码(字串截取版本)   
  
# 设置变量 key,存储密码的所有可能性(密码库),如果还需要其他字符请自行添加其他密码字符  
# 使用$#统计密码库的长度  
key&#x3D;&quot;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;  
num&#x3D;$&#123;#key&#125;  
# 设置初始密码为空  
pass&#x3D;&#39;&#39;  
# 循环 8 次,生成随机密码  
# 每次都是随机数对密码库的长度取余,确保提取的密码字符不超过密码库的长度  
# 每次循环提取一位随机密码,并将该随机密码追加到 pass 变量的最后  
for i in &#123;1..8&#125;  
do    
  index&#x3D;$[RANDOM%num]  
  pass&#x3D;$pass$&#123;key:$index:1&#125;  
done  
echo $pass  </code></pre></div></figure><ol start="55"><li>生成随机密码(UUID 版本,16 进制密码)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 生成随机密码(UUID 版本,16 进制密码)   
uuidgen  </code></pre></div></figure><ol start="56"><li>生成随机密码(进程 ID 版本,数字密码)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 生成随机密码(进程 ID 版本,数字密码)  
echo $$  </code></pre></div></figure><ol start="57"><li>测试用户名与密码是否正确</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 测试用户名与密码是否正确  
#用户名为 tom 并且密码为 123456,则提示登录成功,否则提示登录失败  
read -p &quot;请输入用户名:&quot;  user  
read -p &quot;请输入密码:&quot;    pass  
if [ &quot;$user&quot; &#x3D;&#x3D; &#39;tom&#39; -a &quot;$pass&quot; &#x3D;&#x3D; &#39;123456&#39; ];then  
  echo &quot;Login successful&quot;  
else  
  echo &quot;Login Failed&quot;  
fi  </code></pre></div></figure><ol start="58"><li>循环测试用户名与密码是否正确</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 循环测试用户名与密码是否正确   
# 循环测试用户的账户名和密码,最大测试 3 次,输入正确提示登录成功,否则提示登录失败  
# 用户名为 tom 并且密码为 123456    
for i in &#123;1..3&#125;  
do  
  read -p &quot;请输入用户名:&quot; user  
  read -p &quot;请输入密码:&quot;   pass  
if [ &quot;$user&quot; &#x3D;&#x3D; &#39;tom&#39; -a &quot;$pass&quot; &#x3D;&#x3D; &#39;123456&#39; ];then  
    echo &quot;Login successful&quot;  
     exit  
fi  
done  
echo &quot;Login Failed&quot;  </code></pre></div></figure><ol start="59"><li>Shell 脚本的 fork 炸弹</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# Shell 脚本的 fork 炸弹   
  
  
# 快速消耗计算机资源,致使计算机死机  
# 定义函数名为.(点), 函数中递归调用自己并放入后台执行  
.() &#123; .|.&amp; &#125;;. </code></pre></div></figure><ol start="60"><li>批量下载有序文件(pdf、图片、视频等等)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 批量下载有序文件(pdf、图片、视频等等)  
  
# 本脚本准备有序的网络资料进行批量下载操作(如 01.jpg,02.jpg,03.jpg)  
# 设置资源来源的域名连接  
url&#x3D;&quot;http:&#x2F;&#x2F;www.baidu.com&#x2F;&quot;  
echo  &quot;开始下载...&quot;  
sleep 2  
type&#x3D;jpg  
for i in &#96;seq 100&#96;  
     echo &quot;正在下载$i.$type&quot;  
  curl $url&#x2F;$i.$type -o &#x2F;tmp&#x2F;$&#123;i&#125;$type  
     sleep 1  
done  
#curl 使用-o 选项指定下载文件另存到哪里.  </code></pre></div></figure><ol start="61"><li>显示当前计算机中所有账户的用户名称</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash"> #!&#x2F;bin&#x2F;bash  
  
 # 显示当前计算机中所有账户的用户名称  
  
# 下面使用3种不同的方式列出计算机中所有账户的用户名  
# 指定以:为分隔符,打印&#x2F;etc&#x2F;passwd 文件的第 1 列  
awk -F: &#39;&#123;print $1&#125;&#39; &#x2F;etc&#x2F;passwd  
  
# 指定以:为分隔符,打印&#x2F;etc&#x2F;passwd 文件的第 1 列  
cut -d: -f1 &#x2F;etc&#x2F;passwd  
  
# 使用 sed 的替换功能,将&#x2F;etc&#x2F;passwd 文件中:后面的所有内容替换为空(仅显示用户名)  
sed &#39;s&#x2F;:.*&#x2F;&#x2F;&#39; &#x2F;etc&#x2F;passwd  </code></pre></div></figure><ol start="62"><li>制定目录路径,脚本自动将该目录使用 tar 命令打包备份到/data目录</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 制定目录路径,脚本自动将该目录使用 tar 命令打包备份到&#x2F;data目录   
  
  
[ ! -d &#x2F;data ] &amp;&amp; mkdir &#x2F;data  
[ -z $1 ] &amp;&amp; exit  
if [ -d $1 ];then  
  tar -czf &#x2F;data&#x2F;$1.-&#96;date +%Y%m%d&#96;.tar.gz $1  
else  
    echo &quot;该目录不存在&quot;  
fi  </code></pre></div></figure><ol start="63"><li>显示进度条(回旋镖版)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 显示进度条(回旋镖版)  
  
  
while :  
do  
  clear  
  for i in &#123;1..20&#125;  
  do  
    echo ‐e &quot;\033[3;$&#123;i&#125;H*&quot;  
    sleep 0.1  
    done  
    clear  
    for i in &#123;20..1&#125;  
    do  
    echo ‐e &quot;\033[3;$&#123;i&#125;H*&quot;  
    sleep 0.1  
    done  
    clear  
done  </code></pre></div></figure><ol start="64"><li>安装 LAMP 环境(yum 版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 安装 LAMP 环境(yum 版本)   
# 本脚本适用于 RHEL7(RHEL6 中数据库为 mysql)  
yum makecache &amp;&gt;&#x2F;dev&#x2F;null  
num&#x3D;$(yum repolist | awk &#39;&#x2F;repolist&#x2F;&#123;print $2&#125;&#39; | sed &#39;s&#x2F;,&#x2F;&#x2F;&#39;)  
if [ $num -lt 0 ];then  
  yum -y install httpd  
  yum -y install mariadb mariadb-server mariadb-devel  
  yum -y install php php-mysql  
else  
  echo &quot;未配置 yum 源...&quot;  
fi  </code></pre></div></figure><ol start="65"><li>循环关闭局域网中所有主机</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 循环关闭局域网中所有主机   
# 假设本机为 192.168.4.100,编写脚本关闭除自己外的其他所有主机  
# 脚本执行,需要提前给所有其他主机传递 ssh 密钥,满足无密码连接  
for i in &#123;1..254&#125;  
do  
  [ $i -eq 100 ] &amp;&amp; continue  
  echo &quot;正在关闭 192.168.4.$i...&quot;  
  ssh 192.168.4.$i poweroff  
done  </code></pre></div></figure><ol start="66"><li>获取本机 MAC 地址</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 获取本机 MAC 地址  
ip a s | awk &#39;BEGIN&#123;print  &quot; 本 机 MAC 地 址 信 息 如 下 :&quot;&#125;&#x2F;^[0‐9]&#x2F;&#123;print $2;getline;if($0~&#x2F;link\&#x2F;ether&#x2F;)&#123;print $2&#125;&#125;&#39; | grep -v lo:  
# awk 读取 ip 命令的输出,输出结果中如果有以数字开始的行,先显示该行的地 2 列(网卡名称),  
# 接着使用 getline 再读取它的下一行数据,判断是否包含 link&#x2F;ether  
# 如果保护该关键词,就显示该行的第 2 列(MAC 地址)  
# lo 回环设备没有 MAC,因此将其屏蔽,不显示 </code></pre></div></figure><ol start="67"><li>自动配置 rsynd 服务器的配置文件 rsyncd.conf</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 自动配置 rsynd 服务器的配置文件 rsyncd.conf  
  
# See rsyncd.conf man page for more options.  
  
[ ! -d &#x2F;home&#x2F;ftp ] &amp;&amp; mkdir &#x2F;home&#x2F;ftp  
echo &#39;uid &#x3D; nobody  
gid &#x3D; nobody  
use chroot &#x3D; yes  
max connections &#x3D; 4  
pid file &#x3D; &#x2F;var&#x2F;run&#x2F;rsyncd.pid  
exclude &#x3D; lost+found&#x2F;  
transfer logging &#x3D; yes  
timeout &#x3D; 900  
ignore nonreadable &#x3D; yes  
dont compress   &#x3D; *.gz *.tgz *.zip *.z *.Z *.rpm *.deb *.bz2  
[ftp]  
    path &#x3D; &#x2F;home&#x2F;ftp  
    comment &#x3D; share&#39; &gt; &#x2F;etc&#x2F;rsyncd.conf  </code></pre></div></figure><ol start="68"><li>修改 Linux 系统的最大打开文件数量</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 修改 Linux 系统的最大打开文件数量   
  
# 往&#x2F;etc&#x2F;security&#x2F;limits.conf 文件的末尾追加两行配置参数,修改最大打开文件数量为 65536  
cat &gt;&gt; &#x2F;etc&#x2F;security&#x2F;limits.conf &lt;&lt;EOF  
* soft nofile  65536  
* hard nofile  65536  
EOF  </code></pre></div></figure><ol start="69"><li>设置 Python 支持自动命令补齐功能</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 设置 Python 支持自动命令补齐功能   
  
# Summary:Enable tab complete for python  
# Description:  
  
Needs import readline and rlcompleter module  
#  
import readline  
#  
import rlcompleter  
#  
help(rlcompleter) display detail: readline.parse_and_bind(&#39;tab: complete&#39;)  
#  
man python display detail: PYTHONSTARTUP variable  
  
if  [ ! -f &#x2F;usr&#x2F;bin&#x2F;tab.py ];then  
  cat &gt;&gt; &#x2F;usr&#x2F;bin&#x2F;tab.py &lt;&lt;EOF  
import readline  
import rlcompleter  
readline.parse_and_bind(&#39;tab: complete&#39;)  
EOF  
fi  
sed  -i &#39;$a export PYTHONSTARTUP&#x3D;&#x2F;usr&#x2F;bin&#x2F;tab.py&#39; &#x2F;etc&#x2F;profile  
source &#x2F;etc&#x2F;profile  </code></pre></div></figure><ol start="70"><li>自动修改计划任务配置文件</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">Docker+K8s+Jenkins 主流技术全解视频资料【干货免费分享】  
  
#!&#x2F;bin&#x2F;bash  
  
# 自动修改计划任务配置文件   
read -p &quot;请输入分钟信息(00‐59):&quot; min  
read -p &quot;请输入小时信息(00‐24):&quot; hour  
read -p &quot;请输入日期信息(01‐31):&quot; date  
read -p &quot;请输入月份信息(01‐12):&quot; month  
read -p &quot;请输入星期信息(00‐06):&quot; weak  
read -p &quot;请输入计划任务需要执行的命令或脚本:&quot; program  
echo &quot;$min $hour $date $month $weak $program&quot; &gt;&gt; &#x2F;etc&#x2F;crontab  </code></pre></div></figure><ol start="71"><li>使用脚本循环创建三位数字的文本文件(111-999 的文件)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 使用脚本循环创建三位数字的文本文件(111-999 的文件)   
  
for i in &#123;1..9&#125;  
do  
  for j in &#123;1..9&#125;  
  do  
    for k in &#123;1..9&#125;  
    do  
      touch &#x2F;tmp&#x2F;$i$j$k.txt  
    done  
    done  
done  </code></pre></div></figure><ol start="72"><li>找出/etc/passwd 中能登录的用户,并将对应在/etc/shadow 中第二列密码提出处理</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 找出&#x2F;etc&#x2F;passwd 中能登录的用户,并将对应在&#x2F;etc&#x2F;shadow 中第二列密码提出处理  
  
user&#x3D;$(awk -F: &#39;&#x2F;bash$&#x2F;&#123;print $1&#125;&#39; &#x2F;etc&#x2F;passwd)  
for i in $user  
do  
  awk -F: -v x&#x3D;$i &#39;$1&#x3D;&#x3D;x&#123;print $1,$2&#125;&#39; &#x2F;etc&#x2F;shadow  
done  </code></pre></div></figure><ol start="73"><li>统计/etc/passwd 中 root 出现的次数</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 统计&#x2F;etc&#x2F;passwd 中 root 出现的次数   
  
#每读取一行文件内容,即从第 1 列循环到最后 1 列,依次判断是否包含 root 关键词,如果包含则 x++  
awk -F: &#39;&#123;i&#x3D;1;while(i&lt;&#x3D;NF)&#123;if($i~&#x2F;root&#x2F;)&#123;x++&#125;;i++&#125;&#125; END&#123;print &quot;root 出现次数为&quot;x&#125;&#39; &#x2F;etc&#x2F;passwd  </code></pre></div></figure><ol start="74"><li>统计 Linux 进程相关数量信息</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 统计 Linux 进程相关数量信息   
running&#x3D;0  
sleeping&#x3D;0  
stoped&#x3D;0  
zombie&#x3D;0  
# 在 proc 目录下所有以数字开始的都是当前计算机正在运行的进程的进程 PID  
# 每个 PID 编号的目录下记录有该进程相关的信息  
for pid in &#x2F;proc&#x2F;[1‐9]*  
do  
  procs&#x3D;$[procs+1]  
  stat&#x3D;$(awk &#39;&#123;print $3&#125;&#39; $pid&#x2F;stat)  
# 每个 pid 目录下都有一个 stat 文件,该文件的第 3 列是该进程的状态信息  
    case $stat in  
    R)  
    running&#x3D;$[running+1]  
    ;;  
    T)  
    stoped&#x3D;$[stoped+1]  
    ;;  
    S)  
    sleeping&#x3D;$[sleeping+1]  
    ;;  
    Z)  
     zombie&#x3D;$[zombie+1]  
     ;;  
    esac  
done  
echo &quot;进程统计信息如下&quot;  
echo &quot;总进程数量为:$procs&quot;  
echo &quot;Running 进程数为:$running&quot;  
echo &quot;Stoped 进程数为:$stoped&quot;  
echo &quot;Sleeping 进程数为:$sleeping&quot;  
echo &quot;Zombie 进程数为:$zombie&quot;  </code></pre></div></figure><ol start="75"><li>从键盘读取一个论坛积分,判断论坛用户等级</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 从键盘读取一个论坛积分,判断论坛用户等级  
  
#等级分类如下:  
#  大于等于 90        神功绝世  
#  大于等于 80,小于 90       登峰造极  
#  大于等于 70,小于 80       炉火纯青  
#  大于等于 60,小于 70       略有小成  
#  小于 60               初学乍练  
read -p &quot;请输入积分(0‐100):&quot; JF  
if [ $JF -ge 90 ] ; then  
  echo &quot;$JF 分,神功绝世&quot;  
elif [ $JF -ge 80 ] ; then  
    echo &quot;$JF 分,登峰造极&quot;  
elif [ $JF -ge 70 ] ; then  
    echo &quot;$JF 分,炉火纯青&quot;  
elif [ $JF -lt 60 ] ; then  
    echo &quot;$JF 分,略有小成&quot;  
else  
    echo &quot;$JF 分,初学乍练&quot;  
fi  </code></pre></div></figure><ol start="76"><li>判断用户输入的数据类型(字母、数字或其他)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 判断用户输入的数据类型(字母、数字或其他)   
read -p &quot;请输入一个字符:&quot; KEY  
case &quot;$KEY&quot; in  
  [a‐z]|[A‐Z])  
    echo &quot;字母&quot;   
    ;;  
  [0‐9])  
    echo &quot;数字&quot;   
    ;;  
  *)  
    echo &quot;空格、功能键或其他控制字符&quot;  
esac  </code></pre></div></figure><ol start="77"><li>显示进度条(数字版)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 显示进度条(数字版)   
# echo 使用‐e 选项后,在打印参数中可以指定 H,设置需要打印内容的 x,y 轴的定位坐标  
# 设置需要打印内容在第几行,第几列  
for i in &#123;1..100&#125;  
do  
    echo -e &quot;\033[6;8H[&quot;  
    echo -e &quot;\033[6;9H$i%&quot;  
    echo -e &quot;\033[6;13H]&quot;  
    sleep 0.1  
done  </code></pre></div></figure><ol start="78"><li>打印斐波那契数列</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 打印斐波那契数列(该数列的特点是后一个数字,永远都是前 2 个数字之和)   
  
# 斐波那契数列后一个数字永远是前 2 个数字之和  
# 如:0  1  1  2  3  5  8  13 ... ...  
list&#x3D;(0 1)  
for i in &#96;seq 2 11&#96;  
do  
  list[$i]&#x3D;&#96;expr $&#123;list[‐1]&#125; + $&#123;list[‐2]&#125;&#96;  
done  
echo $&#123;list[@]&#125;  </code></pre></div></figure><ol start="79"><li>判断用户输入的是 Yes 或 NO</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 判断用户输入的是 Yes 或 NO   
  
read -p  &quot;Are you sure?[y&#x2F;n]:&quot;  sure  
case  $sure  in  
  y|Y|Yes|YES)    
    echo &quot;you enter $a&quot;  
    ;;  
    n|N|NO|no)  
     echo &quot;you enter $a&quot;  
     ;;  
    *)  
     echo &quot;error&quot;;;  
esac  </code></pre></div></figure><ol start="80"><li>显示本机 Linux 系统上所有开放的端口列表</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 显示本机 Linux 系统上所有开放的端口列表   
  
# 从端口列表中观测有没有没用的端口,有的话可以将该端口对应的服务关闭,防止意外的攻击可能性  
ss -nutlp | awk &#39;&#123;print $1,$5&#125;&#39; | awk -F&quot;[: ]&quot; &#39;&#123;print &quot;协议:&quot;$1,&quot;端口号:&quot;$NF&#125;&#39; | grep &quot;[0‐9]&quot; | uniq  </code></pre></div></figure><ol start="81"><li>将 Linux 系统中 UID 大于等于 1000 的普通用户都删除</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 将 Linux 系统中 UID 大于等于 1000 的普通用户都删除   
  
# 先用 awk 提取所有 uid 大于等于 1000 的普通用户名称  
# 再使用 for 循环逐个将每个用户删除即可  
user&#x3D;$(awk -F: &#39;$3&gt;&#x3D;1000&#123;print $1&#125;&#39; &#x2F;etc&#x2F;passwd)  
for i in $user  
do  
     userdel -r $i  
done  </code></pre></div></figure><ol start="82"><li>使用脚本开启关闭虚拟机</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 使用脚本开启关闭虚拟机   
# 脚本通过调用virsh命令实现对虚拟机的管理,如果没有该命令,需要安装 libvirt‐client 软件包  
# $1是脚本的第1个参数,$2是脚本的第2个参数  
# 第1个参数是你希望对虚拟机进行的操作指令,第2个参数是虚拟机名称  
case $1 in  
  list)  
    virsh list --all  
    ;;  
  start)  
    virsh start $2  
    ;;  
  stop)  
    virsh destroy $2  
    ;;  
  enable)  
    virsh autostart $2  
    ;;  
  disable)  
    virsh autostart --disable $2  
    ;;  
  *)  
    echo &quot;Usage:$0 list&quot;  
    echo &quot;Usage:$0 [start|stop|enable|disable]  VM_name&quot;  
    cat &lt;&lt; EOF  
    #list      显示虚拟机列表  
    #start     启动虚拟机  
    #stop      关闭虚拟机  
    #enable    设置虚拟机为开机自启  
    #disable   关闭虚拟机开机自启功能  
    EOF  
    ;;  
esac  </code></pre></div></figure><ol start="83"><li>调整虚拟机内存参数的 shell 脚本</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 调整虚拟机内存参数的 shell 脚本   
# 脚本通过调用 virsh 命令实现对虚拟机的管理,如果没有该命令,需要安装 libvirt‐client 软件包  
cat &lt;&lt; EOF  
1.调整虚拟机最大内存数值  
2.调整实际分配给虚拟机的内存数值  
EOF  
read -p &quot;请选择[1‐2]:&quot; select  
case $select in  
  1)  
      read -p &quot;请输入虚拟机名称&quot; name  
      read -p &quot;请输入最大内存数值(单位:k):&quot; size  
      virsh setmaxmem $name --size $size --config  
      ;;  
  2)  
      read -p &quot;请输入虚拟机名称&quot; name  
      read -p &quot;请输入实际分配内存数值(单位:k):&quot; size  
      virsh setmem $name $size  
      ;;  
  *)  
      echo &quot;Error&quot;  
      ;;  
esac  </code></pre></div></figure><ol start="84"><li>查看 KVM 虚拟机中的网卡信息(不需要进入启动或进入虚拟机)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 查看 KVM 虚拟机中的网卡信息(不需要进入启动或进入虚拟机)   
  
# 该脚本使用 guestmount 工具,可以将虚拟机的磁盘系统挂载到真实机文件系统中  
# Centos7.2 中安装 libguestfs‐tools‐c 可以获得 guestmount 工具  
# 虚拟机可以启动或者不启动都不影响该脚本的使用  
# 将虚拟机磁盘文件挂载到文件系统后,就可以直接读取磁盘文件中的网卡配置文件中的数据  
clear  
mountpoint&#x3D;&quot;&#x2F;media&#x2F;virtimage&quot;  
[ ! -d $mountpoint ] &amp;&amp; mkdir $mountpoint  
read -p &quot;输入虚拟机名称:&quot; name  
echo &quot;请稍后...&quot;  
# 如果有设备挂载到该挂载点,则先 umount 卸载  
if mount | grep -q &quot;$mountpoint&quot; ;then  
  umount $mountpoint  
fi  
# 只读的方式,将虚拟机的磁盘文件挂载到特定的目录下,这里是&#x2F;media&#x2F;virtimage 目录  
guestmount -r -d $name -i $mountpoint  
echo  
echo &quot;‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐&quot;  
echo -e &quot;\033[32m$name 虚拟机中网卡列表如下:\033[0m&quot;  
dev&#x3D;$(ls &#x2F;media&#x2F;virtimage&#x2F;etc&#x2F;sysconfig&#x2F;network‐scripts&#x2F;ifcfg-* |awk -F&quot;[&#x2F;‐]&quot; &#39;&#123;print $9&#125;&#39;)  
echo $dev  
echo &quot;‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐‐&quot;  
echo  
echo  
echo &quot;+++++++++++++++++++++++++++++++++++++++++++&quot;  
echo -e &quot;\033[32m 网卡 IP 地址信息如下:\033[0m&quot;  
for i in $dev  
do  
  echo -n &quot;$i:&quot;  
  grep -q &quot;IPADDR&quot; &#x2F;media&#x2F;virtimage&#x2F;etc&#x2F;sysconfig&#x2F;network‐scripts&#x2F;ifcfg-$i || echo &quot;未配置 IP地址&quot;  
  awk -F&#x3D; &#39;&#x2F;IPADDR&#x2F;&#123;print $2&#125;&#39; &#x2F;media&#x2F;virtimage&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-$i  
done  
echo &quot;+++++++++++++++++++++++++++++++++++++++++++&quot;  </code></pre></div></figure><ol start="85"><li>不登陆虚拟机,修改虚拟机网卡 IP 地址</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 不登陆虚拟机,修改虚拟机网卡 IP 地址   
  
# 该脚本使用 guestmount 工具,Centos7.2 中安装 libguestfs‐tools‐c 可以获得 guestmount 工具  
# 脚本在不登陆虚拟机的情况下,修改虚拟机的 IP 地址信息  
# 在某些环境下,虚拟机没有 IP 或 IP 地址与真实主机不在一个网段  
# 真实主机在没有 virt‐manger 图形的情况下,远程连接虚拟机很麻烦  
# 该脚本可以解决类似的问题  
read -p &quot;请输入虚拟机名称:&quot; name  
if virsh domstate $name | grep -q running ;then  
  echo &quot;修改虚拟机网卡数据,需要关闭虚拟机&quot;  
  virsh destroy $name  
fi  
mountpoint&#x3D;&quot;&#x2F;media&#x2F;virtimage&quot;  
[ ! -d $mountpoint ] &amp;&amp; mkdir $mountpoint  
echo &quot;请稍后...&quot;  
if mount | grep -q &quot;$mountpoint&quot; ;then  
  umount $mountpoint  
fi  
guestmount  -d $name -i $mountpoint  
read -p &quot;请输入需要修改的网卡名称:&quot; dev  
read -p &quot;请输入 IP 地址:&quot; addr  
# 判断原本网卡配置文件中是否有 IP 地址,有就修改该 IP,没有就添加一个新的 IP 地址  
if grep -q &quot;IPADDR&quot;  $mountpoint&#x2F;etc&#x2F;sysconfig&#x2F;network‐scripts&#x2F;ifcfg‐$dev ;then  
  sed -i &quot;&#x2F;IPADDR&#x2F;s&#x2F;&#x3D;.*&#x2F;&#x3D;$addr&#x2F;&quot;  $mountpoint&#x2F;etc&#x2F;sysconfig&#x2F;network‐scripts&#x2F;ifcfg‐$dev  
else  
  echo &quot;IPADDR&#x3D;$addr&quot; &gt;&gt; $mountpoint&#x2F;etc&#x2F;sysconfig&#x2F;network‐scripts&#x2F;ifcfg‐$dev  
fi  
# 如果网卡配置文件中有客户配置的 IP 地址,则脚本提示修改 IP 完成  
awk -F&#x3D; -v x&#x3D;$addr &#39;$2&#x3D;&#x3D;x&#123;print &quot;完成...&quot;&#125;&#39;  $mountpoint&#x2F;etc&#x2F;sysconfig&#x2F;network‐scripts&#x2F;ifcfg-$dev  </code></pre></div></figure><ol start="86"><li>破解虚拟机密码,无密码登陆虚拟机系统</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 破解虚拟机密码,无密码登陆虚拟机系统   
  
# 该脚本使用 guestmount 工具,Centos7.2 中安装 libguestfs‐tools‐c 可以获得 guestmount 工具  
read -p &quot;请输入虚拟机名称:&quot; name  
if virsh domstate $name | grep -q running ;then  
  echo &quot;破解,需要关闭虚拟机&quot;  
  virsh destroy $name  
fi  
mountpoint&#x3D;&quot;&#x2F;media&#x2F;virtimage&quot;  
[ ! -d $mountpoint ] &amp;&amp; mkdir $mountpoint  
echo &quot;请稍后...&quot;  
if mount | grep -q &quot;$mountpoint&quot; ;then  
  umount $mountpoint  
fi  
guestmount -d $name -i $mountpoint  
# 将 passwd 中密码占位符号 x 删除,该账户即可实现无密码登陆系统  
sed -i &quot;&#x2F;^root&#x2F;s&#x2F;x&#x2F;&#x2F;&quot; $mountpoint&#x2F;etc&#x2F;passwd </code></pre></div></figure><ol start="87"><li>Shell 脚本对信号的处理,执行脚本后,按键盘 Ctrl+C 无法终止的脚本</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# Shell 脚本对信号的处理,执行脚本后,按键盘 Ctrl+C 无法终止的脚本   
# 使用 trap 命令可以拦截用户通过键盘或 kill 命令发送过来的信号  
# 使用 kill ‐l 可以查看 Linux 系统中所有的信号列表,其中 2 代表 Ctrl+C  
# trap 当发现有用户 ctrl+C 希望终端脚本时,就执行 echo &quot;暂停 10s&quot;;sleep 10 这两条命令  
# 另外用户使用命令:[ kill ‐2 脚本的 PID ] 也可以中断脚本和 Ctrl+C 一样的效果,都会被 trap 拦截  
trap &#39;echo &quot;暂停 10s&quot;;sleep 10&#39; 2  
while :  
do  
  echo &quot;go go go&quot;  
done  </code></pre></div></figure><ol start="88"><li>一键部署 memcached</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 一键部署 memcached   
# 脚本用源码来安装 memcached 服务器  
# 注意:如果软件的下载链接过期了,请更新 memcached 的下载链接  
wget http:&#x2F;&#x2F;www.memcached.org&#x2F;files&#x2F;memcached-1.5.1.tar.gz  
yum -y install gcc  
tar -xf  memcached‐1.5.1.tar.gz  
cd memcached‐1.5.1  
.&#x2F;configure  
make  
make install  </code></pre></div></figure><ol start="89"><li>一键配置 VNC 远程桌面服务器(无密码版本)</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 一键配置 VNC 远程桌面服务器(无密码版本)  
  
# 脚本配置的 VNC 服务器,客户端无需密码即可连接  
# 客户端仅有查看远程桌面的权限,没有鼠标和键盘的操作权限  
  
rpm --quiet -q tigervnc‐server  
if [  $? -ne  0 ];then  
  yum  -y  tigervnc‐server  
fi  
x0vncserver AcceptKeyEvents&#x3D;0 AlwaysShared&#x3D;1 \  
AcceptPointerEvents&#x3D;0 SecurityTypes&#x3D;None  rfbport&#x3D;5908  </code></pre></div></figure><ol start="90"><li>关闭 SELinux</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 关闭 SELinux   
  
sed -i  &#39;&#x2F;^SELINUX&#x2F;s&#x2F;&#x3D;.*&#x2F;&#x3D;disabled&#x2F;&#39; &#x2F;etc&#x2F;selinux&#x2F;config  
setenforce 0  </code></pre></div></figure><ol start="91"><li>查看所有虚拟机磁盘使用量以及CPU使用量信息</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 查看所有虚拟机磁盘使用量以及CPU使用量信息   
  
virt‐df  
read -n1 &quot;按任意键继续&quot; key  
virt‐top  </code></pre></div></figure><ol start="92"><li>使用 shell 脚本打印图形</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 使用 shell 脚本打印如下图形:   
# 打印第一组图片  
# for(())为类 C 语言的语法格式,也可以使用 for i  in;do  ;done 的格式替换  
# for((i&#x3D;1;i&lt;&#x3D;9;i++))循环会执行 9 次,i 从 1 开始到 9,每循环一次 i 自加 1  
clear  
for (( i&#x3D;1; i&lt;&#x3D;9; i++ ))  
do  
  for (( j&#x3D;1; j&lt;&#x3D;i; j++ ))  
  do  
    echo -n &quot;$i&quot;  
  done  
  echo &quot;&quot;  
done  
read  -n1  &quot;按任意键继续&quot;  key  
#打印第二组图片  
clear  
for (( i&#x3D;1; i&lt;&#x3D;5; i++ ))   
do  
  for (( j&#x3D;1; j&lt;&#x3D;i; j++ ))  
  do  
    echo -n &quot; |&quot;  
  done  
  echo &quot;_ &quot;  
done  
read  -n1  &quot;按任意键继续&quot;  key  
#打印第三组图片  
clear  
for (( i&#x3D;1; i&lt;&#x3D;5; i++ ))  
do  
  for (( j&#x3D;1; j&lt;&#x3D;i; j++ ))  
  do  
    echo -n &quot; *&quot;  
  done  
  echo &quot;&quot;  
done  
for (( i&#x3D;5; i&gt;&#x3D;1; i‐‐ ))  
do  
  for (( j&#x3D;1; j&lt;&#x3D;i; j++ ))  
  do  
    echo -n &quot; *&quot;  
  done  
  echo &quot;&quot;  
done  </code></pre></div></figure><ol start="93"><li>根据计算机当前时间,返回问候语,可以将该脚本设置为开机启动</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 根据计算机当前时间,返回问候语,可以将该脚本设置为开机启动   
  
# 00‐12 点为早晨,12‐18 点为下午,18‐24 点为晚上  
# 使用 date 命令获取时间后,if 判断时间的区间,确定问候语内容  
tm&#x3D;$(date +%H)  
if [ $tm -le 12 ];then  
  msg&#x3D;&quot;Good Morning $USER&quot;  
elif [ $tm -gt 12 -a $tm -le 18 ];then  
    msg&#x3D;&quot;Good Afternoon $USER&quot;  
else  
    msg&#x3D;&quot;Good Night $USER&quot;  
fi  
echo &quot;当前时间是:$(date +&quot;%Y‐%m‐%d %H:%M:%S&quot;)&quot;  
echo -e &quot;\033[34m$msg\033[0m&quot;  </code></pre></div></figure><ol start="94"><li>读取用户输入的账户名称,将账户名写入到数组保存</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 读取用户输入的账户名称,将账户名写入到数组保存   
# 定义数组名称为 name,数组的下标为 i,小标从 0 开始,每输入一个账户名,下标加 1,继续存下一个账户  
# 最后,输入 over,脚本输出总结性信息后脚本退出  
i&#x3D;0  
while :  
do  
  read -p &quot;请输入账户名,输入 over 结束:&quot; key  
  if [ $key &#x3D;&#x3D; &quot;over&quot; ];then   
    break  
    else  
    name[$i]&#x3D;$key  
    let i++  
    fi  
done  
echo &quot;总账户名数量:$&#123;#name[*]&#125;&quot;  
echo &quot;$&#123;name[@]&#125;&quot;  </code></pre></div></figure><ol start="95"><li>判断文件或目录是否存在</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 判断文件或目录是否存在   
if [ $# -eq 0 ] ;then  
echo &quot;未输入任何参数,请输入参数&quot;  
echo &quot;用法:$0 [文件名|目录名]&quot;  
fi  
if [ -f $1 ];then  
  echo &quot;该文件,存在&quot;  
  ls -l $1  
else  
  echo &quot;没有该文件&quot;  
fi  
if [ -d  $1 ];then  
     echo &quot;该目录,存在&quot;  
     ls -ld  $2  
else  
     echo &quot;没有该目录&quot;  
fi  </code></pre></div></figure><ol start="96"><li>打印各种格式的时间</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 打印各种时间格式   
  
echo &quot;显示星期简称(如:Sun)&quot;  
date +%a  
echo &quot;显示星期全称(如:Sunday)&quot;  
date +%A  
echo &quot;显示月份简称(如:Jan)&quot;  
date +%b  
echo &quot;显示月份全称(如:January)&quot;  
date +%B  
echo &quot;显示数字月份(如:12)&quot;  
date +%m  
echo &quot;显示数字日期(如:01 号)&quot;  
date +%d  
echo &quot;显示数字年(如:01 号)&quot;  
date +%Y echo &quot;显示年‐月‐日&quot;  
date +%F  
echo &quot;显示小时(24 小时制)&quot;  
date +%H  
echo &quot;显示分钟(00..59)&quot;  
date +%M  
echo &quot;显示秒&quot;  
date +%S  
echo &quot;显示纳秒&quot;  
date +%N  
echo &quot;组合显示&quot;  
date +&quot;%Y%m%d %H:%M:%S&quot; </code></pre></div></figure><ol start="97"><li>使用 egrep 过滤 MAC 地址</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 使用 egrep 过滤 MAC 地址   
  
# MAC 地址由 16 进制组成,如 AA:BB:CC:DD:EE:FF  
# [0‐9a‐fA‐F]&#123;2&#125;表示一段十六进制数值,&#123;5&#125;表示连续出现5组前置:的十六进制  
egrep &quot;[0‐9a‐fA‐F]&#123;2&#125;(:[0‐9a‐fA‐F]&#123;2&#125;)&#123;5&#125;&quot; $1  </code></pre></div></figure><ol start="98"><li>统计双色球各个数字的中奖概率</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 统计双色球各个数字的中奖概率   
  
# 往期双色球中奖号码如下:  
# 01 04 11 28 31 32  16  
# 04 07 08 18 23 24  02  
# 02 05 06 16 28 29  04  
# 04 19 22 27 30 33  01  
# 05 10 18 19 30 31  03  
# 02 06 11 12 19 29  06  
# 统计篮球和红球数据出现的概率次数(篮球不分顺序,统计所有篮球混合在一起的概率)  
awk &#39;&#123;print $1&quot;\n&quot;$2&quot;\n&quot;$3&quot;\n&quot;$4&quot;\n&quot;$5&quot;\n&quot;$6&#125;&#39; 1.txt | sort | uniq -c | sort  
awk &#39;&#123;print $7&#125;&#39; 1.txt | sort | uniq -c | sort  </code></pre></div></figure><ol start="99"><li>生成签名私钥和证书</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 生成签名私钥和证书   
  
read -p &quot;请输入存放证书的目录:&quot; dir  
if [ ! -d $dir ];then  
  echo &quot;该目录不存在&quot;  
  exit  
fi  
read -p &quot;请输入密钥名称:&quot; name  
# 使用 openssl 生成私钥  
openssl genrsa -out $&#123;dir&#125;&#x2F;$&#123;name&#125;.key  
# 使用 openssl 生成证书 #subj 选项可以在生成证书时,非交互自动填写 Common Name 信息  
openssl req -new -x509 -key $&#123;dir&#125;&#x2F;$&#123;name&#125;.key -subj &quot;&#x2F;CN&#x3D;common&quot; -out $&#123;dir&#125;&#x2F;$&#123;name&#125;.crt  </code></pre></div></figure><ol start="100"><li>使用 awk 编写的 wc 程序</li></ol><figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash" data-start="1"><code class="language-bash">#!&#x2F;bin&#x2F;bash  
  
# 使用 awk 编写的 wc 程序   
  
# 自定义变量 chars 变量存储字符个数,自定义变量 words 变量存储单词个数  
# awk 内置变量 NR 存储行数  
# length()为 awk 内置函数,用来统计每行的字符数量,因为每行都会有一个隐藏的$,所以每次统计后都+1  
# wc 程序会把文件结尾符$也统计在内,可以使用 cat ‐A 文件名,查看该隐藏字符  
awk &#39;&#123;chars+&#x3D;length($0)+1;words+&#x3D;NF&#125; END&#123;print NR,words,chars&#125;&#39; $1</code></pre></div></figure><h2 id="参考-致谢">参考&amp;致谢</h2><ul><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.jb51.net/article/48686.htm">bash shell命令行选项与修传入参数处理_linux shell</a></li><li><a href="blog.csdn.net/yugemengjing/article/details/82469785">100个实用的经典 Linux Shell 脚本案例参考</a></li></ul><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><script src="https://fastly.jsdelivr.net/npm/d3@7"></script><script src="https://fastly.jsdelivr.net/npm/markmap-view@0.18.10"></script><script src="https://fastly.jsdelivr.net/npm/markmap-toolbar@0.18.10"></script><link rel="stylesheet" href="/css/markmap.css"><script src="/js/markmap.js"></script></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">作者: </i></span><span class="reprint-info"><a href="https://blog.17lai.site" rel="external nofollow noreferrer">夜法之书</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接: </i></span><span class="reprint-info"><a href="https://blog.17lai.site/posts/43780ce1/">https://blog.17lai.site/posts/43780ce1/</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明: </i></span><span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.17lai.site" target="_blank">夜法之书</a> !</span></div></div><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/linux/"><span class="chip bg-color">linux</span> </a><a href="/tags/shell/"><span class="chip bg-color">shell</span> </a><a href="/tags/bash/"><span class="chip bg-color">bash</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,qq,qzone,wechat,weibo,douban" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div></div></div></div><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close" href="javascript:;" rel="external nofollow noreferrer" aria-label="打赏作者"><i class="fa fa-times-circle"></i></a><p class="reward-title">码字辛苦，打赏作者！</p><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="/medias_webp/reward/alipay.webp" width="511" height="511" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload loading="lazy" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="/medias_webp/reward/wechat.webp" width="595" height="580" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload loading="lazy" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><div class="webpush-dingyue" style="margin:10px 0;text-align:center"><div id="webpushr-subscription-button" data-size="small" data-button-text="订阅博文" data-subscriber-count-text="个用户已订阅" data-background-color="#6295d0"></div></div></div></div><article id="comments" lazyload><div class="card waline-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div class="center hvcenter" id="loading_data"><i class="fas fa-spinner fa-pulse"></i> <span>数据加载中 ...</span></div><div id="waline" class="card-content" style="display:grid"></div></div><div id="to_comment" data-umami-event-commentbtn="comment btn click" class="comment-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="javascript:;" rel="external nofollow noreferrer" title="直达评论"><i class="fas fa-comments"></i></a></div></article><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i>&nbsp;上一篇</div><div class="card"><a href="/posts/ec34b111/"><div class="card-image card-image-V"><div class="box-content"><p class="title">阅读全文</p><span class="post" style="width:180px">人格类型分类总结归纳</span></div><img src="/medias_webp/cover/renxing.webp" width="634" height="474" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload class="responsive-img" alt="人格类型分类总结归纳"> <span class="card-title title-V">人格类型分类总结归纳</span></div></a><div class="card-content article-content"><div class="summary block-with-text">本文介绍了什么是人格特质，怎么分类，并介绍了主流分析方法。后面着重介绍了敏感型人格和内向人格的优势，最后介绍了人格缺陷的一些分类和特点。与人打交道，这些了解不可或缺</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2024-02-18 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E7%A4%BE%E4%BC%9A%E8%A7%82%E5%AF%9F/" class="post-category">社会观察</a></span></div></div><div class="card-action article-tags"><a href="/tags/%E7%A4%BE%E4%BC%9A%E8%A7%82%E5%AF%9F/"><span class="chip bg-color">社会观察</span> </a><a href="/tags/%E4%BA%BA%E6%80%A7/"><span class="chip bg-color">人性</span> </a><a href="/tags/%E4%BA%BA%E6%A0%BC%E5%88%86%E6%9E%90/"><span class="chip bg-color">人格分析</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/posts/9806d7f1/"><div class="card-image card-image-V"><div class="box-content"><p class="title">阅读全文</p><span class="post" style="width:180px">从零开始玩PT-入门到精通</span></div><img src="/medias_webp/cover/pt.webp" width="864" height="501" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload class="responsive-img" alt="从零开始玩PT-入门到精通"> <span class="card-title title-V">从零开始玩PT-入门到精通</span></div></a><div class="card-content article-content"><div class="summary block-with-text">PT圈是一个私密的，非公开的资源共享圈子！在这里，你几乎可以找到所有的你想到的以及想不到的网络公开资源，这个圈子也有很多独特的规矩，只有遵循这些特定规矩才能利用好这个特有渠道</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2023-08-22 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/nas/" class="post-category">nas</a></span></div></div><div class="card-action article-tags"><a href="/tags/bt/"><span class="chip bg-color">bt</span> </a><a href="/tags/pt/"><span class="chip bg-color">pt</span> </a><a href="/tags/nas/"><span class="chip bg-color">nas</span></a></div></div></div></div></article></div></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div id="aside-container" style="display:flex;flex-direction:column"><div class="toc-widget card"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div></div><div id="floating-toc-btn" data-umami-event-tocbtn="toc btn click" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color" href="javascript:;" rel="external nofollow noreferrer" title="显示/隐藏目录"><i class="fas fa-list-ul"></i></a></div></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2020-2025</span> <a href="/about" target="_blank">夜法之书</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" rel="external nofollow noreferrer" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" rel="external nofollow noreferrer" target="_blank">Matery</a> <span id="translate">|&nbsp;繁/简：</span><a id="translateLink" role="button" aria-label="切换简繁体">繁</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">900.5k</span> <span id="busuanzi_container_site_pv" style="display:none">&nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp; <span id="busuanzi_value_site_pv" class="white-color"></span><i id="busuanzi_loading_icon_site_pv" class="fas fa-sync fa-spin"></i> </span><span id="busuanzi_container_site_uv" style="display:none">&nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp; <span id="busuanzi_value_site_uv" class="white-color"></span><i id="busuanzi_loading_icon_site_uv" class="fas fa-sync fa-spin"></i></span><br><span id="sitetime">Loading ...</span><script>var calcSiteTime=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),a=e.getHours(),r=e.getMinutes(),s=e.getSeconds(),o=Date.UTC("2020","6","28","0","0","0"),g=Date.UTC(t,n,i,a,r,s)-o,d=Math.floor(g/31536e6),m=Math.floor(g/864e5-365*d);if("2020"===String(t)){document.getElementById("year").innerHTML=t;var l="This site has been running for "+m+" days";l="本站已运行 "+m+" 天",document.getElementById("sitetime").innerHTML=l}else{document.getElementById("year").innerHTML="2020 - "+t;var c="This site has been running for "+d+" years and "+m+" days";c="本站已运行 "+d+" 年 "+m+" 天",document.getElementById("sitetime").innerHTML=c}};calcSiteTime()</script><br></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/appotry" rel="external nofollow noreferrer" class="tooltipped" target="_blank" aria-label="访问我的GitHub" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github fa-fw"></i> </a><a href="https://hub.docker.com/u/bloodstar" rel="external nofollow noreferrer" class="tooltipped" target="_blank" aria-label="访问我的DockerHub" data-tooltip="访问我的DockerHub" data-position="top" data-delay="50"><i class="fab fa-docker fa-fw"></i> </a><a href="mailto:admin@17lai.fun" rel="external nofollow noreferrer" class="tooltipped" target="_blank" aria-label="邮件联系我" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open fa-fw"></i> </a><a href="/atom.xml" class="tooltipped" target="_blank" aria-label="RSS 订阅" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss fa-fw"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header center"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <a class="close modal-close" href="javascript:;" rel="external nofollow noreferrer" title="关闭搜索"><span class="popup-btn-close" role="button"><i class="fas fa-times"></i></span></a></div><div class="center hvcenter" id="loading_search_data"><i class="fas fa-spinner fa-pulse"></i> <span>数据加载中 ...</span></div><div id="searchWrap" class="search-wrap" style="display:none"><div class="search-input-container"><input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div></div><div id="backTop" data-umami-event-backtop="backtop click" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#" title="回到顶部"><i class="fas fa-arrow-up"></i></a></div><script src="/js/ana.js?v=1.1.1" async></script><script type="module" async>import{commentCount}from"/libs/waline/comment.js?v=3.8.0";function upDateComment(){const e=commentCount({serverURL:"https://waline.17lai.site",path:"/posts/43780ce1/"});setTimeout(()=>e(),3e3);try{var n="waline_comments_count",t=document.getElementById(n);t?(t.style.display="inline-block",document.getElementById("waline_commentcount_loading_icon").style.display="none",console.log("[waline] Comment count updated successfully!")):console.log("[waline] Element with id '"+n+"' not found.")}catch(e){console.log("[waline-count][Error] err")}console.log("[waline]update comment count!")}function delayUpDateComment(){setTimeout((function(){upDateComment()}),3e3),console.log("[waline]delay update comment count!")}delayUpDateComment()</script><script>$(document).ready((function(){let e,n=$(".carousel"),c=!1;n.carousel({duration:Number("180"),fullWidth:!0,indicators:!0,onCycleTo(){var e;c||(e=this,setInterval(()=>{(e.pressed||e.dragged)&&r()},1e3),c=!0)}});let t=function(){e=setInterval((function(){n.carousel("next")}),8e3)};function r(){clearInterval(e),t()}t(),$("#prev-cover").click((function(){n.carousel("prev"),r()})),$("#next-cover").click((function(){n.carousel("next"),r()}))}))</script><script type="text/javascript">function handleSearchClick(){document.getElementById("searchModal");var e=document.getElementById("searchInput"),t=document.getElementById("searchResult");e.value="",t.innerHTML="",downXmlData("https://cfblog.17lai.site/search.xml").then(n=>{searchFunc(n,e,t)}).catch(e=>{console.error("Error downloading XML data:",e)})}var downXmlData=function(e){"use strict";return new Promise((t,n)=>{$.ajax({url:e,dataType:"xml",success:function(e){console.log("SUCCESS 下载玩搜索数据库文件"),document.getElementById("loading_search_data").style.display="none",document.getElementById("searchWrap").style.display="inline",document.getElementById("searchInput").focus(),t(e)},error:function(e,t,r){n(r)}})})},searchFunc=function(e,t,n){"use strict";var r=$("entry",e).map((function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}})).get();t.addEventListener("input",(function(){var e='<ul class="search-result-list">';if(n.innerHTML="",!(this.value.trim().length<=0)){var t=this.value.trim().toLowerCase().split(/[\s\-]+/),a=[];r.forEach((function(e){var n=!0,r=e.title.trim().toLowerCase(),c=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),l=e.url;l=0===l.indexOf("/")?e.url:"/"+l;var s=-1,i=-1,o=[];""!==r&&""!==c&&t.forEach((function(e){s=r.indexOf(e),i=c.indexOf(e),s<0&&i<0?n=!1:(i<0&&(i=0),o.push(i))})),n&&a.push({title:e.title,content:e.content,url:e.url,first_occurs:o})}));var c=a.length;a.forEach((function(n,r){var a=n.title;t.forEach((function(e){var t=new RegExp(e,"gi");a=a.replace(t,'<em class="search-keyword">'+e+"</em>")})),e+="<li><a href='"+n.url+"' class='search-result-title'>"+(r+1)+"/"+c+" "+a+"</a>";var l=n.content.trim().replace(/<[^>]+>/g,""),s=[];n.first_occurs.forEach((function(e,n){if(e>=0){var r=e-20,a=e+80;r<0&&(r=0),0===r&&(a=100),a>l.length&&(a=l.length);var c=l.substr(r,a),i=t[n],o=new RegExp(i,"gi");c=c.replace(o,'<em class="search-keyword">'+i+"</em>"),s.push('<p class="search-result">'+c+"...</p>")}})),e+=s.join(""),e+="</li>"})),e+="</ul>",n.innerHTML=e}}))}</script><script>$((function(){var e=M.Modal.init(document.getElementById("rewardModal"),{onOpenStart:function(){var e=document.querySelector(".reward-tabs .tabs");if(e&&!e.classList.contains("initialized")){M.Tabs.init(e,{swipeable:!1});e.classList.add("initialized")}}});$(".modal-trigger").click((function(t){t.preventDefault(),e.open()})),$(".modal-close").click((function(t){t.preventDefault(),e.close()}))}))</script><div class="waifu"><div class="waifu-tips"></div><canvas id="live2d" class="live2d"></canvas><div class="waifu-tool"><span class="fa fa-lg fa-home"></span> <span class="fa fa-lg fa-comment"></span> <span class="fa fa-lg fa-user-circle"></span> <span class="fa fa-lg fa-street-view"></span> <span class="fa fa-lg fa-camera-retro"></span> <span class="fa fa-lg fa-info-circle"></span> <span class="fa fa-lg fa-times-circle"></span></div></div><script src="/libs/materialize/materialize.min.js?v=1.2.2"></script><script src="/libs/masonry/masonry.pkgd.min.js?v=4.2.2"></script><script src="/libs/aos/aos.min.js?v=2.3.4"></script><script src="/js/events.js?v=1.0.0"></script><script src="/js/plugins.js?v=1.1.3"></script><script>document.addEventListener("DOMContentLoaded",()=>Matery.plugins.githubCardsLoader.init()),document.addEventListener("pjax:complete",()=>Matery.plugins.githubCardsLoader.init())</script><script src="/libs/typed/typed.umd.js?v=2.1.0"></script><script>jQuery(document).ready((function(){Matery.plugins.postTyped()}))</script><script>jQuery(document).ready((function(){Matery.plugins.subTitleTyped()}))</script><script type="text/javascript">inPageScroll()</script><script>var tocSchemaStorageKey=window.location.pathname.replace(/\/$/,"")+"/toc";Matery.utils.getLS(tocSchemaStorageKey)||Matery.utils.setLS(tocSchemaStorageKey,"show")</script><script src="/libs/tocbot/tocbot.min.js?v=4.36.4"></script><script>$((function(){if(windowWidth<800)return!0;document.documentElement;var e=jQuery("#toc-aside .toc-widget");if(0===e.length||!window.tocbot)return;var t=jQuery("#headNav").height()+10,o=window.location.pathname.replace(/\/$/,"")+"/toc",s=Matery.utils.getLS(o);let l=$("#toc-aside"),n=$("#main-content");function i(e){return"show"===s?(console.log("Current page toc: show"),!0):"hide"===s?(console.log("Current page toc: hide"),!1):void console.log("Current page toc: unknow, use default")}var a=e[0].getElementsByClassName("is-active-li");e[0].getElementsByClassName("toc-title");function r(){tocbot.init({tocSelector:"#toc-content",contentSelector:"#articleContent",headingsOffset:-t,scrollSmoothOffset:-t,collapseDepth:Number("0"),scrollSmooth:!0,headingSelector:"h1,h2,h3,h4,h5,h6"}),e.find(".toc-list-item").length>0&&e.css("visibility","visible")}window.onscroll=()=>{e.length>0&&(a.length>0&&a[0].offsetTop>e[0].offsetHeight&&(e[0].scrollTop=a[0].offsetTop-e[0].offsetHeight/2),a.length>0&&e[0].offsetHeight>a[0].offsetHeight&&(e[0].scrollTop=0),a.length>0&&a[0].offsetTop>e[0].offsetHeight&&(e[0].scrollTop=a[0].offsetTop-e[0].offsetHeight/2))},Matery.utils.getLS(o),("show"===s?(console.log("Current page toc: show"),l.addClass("expanded").show(),n.addClass("l9"),1):"hide"===s?(console.log("Current page toc: hide"),l.removeClass("expanded").hide(),n.removeClass("l9"),0):void console.log("Current page toc: unknow, use default"))&&r();let c=parseInt(.75*$(window).height()-64),d=$("#aside-container");$(window).scroll((function(){$(window).scrollTop()>c?d.addClass("toc-fixed"):d.removeClass("toc-fixed")})),fixPostCardWidth("artDetail","prenext-posts"),$("#floating-toc-btn .btn-floating").click((function(){l.hasClass("expanded")?(l.removeClass("expanded").hide(),n.removeClass("l9"),i(Matery.utils.getLS(o))||tocbot.destroy(),Matery.utils.setLS(o,"hide")):(i(Matery.utils.getLS(o))||r(),Matery.utils.setLS(o,"show"),l.addClass("expanded").show(),n.addClass("l9")),fixPostCardWidth("artDetail","prenext-posts"),AOS.refresh(),progressBarInit()}))}))</script><script>$("#articleContent").on("copy",(function(e){if(void 0!==window.getSelection){var n=window.getSelection();if(!((""+n).length<Number.parseInt("120"))){var t=document.getElementsByTagName("body")[0],o=document.createElement("div");o.style.position="absolute",o.style.left="-99999px",t.appendChild(o),o.appendChild(n.getRangeAt(0).cloneContents()),"PRE"!==n.getRangeAt(0).commonAncestorContainer.nodeName&&"CODE"!==n.getRangeAt(0).commonAncestorContainer.nodeName||(o.innerHTML="<pre>"+o.innerHTML+"</pre>");var i=document.location.href;o.innerHTML+='<br />来源: 夜法之书<br />作者: 夜法之书<br />文章链接: <a href="'+i+'">'+i+"</a><br />本文章著作权归作者所有，任何形式的转载都请注明出处。",n.selectAllChildren(o),window.setTimeout((function(){t.removeChild(o)}),200)}}}))</script><script>function navToReprintStatement(){$("html, body").animate({scrollTop:$("#reprint-statement").offset().top-80},800)}document.addEventListener("copy",(function(t){M.toast({html:'<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>'})}))</script><script>Matery.plugins.imgLazyload()</script><script src="/libs/scrollprogress/scrollProgress.min.js?v=3.0.2"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js?v=1.10.0" defer importance="low"></script><script>Matery.plugins.languageToggle()</script><script type="text/javascript">localStorage.getItem("viewCount")?(localStorage.viewCount=Number(localStorage.viewCount)+1,console.log("[Matery]Welcome to visited again!")):(localStorage.setItem("viewCount","1"),console.log("[Matery]Welcome! New Reader!"))</script><script type="text/javascript">var themeStorage=window.localStorage;window.localStorage?(console.log("设定waline count title"),themeStorage.setItem("title","夜法之书")):console.log("浏览器不支持localstorage")</script><script type="text/javascript">if(windowWidth>minFunWidth&&Number(localStorage.viewCount)>2)try{$.ajax({url:"/libs/jquery/jquery-ui.min.js?v=1.14.0",dataType:"script",cache:!0,success:function(){$.ajax({url:"/libs/live2d/waifu-tips.js",dataType:"script",cache:!0,success:function(){$.ajax({url:"/libs/live2d/live2d.js",dataType:"script",cache:!0,success:function(){live2d_settings.modelId=2,live2d_settings.modelTexturesId=17,live2d_settings.modelStorage=!0,live2d_settings.canCloseLive2d=!0,live2d_settings.canTurnToHomePage=!1,live2d_settings.waifuDraggable="axis-x",live2d_settings.waifuDraggableRevert=!0,initModel("/libs/live2d/waifu-tips.json?v=1.0.1")}})}})}})}catch(e){console.log("[Live2d][Error] JQuery is not defined.")}</script><script src="/libs/tag-common/index.js" async></script><script type="module">import{init,commentCount}from"/libs/waline/waline.min.js?v=3.8.0";const locale={lang:"zh-cn",nick:"🧊 昵称",nickError:"昵称不能少于3个字符",mail:"📧 邮箱",mailError:"请填写正确的邮件地址",link:"🔗 网址",optional:"可选",placeholder:"🤣一起来玩，留下你的足迹吧~。评论支持邮箱回复通知！📧\r\n 🚀支持注册登录，并支持weibo QQ Github 社交登录(⊙o⊙)！💖\r\n 💣请文明评论哦禁止恶意评论🈲\r\n ⚠️公开网络空间，请不要发表任何包含个人或其他人的隐私信息⛔",sofa:"🌌 来发评论吧~",submit:"发送留言",like:"喜欢",cancelLike:"取消喜欢",reply:"回复",cancelReply:"取消回复",comment:"评论",refresh:"刷新",more:"加载更多评论...",preview:"预览",emoji:"表情",uploadImage:"上传图片",seconds:"秒前",minutes:"分钟前",hours:"小时前",days:"天前",now:"刚刚",uploading:"正在上传",login:"登录",logout:"退出",admin:"博主",sticky:"置顶",word:"个字",wordHint:"评论字数应在 $0 到 $1 字之间！\n当前字数：$2",anonymous:"匿名",level0:"潜水",level1:"冒泡",level2:"吐槽",level3:"活跃",level4:"话痨",level5:"传说",gif:"表情包",gifSearchPlaceholder:"搜索表情包",profile:"个人资料",approved:"通过",waiting:"待审核",spam:"垃圾",unsticky:"取消置顶",oldest:"按倒序",latest:"按正序",hottest:"按热度",reactionTitle:"雁过留声！人过留名！",reaction0:"赞一个",reaction1:"踩一下",reaction2:"有点酷",reaction3:"看不懂",reaction4:"啥玩意",reaction5:"想睡觉"};function initWaline(){console.log("[WALINE]init waline"),init({el:"#waline",locale:locale,serverURL:"https://waline.17lai.site",path:"/posts/43780ce1/",avatar:"mp",emoji:["//fastly.jsdelivr.net/gh/walinejs/emojis@latest/weibo"],lang:"zh-CN",dark:'html[data-user-color-scheme="dark"]',login:"enable",wordLimit:"1000",pageSize:"10",highlighter:(e,n)=>(window.Prism.languages[n]||window.Prism.plugins.autoloader.loadLanguages(n),window.Prism.highlight(e,window.Prism.languages[n]||window.Prism.languages.text,n)),pageview:!1,comment:!0,reaction:["https://testingcf.jsdelivr.net/npm/@waline/emojis/tieba/tieba_agree.png","https://testingcf.jsdelivr.net/npm/@waline/emojis/tieba/tieba_look_down.png","https://testingcf.jsdelivr.net/npm/@waline/emojis/tieba/tieba_sunglasses.png","https://testingcf.jsdelivr.net/npm/@waline/emojis/tieba/tieba_pick_nose.png","https://testingcf.jsdelivr.net/npm/@waline/emojis/tieba/tieba_awkward.png","https://testingcf.jsdelivr.net/npm/@waline/emojis/tieba/tieba_sleep.png"],search:!1,imageUploader:!1,meta:["nick","mail","link"],recaptchaV3Key:"6LeUY0MiAAAAABNBvi6m4PcCtKkv_W6x-_YhTb6n",requiredMeta:["nick","mail"]}),document.getElementById("loading_data").style.display="none";{function e(){const e=commentCount({serverURL:"https://waline.17lai.site",path:"/posts/43780ce1/"});setTimeout(()=>e(),2e3);try{wa_ccc="waline_comments_count",document.getElementById(wa_ccc).style.display="inline-block"}catch(e){console.log("[waline-count][Error] err")}console.log("[waline]update comment count!")}function n(){setTimeout((function(){e()}),5e3),console.log("[waline]delay update comment count!")}try{var i=document.body.getElementsByClassName("wl-btn primary");void 0!==i[0]?(void 0!==window.addEventListener?i[0].addEventListener("click",n,!1):i[0].attachEvent("onclick",n),e()):console.log("[waline]没有登录waline!")}catch(e){console.error("An error occurred while handling the element:",e)}}AOS.refresh(),progressBarInit()}function loadWaline(){try{const e=document.createElement("link");e.rel="stylesheet",e.href="/libs/waline/waline.min.css?v=3.8.0",document.head.appendChild(e);import("/libs/waline/waline.min.js?v=3.8.0").then(()=>{initWaline()}).catch(e=>{console.error("Failed to load waline script:",e)})}catch(e){console.log("[SHARE][Error] Failed to load Waline:",e)}}var runningOnBrowser="undefined"!=typeof window,isBot=runningOnBrowser&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),supportsIntersectionObserver=runningOnBrowser&&"IntersectionObserver"in window;setTimeout((function(){if(!isBot&&supportsIntersectionObserver){var e=new IntersectionObserver((function(n){n[0].isIntersecting&&(loadWaline(),e.disconnect())}),{threshold:[0]});e.observe(document.getElementById("comments"))}else loadWaline()}),1)</script><script defer>AOS.refresh(),progressBarInit()</script><script>function loadShare(){try{jQuery.ajax({url:"/libs/share/js/social-share.min.js?v=1.0.16",dataType:"script",cache:!0,success:function(){}})}catch(e){console.log("[SHARE][Error] JQuery is not defined.")}}var runningOnBrowser="undefined"!=typeof window,isBot=runningOnBrowser&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),supportsIntersectionObserver=runningOnBrowser&&"IntersectionObserver"in window;setTimeout((function(){if(!isBot&&supportsIntersectionObserver){var e=new IntersectionObserver((function(n){n[0].isIntersecting&&(loadShare(),e.disconnect())}),{threshold:[0]});e.observe(document.getElementById("article-share"))}else loadShare()}),1)</script><script type="text/javascript" defer>progressBarInit()</script><script type="text/javascript" size="150" alpha="0.6" zindex="-1" src="/libs/background/ribbon.min.js" async></script><script defer src="/libs/prism/components/prism-core.min.js"></script><script defer src="/libs/prism/plugins/autoloader/prism-autoloader.min.js"></script><script defer src="/libs/prism/plugins/line-numbers/prism-line-numbers.min.js"></script><script>Matery.plugins.codeWidget()</script><script defer src="/libs/instantpage/instantpage.min.js" type="module" importance="low"></script><script src="/js/boot.js?v=1.0.0"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript><script src="/assets/mmedia/mmedia-loader.js"></script><script defer>if (localStorage.viewCount > 1) {
            (function (w, d, s, id) {
            if (typeof (w.webpushr) !== 'undefined' || isBot) return; 
            w.webpushr = w.webpushr || function () { (w.webpushr.q = w.webpushr.q || []).push(arguments) }; 
            var js, fjs = d.getElementsByTagName(s)[0]; 
            js = d.createElement(s); 
            js.id = id; 
            js.async = true; 
            js.src = "https://cdn.webpushr.com/app.min.js";
            fjs.parentNode.appendChild(js);
            }(window, document, 'script', 'webpushr-jssdk'));
            webpushr('setup', { 'key': 'BDHamjevXR9yPJrttxl80MjCYEwm3CKzwsi3rwMXxq4Lnbzhr2fNQARqXJVhfBn_ucmy9QHixa3qps8eEFXBwmw' });
        }</script></body></html>