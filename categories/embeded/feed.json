{
    "version": "https://jsonfeed.org/version/1",
    "title": "夜法之书 • All posts by \"embeded\" category",
    "description": "~软件驱动世界~个人独立技术博客，关于Linux,开源，Nas，Docker，嵌入式，理财，健身等主题！",
    "home_page_url": "https://blog.17lai.site",
    "items": [
        {
            "id": "https://blog.17lai.site/posts/798e6e62/",
            "url": "https://blog.17lai.site/posts/798e6e62/",
            "title": "ISP 数字图像处理 算法概述、工作原理、架构、处理流程",
            "date_published": "2022-03-24T13:13:38.000Z",
            "content_html": "<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"抱歉, 这个密码看着不太对, 请再试试.\" data-whm=\"抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"a760f2c3ce5706756c6dd8f8933677d91e12a568ea22a0345dd4f74909ea5d8a\">584d73a89d03fffb9e2dcb66cd3c11419bb7dc7ef1a51297c142b0f8c3c01b2d15f087ec1dc3c726740abbaf245c05002b9b64627007f9abc74bcf7d6d4ae220cd964fb0b4b1628104f57b8cf2aed83e7116ab6e8e3d7935521b90cc317e891043c146f9bc15777259e12c642559f07630b6b0f54efe29afb440c1221d4a71a90c0fbbbc116e1a4558b5806f157d4ca5155e365e35a1aa48169f6446308509ec6d09f121d446b4acb52760d12b053ff4d838f0b0e2b1949053eb81b575869729ce2114334fb984a048d9dbb85cc075b6666e86a9f499b59a1083ecc3b434ce2aa567b0639eaf1d5ae59fcfb5cad38ab90951bc5a85faf1909bb1c3afd30f1c86358bd9d2471a740ef6cd4216cca3e68f5a4d5d126a525f4ab0185eef20274af7b406e527978665d27f4bf13d8b0f8aca533537bad1e73f542f092d5f1e2bac186ed8dabb7107df4df00b611ba84bd0971c6d608b4d7b218a905aa9adf17a00c649955b76bc3ffe9df4bf885249b50f8583276ee3e8c43f3fe3a6a628128d3385990e30c346d43398a55db3aca44ef93de8341728a9193470b9f6669b2fda46f0585d5d994fde2fac12d92d6b226281602a4ec5cd5e325c0b26a000f01971cb4adc442dc8e73c16dbb10cde4683cb5c6e3611a8304fa60133eb24db81b30f032c7bda8be30683c4ba5e46b5ef4ae8751374374cf985c25cf74986fd319da0543d025d40a2ec3b16e63389fa477cfaef54c838811e11f6071d0af16a98cf06234cc8f2ef7b2f4a0fcd561f83932e56f34f6051701ef1ccef87b76620472c0664b51251433b7cc4aabc2a36ed1e163ff6dc85effc90cf2624f01d78f99317084830e444e52c2686ba2428f0f959a923438ff4173b050ddef026634619a7f0a5a8aa36cdaae5977ecaf4921bc729825eb8dd20fc4a1183a962d5f00e872b8ec1f589af19f081eecbb537ab4a3a34c8c2e112beeb37af3935c3dc28b85111b6840d7cac2c1d944c9c41ce82b87d006e4cb17b67db8c21f56feaa6fdaacdb0d5d2b783f006240d2cfd3d24224dbc563314bf68f0d72aea8bb80ca0d99e81e32649c7f5ee3e654edf193999e70be087b9d2d1800e72611138bbcf7d89e67b6130d62d5a1ec41e4b2a59f29eb7f5d0f9e9465d2cdd04a45c513231c73d2d0146c9f3403be4c653d2b02592080757cc8c9950cee7c958d4ae8fec016aef7b7c7a48825604f77d286b206e46f25f8a0ffa0a93d3c65f91dcb3be53a054f00e4aad3cca7e25d279ed14b76ebd1f6771f6009afa81039a82611f60a0dfe63aa0545c453402acd26cd0ba951c73c8d006ef1325a3a5f4104470ed376954ce61c3072287bb13170afe688bbe13641761c7cba8440c18d56b8d4e19bc43781d6a1af42d19e0a190d6432177bef416b73ccece090daebf884825056bc761c150ac8e0c04739d78d733e867b1e4ee31f5b72ad6c7144c068b214f205beb40b6fe003edcba59f0f4a49b59f75d6f8bc5a7e73c28876de4b0c1af7ed958cbc1fb1dbf8ee34e132ea7ab2b340b3c9d57a8d4908d855a5e9fdc6383149b5e4b47f593ed55b0fdac473bd19eea07af9b167b3132e06ce1154b51909d717806c2e5ffb0df5f831aed51c21f636b7c8ce854f0b5a03aeea6a0fdf3e80c87ccb6aa9a2d287308d04278127f1f905b4122fe00eb657512642b289f171003dacef294d845e1d336c5702b4ea510a8273a7bdee0e7ad8a44c42cb14675686fc6181bcda2f41649ddf56e9369bd32c0b3738f4ff718700893174c3422172874c86ae876cfe2b8582cf53cf5e1745692ff87624d99b124757c414541f8d06d820334b4c32bb753798abf4715d435faa1b93ee17e07add3769eaaa1b6c82f2b3d5c94c5b3c9ca625fd5c04b625c950761591d9162a5404a82614acc05ed3b1d6c34e85049f4a922968b5bafd6cd4d25c01c75fb02f6b6da3e03c6ff0013ad7d8cfe7e88b36ce7d2adcce306552e51e666ad3ce3c292fddea1424d2f7f8a8db987e064a3e17cb95cb620807fdd318739813a2dfff82863fcab550d1185f57dcd78135015714e2739a800304d2a1169be813c0da27683018ee50348cba9c0f00f023d310b8868ad59539a68c85481900a460e6790ad77e5bea0bbf9d92fd3c6351748cdb6d327962c7112903f76586117f7a6cd0ac24b4c97be22761a441fcb1dea0ce1c8f46c3c787da8d7a1a9625c5f352be40f7a9418d9018c4d39f5bfab01b0bcb592cef6cf25e1a8de7c06f2ab9f1b8a4032d3e21267f2d49bb473b8e1c5b3f8b7383a001292bd4ff020ecf271288ef6fb35a89e8eb006d6a657db49502410d7635319eb599f2fb512d791e19b49f147bd7e515a204eb98ae30c48ac990617155b91ca35ac748aa7ac0d11970cff9ef1b710a137ee4b51688b449682c942ec65e5b58f83ad3ea3f520b56d0ac43f69c2614ccc80238d8fa2ae888dc42a7324f00d69a38b99e5875d6efc636a471d1601aae660ba4595fec00432a6ed521bbaae4c086ea6d24630ae681a5a9708c3bb62d56ad0e1f15ef997107034ecbc6911c2a2e9d1f6a94aec4f92241d46e6b4579af958eed56bad50d99dbfddb7d8a1f1727c4f1f79f8fb3d43a554d6ef06fe41e0e4a089523e320fe11178f8a3f0b802e96df94135c7ca4aa104974704110b085dc02bd1b0dafdbd8a8efaefb789fd2fde3ba007dd0c4abba51366d2e9b644a4cfa2658a8f36208912fb0088dc7246e8954ec48310381be2a72cba5f25accdbd9ae6f544db62d82868086122b1c9a70ee9462448556d251272223e7d67f685418f41fc4bccd548b5957074bf72176650eac5fb5039ef0f6abab5eb357079021436351ebbd979fc90d0afefd388d29147a130b65234350f3c61a747cc51c8a8aab4b0274d2923bce98c4c3c0eb5b78aef282c089914865c11e5204b65d7ebce0b75c054d743c835712ad39777504b327718eccc3f151a94328b4db6fc69401a7efb3ea492bdba8606b0a7a761c353ab24a616e9e5f126741f05d9096c1b6a0f835dc1489b0541292175b11daecdd37f25c3c9f856157258888f1719c50ee31d6552176e0afc8629dc70d9677188d11563deb70f42be1de2c45cfa124f9e107eb8cf476c8b70b96a90b0fc3f77e876e52cfa62ce130962e6101391f91b7638edc1458bee8da150aca7b6b9eab220177cf8bbde38ae20304bb7bdaf09091534cd24167f26a426b57750fbd22c5d5d877327390eed0dce3cc5729d3b5e3c0d86c3e06860cc76ddd211211b0c15428efa5ab24d3440bdaa5c4e5cb92a2934db13a2aad38334d5bc111fab822da479820b266181f111fb401acf0b4e208246798dc58b0d9d32307b0512bd2370dd6a69ad499b2262f7e24408c5a8e1ba338fb0cf4ca836480cc2f28c46513e3dbc7bbd85540ff222742903215a573f1c506fdb9e2cc1169f452e1fcfa49749228a7c8450eb41fadb143fa10c90f84548f8f9fa82cb4baa26080588daab96724372692a3b78a65815591a3bd3014a9d3658bf61b66a4f611ba8e001d7f79f61eb20e106c9f6bcc2bd2f27a3f59d060fc077d2611335cc916c82b23983556caf28ddc6e1d9e2b81022fc2f6e5cf2622c8c6630a15455c1a1f450f1207ea64afe7972c5bdc83bcda0325babea938f776f68c00a2496445797fe28ff903983a7dd992bf07b68442633ecad37a306690c990bb8a7ea48d37de2d0dabd2cb7ef03321e1764412cc059daa2df8a764d1e257ef06ba5053b62980f0dfc5cb46a142ad963e16d7f431a37b649581c6886dde06c6f1ccb25968322df419466ac25781cf35d7c5b834b82d30d72cd18ed81c519f90b2b950fea81f5b70e058b2356a55d035c34fbff23a134d14b37c2f559b360c7e7cfaba844956024b4d4718df728e51772d40e2c31e5a794088e416d6c1e63afae6a6e2385931a8ab5fc423f6b9a96f97ab8a8d21154b95b99e84afc1cf0946360b42d59873e25121bf18d3e33acb3a5fe742af2631fa0b18c45e2302fdfc01c0d6ca52df8371eedd704258af5ceafbddf1127601b433f893e787fc3044eaf631fe220f715d64c0ab1a29bb11667223778b754db474371ddd80f1d24ddaefc639b5cc1ced23d3719db3676d69a4001fbb65b0e02ae948c5c3f1286d19de9a1b5b92a0a73eccf2490b01150de0e44acc6f2137d413ebc2cf9a5a219418a6e59af0dc8ee762cf4f4d368007f466647e1a92a050f458b587187c1e9aafdb2f0a0f5f031f9544cbd0799f6bc341eada8dde661b635852bec8ec983b720986b8c9a0f94b15d0ba0aa0455a7a5979d1280d9998dadc2b23e58f88d1e55ada21526806a91b8d72b05b408d70c15e064ebd5f59db3ea553d8c26b38be5fc5ec6eea7afd9eef042dc4eb6cc8fe956810bfebf3745162636f87cc5433676eddefc1db053267a4baceac089301703455f23c5db29f7516356e956bf6f710b24386aace5f0241dbea6f1cffbf75151cee00af9d06c81bb916d6dd3dea1acf1d5f309eca1d81975c435012b44b7df49e029f164e63b811bdd8bb5cb2c20c72720b53f156f069cc258c82834e680a1466da3faf6bec9b0f5bd64bc7d1210f854e7dcacfd0d4a99818a4f7893dbb35d5604f7b8ebc393a1ef288f748f75954687d8b057346e0e82ccb989a32cc24c330513e978a0e44b5565f9d33cebe4727b2208784499c1b4871a7ba69f4723010ab4a24d92d0e76fa9ea5a56cdf0d0abf08128229a8d5e8bd4220732db2390a69efc1513b1b89398387b0bbd97bc8641af787f1549745e7cab91fb8074862093498e1531922c1dbb6944c4d733963acc61733769129d03c879a0ac1f9686e0ba9f9158ce5970b388401147b640aec3b8c10aa7311f45497d6352971e15ab83777c5f2f976a479f5bf10d3fa6fa63d7c1be365ba20c438089525eeeaa96c0bb5906368df20773cbd84b8dddfe3fc04acb8ceacb2d3e834df14c1788509548808a1488bc3f834c7bda45412154c5aea934eb7119f2b493a87da056ad264c2ae241257a655d4353212e5a22159e706cf57c0b096433bc2d54a69156078b4373449c027cb4fada9c0c651c7b18dabec0e6744e40f566f3d876f68c3d1ec0e01cea2255f066bc5c47c869ee29c521ed96491c2328af60f1cbd04c2176067d15495430f2c1e6df2dddc67048f7457115e505183aa53078ec2fc9e83e664f98d8486fb746c4285ea1bc73055862b5bb3ade9a31f93de1f250ceccda9f357ef65084b54d00442f49365b2f618a12ed83d7497ae30c360cdf9b8075d172a7f83794957b6ad4bc4aea2e2296efef8595acb710a594b5ab37a768d84b7703bcddb1821228e1d7c7dcfa30859a2e81e6e8e4baa8c1224354a2e8525ec274a919bcbd9f95ad213d2c6e90205f4af0a8bf9b1e4cd77ece7c659d1690fb5eaae061a887d18fc7c4e6c76a73a339b75c6990c1713f7c1a0940434908ebc23a278e18957b7bf578dadf58a15cdb83788e8d255f118a1c869317d2461d49b3740099915112ad6389bbbf304d7890bdd4b9ddf7d31d5feebad2911010ac5de79e163ae93ad91403b3774eaa11cb9738bb417a947d50b5c426949679b9f27e93cb58bc235b11a7f37c754fd98029aebd612ba3191ceab61f340b580bec0b17452bd88e56063a51e39045f043540d1b45bd2b142b785f741a4e3c87ecb137a4787d7ee6498792636ae9ebf3bc731f9c18dd4533c6abcfaa216c9ae3357e947991cea60407cc38e5dc404f9b929c638bfc6f9361eb99ed8899a37708712b83782aa8c1514b5cf7345917b0696670e56df542349272857785303b5dccc2bfca7093fac4feffa0f57fd9a704e2b4b9cf70f8d656b5519dcf06e7c74e46c721a9f9c48efa42fc82ff522dfafad6593c4ce1d2484a5494098e0425c029ca97612330da5fa6bd4df34e2c1038d097fa18905b943e8fee2da75f2249c8407d6285d87019a577948a7ecbfe62fada38220544714b2ef9394e66d9fc0f096f3ed5346c9a36c143872819776bf2edf7cf71b5f7f822e19500894f51cebad04dae61bd183ce7105a166ed041ba93242fecd5947fc527d654b2b8e18ca7a58a94e1cf00c5c2426eb17245699fca5d9ddc0d7a476cc1a0e4191ec25fc6c409b26266a216cbc1cf84c497626b59e446aba23ce632fd917e2198f19a26fd7db8563a085a73d5112b29334ff7ac82f085f423cc9dc6978cc818a7224e450a353e443340e9d275e602e2c7b7a52f316fa41112a499136fc1c9e276e6b9f02b137fc554d759e8e7fb04b820de64944534f3a9dca9c299c3fcde67a2ec36e1157a471972a38491d84891915d53dfd2ba1d66c63b08e88c864683009dc2a2bad9e20e44ea58495da41c0ce61624eb9fe19b8f7b4efa75f9a4f652361adfec9817a4736ac71264f8fcbf6d23d75d3fc52f93af661d46c945aabb8382d40e38994c759aa2243499432bcc7b913c17187595346fcd3be1286f7c440abb31bf08ab3795bed5ea0915372029c1d1a38ef34251132490c34335e47ade9786396ae2ce178469bf8b0e67320e79f3d10a0a221bc26f8e66328abf8b72cb3d84363ab2cb0a52355515f810ac1ecc07754e954f3d5b726b203bf4cab4501b1e79168267ff3d118fd91c6159b3f9d2eab6098405c34af307dc7d822edb9e41d2a430eaf17299e43f24b436340d8107993eb50e1256c0d33769ccb43ecfef63abd5f88e10304befdbdd0f80271cef75a14919e203d4da2c2110e0f36a96314d3bf419c65552b63e7ee2a89f4b8c318f86f7e106da0209c022082f06883a7aab0d3598cf84318ae8efe4ac8a4230d77660b38286f48070ffa05c31636ce84758d24fcc3eb185414dd0ad603615e171441e9064aa5027a59fb8ed62c92adfe2750f89ee2a866359b1639da2598ca2b39aaec7eeec5c8af3248dbe6f65706f878be762ceb9b0a71d5d34cd75a138cd382afda7bfdc8b345a362654f9582de7798a518e0941e363672ee732117d58e48242644aba375e0762ff8a1307efcbed006c673adaf32a34a4fc181e44a0af1045a36134a9108c934f3708c772d0184c8e7a35061e7b7224d32d41160aeb73a3fcf877f12eba557bb5a97a05bd531379bcb31bdc5617f3366907d422091bd06910198d8292b11dc64e871b6aeb4ea6a89d36b01dcc391fc6e842234688d0c55506d4026d7a78447fa43e3e1861b76edbf979ceb70ca5bffaf74069ed69ad17968a2bae11653e277bdeca9d1778a941241ed6013efae739a25072c4710b3eda7ab749d696d9dbc06adcf0120b46fd6bde2ccf4b645aeb03167f6bf78efc0643bebe29e3bd668d74ba4d2a869b015b90720be1a490d81ba8f5bc8b1310de0926f6e562bc0f3321eeb20ca81738779eaca766caefc26f8b64602808dc36cd6b8b7ee214a1b12d9de2cc3989715e3fce4717b6934b903dbe3d9491d2b11282296c60276a945f390f80a035ce91b672a9b2b89fea92175ee9d650c22ea79806d4c600783bca75c8e1ec11bccf6ccc99be25b980fc40d4039eea1fea8cc9449e61d6bb5ef2880c7b9671da8e97db21f375bd5018db10f2f8169751f06f9e2540f85768cf46fadf7a04b5f569752a52165c816fbd90fdefa50044d6266d019005ef493cac75ef9949f0380cacf123d172564480f15276f8e738fa605cf2f412e7d910a3ba6fef481f9eb074b4f7aaed60dea018edbab798738a2a2a0277ae888b11bec85d1ee786ef2c41c701774d64a93176646fa115036832d534c5b0f6c1e006747672878317018d93db571a77b78f97d16e9e23576641d8c0c288b31bfbf8775fe53a9fbd64b1488315269ab5a337e65f362eaba3f840db87c06df562771d93df0a4fab748c633892d0baf934c4c5cc8a7ee9a31a27f8f7cd6ccecdffa78a605fade56751d490a1968a4975e424d24408d64637555f67b11fb570400533882b6de4d99820e4fbb44a5766b4c562c789a0735a0e52ea7e7f326e6a4bcf6ef73730ee8f56c214d82ec9165257ea4a00694a1f82eecb491060faf4dde7e3d0d6e501ee44f420cb14ab076d21a78f0fc9863f1b971b2fa072dce71ca2c60096a682e53f693aaeda5279e7eb318777c2ab6e791e8b238ea0b59f594610c67cb6a93dcd223024f819835550f431e771db20da01f8286d55df2827d1cc2e406567c66bfe141e46373d9caf472123f08c21785f55ef553c4392197e44e59ca111cd289210b49efca420e6e9b6bd7d13edffa353f539907c8fa2f08f8602bbf238c18d48b968641fd260ddd9164afdbcc8ea5b88ec11de57fdeb32ba1c6d4347a5337717e1751243aa9f319e7756dd040baa6cc73ba9dfe1ced6a4496690f4224419e07da3a1af584b0a3f77b722a26711910cac38aa6206807aedb110de54887d96e524a124cef7236e9f0338e2d1530ce7a4fd21fb67c9154975af4618aaa27357aae01dc584ec87d983cbd032d7e1025c38328725160bda494869d49e04721bf4cc7b7ab051fcb4168ebf0a857ca56da681bff09263de46d57edbd75fa9511377d5ade698df4b5c8ac52d873d29f556174ab9f4054e0b8c6a3f4cb49d0f142627ed49e4aab6054bbb2c71a75d506c6788e1ab09c601317ca431da5485b9ab23477dc43575feba36e89303f78c11949f735bbf054fcace3c3dcadffa82070e7bf7e837eaee213b0e29470bfd8ac2c4229f565c69fc1b1f25faa881ce43af0e8d4327b8e532ebbf5f7360c861a5b149ae0273e255de9cb1222fff22423ce27a092b862844993b1fcbc59062cb65a10d30470b82fae4d337a19a405b0ac2bfb17707f0ff9d2dabba99e02f4350618aa9525a0a3d88481d5ebb34ce03844d005706272f9623bcd824a6da757739331e1a6b44044049d74eb560c26f46ade91ee2d5a9ead8c33ad4293e694175bc99bb846c4b2a1ea6fafe0b8d8672a2dac975d84dc3ae852f373a384e990313806a78c9c2bb2d12217643013b8c0b6d9ab8ff9da4e92513e02a39ec794d7c31b7c1c327669a78deaa6dd2ea4f61174b80adf64cfa94650db73c02e9e9bc0fc29a24ac36f5cb2efee914b331640aa4013fed6ec7eb1dd169911d8dd70c2e1dd5e8949102539acf087b59c285741c9733d858dd995dde4148404c82a8fa213c4a7f41f57c27a159a2544aa7aaa69a81da11ecf66549c028cdcc277d18ea9208cbd5ff734daceeb553b21059de9470aa00a69360a2438e022c2165e1284c4d507d2275e6acb237defdb81b8c52d806779d3f666e6f55899ce023dfce7e4b916626171f403ae7ecb12b676fe69036b5c5dec4ed0988a0000c4d2a736caf3c196a0ea22a7254d3db790097660da49263a33ba4ec1f6af55aab9c2189bdeecfa53077d5d3bdea81111aeadcb95ce0ab6dd248ef35b16efa21f1bea7d6064bc433a12b70b99124714d94bd03fa9b0bb9561a3ac6346dee0cec1f2c482dc9d425962d3acbb9697b11d86696b00ee3f81ccbf404dcb229b51ad7ca5f28c9974030ced43dfc6ba77b146e44b71b29cd705423f2f96f233288ae7bc49e0a3fd9c1e3956ede4bdb11326d7ba0c7e1a0646582cd608f999befa33604007ecbe2f06bb76af79021e5cd9d76e8c5b7454c8844cbcfb2427351075c7808965debbde0d42fef9a6266092223d8a43593278888311cca26728e96ad45324cffbf2258f63b635a677553e40267cdf1dc383e0ee9ec7c2cf22fa38eaa3e26c84a213945e618c27c01427d1b92f7757c64058dd7791edc4bfc7db3a140a7ef1ffca0f07c9b70d72bdcc2f3a45b19fe3407ac58faa67c4cea90c4e980a6ae64faa82fd44342530577a8a012f998b9e072911c216a80b17a732e089c20ca32c0acfb9ccbfaab09b78987cab6024b0e81a2ac35077c9d0ba55cd8459500d9b6db1fc32d809d4fe1b3d5f77f3e06e93c12f5c0e76b68a09c3a663b750da6a120f06e7bc3753c87e550eb85a1d6204f77678d10605c22c0cd9e9bbb37e62839316e5ed2361f01106f878d116affad29f72bf56320bd9b72c7acff1a9cf47e28c41d3a719b615411c7f72af4e6130be45a6922ce2ff0cdcc9fdc7a9058862c642638bd9602e194d64cf99bb901b80e15c7da3b0383abad3db9c2aa700f825bc26a0b431a5f60dd7d572214514b27d10ff81bf3b524b7c9a2782240601f4295a765f958185ef9e58002228b292219d1bccf11eedd11374403e0c1c1ad7e46e30583e563ee0aa0ddc5c0e0e1bb2770b047aa5937e0289ab2b164e13bcd5cdbc2868d24333178d74a603aacbe569c3272bdef61cb92cccae36a6ccbcb3a04847c425aed51514f34c81011af2b7dac17088ff35974824c1812d3267b08aa7e673d3740e33c14ff3284245081a6ace0e181ada80b112bb1121cd3b29037135cf762444e8cb7e2d1a81f10e350e8836268ce98f2b888b5f06f3d365582cc1251d78e93602ec51360eccfa59dda5882fc86063e6d90189da532274e2562fb07a99aa88abf47ae2e277008557eb1e164e758f7bd4c251424d2e020c8ed15356e6143f60de03108dca1c14bd4e90de013e6f8ede48a76b005ad436eba34ce9ced3a34caa8ac3ea9772abeb459089e13f90c34e3c28d63ba4b416e4552595550645437063443cfd40ccc126bc0022c2228ed1cec815902581177a478b4144b13e039c0de7d576afde5fca04c9568634e1f5e8e6f8774d4e9e388056af54782efcc0a3b2e54fb01240f709eda0fcb2c014e9f02fdfdc117189feccbbc6ba8060cff7d5890c0f960d596ed6390362e38fe4beb94586ef95c14c271a43b6c5c9b6fb3845950cdf25602a20484302b0f0749147567185ccec267afb30127552a09268eacc389d638c5b9e60129137c5d4d3177b6d1c17f2a545eb5d2ea3b123afdde3a9f727fc9cc2a49232be04a76e7ed92fe89619aec8a33f7a15a3db956728e0ca04d7a7e39ecf88429de198ecc84740374dd38eeac11efb0d135cef3f310d1e41daa3fcca257aa84994d8d5491f8cad5de25fbad5bf2f12c187c707d6f45117ca2e725af27ed075d2617ee564b48235785fda96c6db669c70ded8f539ff651aba10fc6f20215fb76210c4ad5179993b80dc6bb2afb29eb2dca363ef94df2d36ab0d3f88ab4111b3ee0cb9e635c5b8d0529ea6b2ed4bf7972faf5083d134d39af98827cbe426d1210692354901f1a91efc13b818936a044760f45cae57f5bec3df488aa4df0b538fd60815f2e0c4249d11dd92f8fb7a7f87aded5f813507fac68eadf0354e993cfceedeb460dc6a7e1cfb389214ebb40bc424328e5d3a028d316ed6e20075807c4103121178ee5f5af113389b68ec0b059daeeb9220fa3d8a037708ca6844d5d99a9f38240e842a347cb7b3652bb2f54b4e2f26a277a24271275add356395fa0b2917c87c4f6b529590c4f6aaecfd59c076189704c366f85ff033c2b96ee0454c25a2ccd4ca2f058278cd08135657280c7bb2fb069ad1e8415ab490aa702d6fc0e050cb0d24708acffb172c743aa37dadd6813810aa1eaf138a122fd0f07e892cf414442134272124cdacedb70766ad376f492cb9d21ebc03906bc473ce182abcb7dade86f41e8afbfc9efc72dedf38da483e0421a6d68b68e11f5566e5f588750223333e3f2795795e2252bd35d72c0e573f9184e3624b8cd2b2aa4df70908a881bb5b95a65a7e210c8882815b1ab94c96f52a31f62f744e32c7ae165cf56696e982ee82c1b4a0d7c9900a5e52a54a84b52f0bea6fdcc977526909db3a748a6c0a56f57e10254bd432ad7fe6ab6389c8c4fecb1fd505969a8c231328cb37133fcc78610e91a6c8607b1359f1cb559f3dbfc25d18b7196a0d2b67c99dae9ae3f514fbd8fa16bd72ae78234145d725b5f8ee84f158cba2e32e64e816814c12dfee7ef48a7a68ff104e6ee01b8dbaf8d58ab3d95227eb7885be71127cbb26d2362908cfc855d64e64f23b7a92ba7ff21cb2a46d0d712c25e64e3a04e82543d27c907526203ebf2996e575f2c95f88c2cf36714eaca9f2f8b79936dda7f4cef6950f2adebf6357bb9b1b419f20cb50979fa965090ff9466264bf68fcaafb5217407168010c81badf4ef91005eb002a8a03fa96c710eaf9180afa07d8838f3c0bfecad6d4d5872b49a90b5a9e104233fa657ade6de84bafb1d489ece19e96fc3d800277d38e2a1b067df840efd93a8bb7fb7edb2e4ef5a44ce723fb8048b24d69f5a2e39a2713fb578c73b26b1ac7ef5de255cc24859cdec4c456ea48d5af7d22376b853e183b8e7b5d67a45a0325372d56e1f48722b4b3614134822c053aa78d8710de73eba90e889bdd8a88882263f0f44a62a85227c2d7a2c0aaf493ca14eb4a80f95a640f73a45f851858134bb134c344ec236f8da07755159bd28ad9be4589d4b0cf05d07a028485539266fcb555bb7ec4304aedaf56ce435eae8659795f78008bfbe4167cbf92a79296ab1c5b7552e98a260d933f738aae7caf54aa7ca87675f1347174db77b061b0243baf693215d4f12f832f32c9318778c9f25c86ce3497bc608f9b0342a188399c00c6c3d45a1c7a463e4d49f97bff5f17620082b722b520bafeeeacb5ba9e1f0d032091e1c68dd4af7180cce4d61a14c6534cba2d5aea18090f6ef591161a24030da5a621a023f7e1af8949d5532ab5dbba580e77c07d290b2b555d4dc1cd9009b803c3e70812df19fff366c3a0de09f29dbfc6f52df5239c266ba3103b28ee48d608c87498a7b5df02b0808607d45e8b39844b3285c9ea7bf8f14a71b402a51104893c4b014c0a4dbf07b39cce4775697ced1b2ec267d417be8fdcb3d5fb756e6a913de77b285d476f3b6175873340304eb467e40efb93dcb75a48a8a1ec0ddcc9d665e16aa2edd47c63b70ba808cb87facd307e24c151e6e9af4e9b546eb8e18016615f1b1adca082ceb5f5b181519788b70fe8e53c3a14a4cc9d038681ecfe217ee4d776e48b2aef3f605d215f9afcce4a02606f0fba7f5c5d6170dc2ac0006b6afd710b4043c3941871e50c0db7a385afd052ca075ed990d07304de0723674cb0dd6d5b498650e480696a8e16dfe6b2caddd7db04751a2eda1901dd78acd36806c8d78ab7a5061ba868e124d058491e5536be44b36bb85eaabb6692e8debcf2a60ea71500a3ebf723320c17c9858968586e77902d1042b70de6ded10f7d6f3357312bda86d23fd05f60d15b473a51609f190b538a414bbad92a44657acd5c59d947fd1bed633668356ec7eef9c1fdd85e9555268f209a64eea3db5a382928aa830f7043db42f9a123757f21321eb1ad6dcc58c3a26cf97e47220ea455f2210266dbc01212115b6bb3b95c2695ba053abd38e9cc08bcb0c8d1276b5a56cfd718199e5967c829e6e78b1467480891b4bc0096c4d62e0449a97c8de97101e960c1d38139b1afa824d08d04746ae998542ac69a648e4ed27c5a153d3f9957d1c6409216497f27453c3609fbe364220e59f64e7f279c07458ab458a5c7afff8e007cfe190f49a04db49d09133483b477bb826bd0682c3469d093654ea496dda52316a3198c7d273d190f05d79e09e8489c88c8d00759291f0588dad646476f47626e24ea3fe97acf594f06b2bc4ed4c3a5c6fbe36a351dd99aefea4e2c394b5728cc36253ffe288cbf2d86ff04f9974ce08ff39134d2040555079cdd7ef259e0e70950c2c6b9d6009a766bb36066fe647fce3ccb442c39a7dd4baf3248408038d633a8e9cbf4abfc5a73ca21645a6a0dff7e24577f895bf1e6c5fad4c8f6f44a25f05f0c78936c96993c39b375be9a1a02014af5657a884f32a00afb914d430453149d97b97072e55abbee7a8466dede00b9ad45d554f43808ac32b0e0c6f3cb56d97ed1a4f33998eac043107a7b559e80a3a1137cb470dfa544a9f3354e83e693b85d807190f5e62b2963268450c25885823e69c9c0a27b34a2c3fd741859b8792c728a277286ee648d4fab2c1240e785d82d6f75d690b069062385262b2f94feab96b0de77a5c7bbbf9b9ecec2479308044716a427dba1d62c6d885f39fe7debf5372f1f7fb07f890ca0896bb26acc3d3e6776c2aebf24576dc21ceaf4d3d35fa038f597f9b4ccebf7005e9f10ff9ccd0c8dccdd78b0335c47d46d45c40dd53573db43c614fed7172c7b25e4f1b45ed651edec4b8335a0e8a009cafff3b514bd7a762961af70f76b2e07bdb9c133a2b4b5868e85e34b652b184e581f43bc9162972d1ec4a62a30bd0f12b46adf7aed074397f7559f131e429d8994b2b3663e0e336e6a9ee2b0e2f7b59d89d972170aecb64e87e232f064196b553820c6625ae2ababecbf1716fae0c08a59ee0ca02810bf9648def4eb64421d86b04ce2615c756a9ee88161ef63b1fb75aa7eabf1211bfb09085c3255a0dcf3ff688d5a489e4ebc620ceceeee8dd67d4d9c60501d8315d86afb1a82479824b06e617f17967a82419ebba169347fc11a42fd0a7218fbd62df1ef61d11528811a1809af9166416afa22f0494de7f4666f06fa3d8264480a32359ba985c7852164a477d692fb7172b6a06a309e9d1bf7c226c25ac5f181d34460c841804a472665ff5b971748659b4f80ec14eccd25dc871d0390e2dc37e0f437a6f0219129f34238dbc9b61c671976f235881afa3480c0a71de583d6df538a4e0c04bfaa8c57e8fc5b4f6f0589179fdf1eb190ab32bbe8999f5f8b6c005ed53656d3c4aad1a4ab5c0b9f3cb3043966118fb0b4e00bb3862b4c2eeffe544fff921b90670aa456f2803923e2ca8f4937e79b2276f9209432cc9082df94e6324937501806a6bd9045d98eb6ac0be6e8a37a1aa51c8fc89bcfec0d66392d76782dcd4e4fcfa6f2c53e0dfc24dcaa94e1e0b20c297e6d2e4c7a0718e92c74edf2f45ace1ee20673306ff15cbe3ebe66f1b3d102df0a7533da3b61a8a8b53f58005999f3a2f6b0113028f1b305238385ba064817c3c7d2e48588eacd1027c800c935ecd481ec42f2c61f912dbfaf6c83ddd87242a38125634e09e99e87602645a5aec01b03e139f7fa17b224b0c985e72ec1387b8ed90eb201a19249c66f9fe5dd67e88b885018479e89a17127507bc15537430e7e0f63d013c55520777da0b76c16421cd4b52dc997d95d9bd5ab56a2f9f5510a634e73ce45963aac57d5936ad4bf1bd57473b2481d4c53b3df43f9bce99dda671485d09c3ac53ec5e3c1bb7acb0b914e0f3cac4429ce409f20f4901b99b605c97f05110b8f80db236d2f89d2ec3a0e27accf59b555dd0db5d88b314ea8f469fc3470a0e6569fb2d2bc56bf8bf11cd2a9aa324b2cdbc8887278ab233fa2fcfc543b02e2a4056b61097b0023d829e9c09ba16c9f57a2595b2f2013e5a6db39985752c06787b46173f79dd69a78bcc121f485608bbb9feb29a9a1093d2208c201ab6ace5e856b1b6a1f10b941e39c1b4f6fe2f01f81313d4f078f0e12d84ebefea24f976e0d492293eb8e7c437f4375f190c7b129c8298fbf674c1a274ccf70043c30d61c5ff3f15d2e231b2129814c92309274c596f1a224eea36693658e0dd5ba074c1a810e87c663fc120c0def259cb647168d54f5ba79ebb7ead5466079f4c12035cddf3dca8688b5d7ff17fdc77ff77301745d79d98d2834659d2fb689d0599e0d587f1b950d6e364c23d5153d667d17cd2d9b7a2e71875cd5b33764d046466374b0e7d6fac25c7934e6d0a711972b60eba4cbad01e4ba29251664faff86527ce45f0ef7b5d49cf9b974c5f6b594c021e9ea143a14398f3755cf4868d89effec0a8d48e177a9b666307f47504a1d8d13c017199360af23aeb519a43290626902762a10b184bbaff2995b811b3c0b3e59c10ecce0846c2ce3634d78a0401f1713f2a8aed1caa81dc774da5db3c63a9932c2ba72ba65d885cd3a0c0f7ad3115747c83a1abeba1da8111f7667666a9c7d15d599c6c95c6b94276fe4d1a4fe47ef8c0737b749c85317288c616bc4f4f8a16d9994878d216ea6259f186eb89a8c0c8a97a9dd0caee0457cc78557b32ddfb2d835c801ba85a02031c5f6b330e51f65fc487e86cf47d5ee8b100244f0d124583174cfeb267e0cc11df9a19a5952bb95ebdfd1c56960a64ebdffe75b2f4497a030620bc1b4c1bc62feed2e80d93d370d8d8a877a599f8dd42aca58fa265d4d1e04619344e353979f20bfbf807291ff18b5d6fa853a5a08bf7b3f846c91459e6195c764f1e64e6cde46c30baa8e69c7a55fcec42e08cb1dd00bcb2b665bc0de15bd175608d4549b2389685f953864a03b9523e831265a55135b5fd3264c7695a9ea2a746597bd86c1bb600986b2cdc9659944d03fef33a326cfdcf1ebd0c02d0a5ac599e84a84ea0c4e3d3fdbea0bd190dc90f3f1aca9dcbc1cb1c02b472f87537d5d27ac85f87393f44644f75166144cb43b6883f8c92312dd4b0a2c0c9194d695d9270501ac654fa0cac82e5253c8e2b9bc4ce83065036451543cb65ddd143c31f94cfbd1f17b2b512f32b6a88d28822354af1cee51e3afb3b66c6c852c15a595776d87ea7354a4685d384c68bc956059d74875c5576f2e0886133d21506c151ce55d728c32ea75f894727cb7f33734f0e6dd36e2d3b3b355701094e3c45657f9360174bd966d49e9e130a2693f5993c2ded5ad17b942dfaa135d0086f7f7368e31ee7c193ea5ab9bd4929a38461c666d5e41a93ed31fc40f60097594b7968b57fd85e6ac845cd5617cfbd92a3d256561d384dc6f8c0a00a80a5b69fe67a953300078661745753987e1891f81adeed3a25438e9a2dacd4a6829abb8d14c88851d96f5138845a97aebdc8e5c28f0110c21193df73e634553ceb0148aced085361119e949637c47734e56cbe27109e9d14170dbd0e02deac47d9faf0262c1d874de22e0e54ce2606fea340c4b57f12a00e955cc466ea20db6b55ca674de8029fe823449ee6b551c4389dbed10862cd07900dbbf8c56de53425d504c7287cc4c3a9f56bd75118f7eb20f6b69cb0ba08c293d53f911fee78e299af0cf7243255fe54ea379c0cf512425f1d2b75ced2735f775a4b778fb2a6a7475448248073747dc49a5e9b87b1e2bdbc66ece3d45861bf14beec7b8a0289633915dfcddb1dd1369bf30636966679c670468339307a0941135b1b60a7dfd4ae10b63fbd24169ce62f2eceb022d00a801f52f37a9a44a89d9602f022cd49fcd6136c197f8ec8b659b9443cd3c01d8f37d04ac91469cfc8926a38badea74e12f680b863b06efac324220b65dc9666580aad154407cbf024f2657634b55b158ce42d8181a4bcb03b612d081dc25ed066b5371b12fb90366a6444f497c6eed31bf5cc75cbcc01e269edbf084b402735560aa3a56bb1334e5145fa9cf7a55deff69f55fa4a054ff9e3cee9b36e0786bf3f7341d274cfdace915ea2d4f8b2b95a28ec86aea73d06fe19d78eb6fbb17393232f4b63d85984f9b3a655387bce3a2f92a314ffd2c2c925177d9a0bb68313374ca27da99a813d2fa5d78a51ed46a8d6b471e313207de0c78582b3f9702dcc9072e1c3458c7ae707a8a062ffa2be1883ff1b6d44740cc824bc13a5847aac28cabb1e19ef961c615c37f5e3f734d5b255548ef04e15eba2468f68046f21b1112f1ee4a27c4592341ae7c31bf58fbf3d429faefeaa4f7d8f7d2d95418ba47ab39188a4da119e757036d2b24fba877f6eeb2b0eac14548dbaccdf622dd0c462330225c4234ab029dfa095312053581068a1d6ed908f96f6c0e1ea73f6fa8a318c994f2843df5bc493ef77782a64fcb5c46f4d17ad66656fd2638f3222bf83146dce90f658e5ddc6fad59e68d6837251d7ba3c303059dd1e996171067ea9b89bc21776d889e5da42f1e6e76ef66dfa51a14b9fab5b06b45338a24c43a92bc6608f4a0c322f87a9e6f891072db126c002c316d1df6104a653f78eb375b0ad1f461296a4c331a201c64330e39fa1eb7243391b17a2dcce28c377c08aff4076f37685543b41d0b4e61da4db2cd4140d2c20b47d2a19aa04f56c20c4a06696c295104fc9f97a10d1060603129e278b015ddc2c902c22075a2befee29269799feb132b9998038cd6f03167e51d389451ba07d8e3deaed365d75629e320eda88209c1577013a6e8f6f69b1fad29cbbb300119b014310fb340eaa858430ae770437ecb3ba3681f456ae7ed454c19099991fbc18364ad8b0fcc52d20b64acbd32bb85f5ccbc4780e1eaf52720bc30dafa9868c09f2aa6e50d0bf1762dcf581ee13e10e07b007d85369bb90ac46d46ef2377f2cfd9e0094a45663e951b587e545e3b377b3b5d81b1a0f4ef6364444937fef4bd153a7839e94090855b4066851dff73916718fd6c0b5686c73e207a3d6a719db8cf2dcfccf0a060b1daf0fa744157c485317bd42bd15305d24874e26b63be8947022cae90d837b9ede1538664e18ece2fc0616cc2a755fa6e09c6deb02388370c06236ae67cc05c497c25ee0d0e5d3208d65e6bf6c1e58ab16b8040fc1ee87f9748a3ce295c07658cb61062c800b2db900aed2b6ebe52422e3644bcf3d5af39fcff4dc33feccd2884227c60ab099e1f9004b5624a32d234fde68d78bafceb471133fc452676ce2685628a8ac41a85742c5ce169581274163d4497cf397d8bbf032cd4c1781d50c04f99371481cd3f96e451303348802d5af93cb1864b8c6a62f44adcd7eea49a6451183e9dec33b57c7df55ce30f971bb3a7725f74c8b0d47d00dc17e8da3287dec4868b5c96e6f5930b9f8ee880f3a4261c319747ef1f107e2f38d4eb56ec649d9cd3819ef333dd9cc60b8a6b2619c1ea9dcfbd8d025b8c8fb732b2d2534285eeb461bb869a7b7d8a07c1f21024a768349f6fc0aaae41f8a3b9bd7133eee8c783d6786c4a2752e8ca784a8f2b2bfa110b304f1c5795b5ab2ad11891a344008e2b5fd6015afdd21d642df80b407e65b100f2f0663655b28cc0a85cbb859f0e38001d1872d361ae073ddf4f46be3fc101916dfb52db0fd40d81306ff2d24846e99297aa85abebc9c4901e94b8a5c46422ec027e9dc04463e2dbc720170a6ee012f484813f76054b615deedd792359304bc910ed673c9bb84dac75ab0a4905a0ae816e04d441a8eac863a003fbcf765d692bb9f18854a44eb3b889242014212b0baa413c40ee7078716417896bbf744acf1b6f20b64159da092c9f383a387abe3320f67b928d62659836f6e36d35a331c7ec399fd515212d00b70faea37045db4501f1765dd5101da887dfee74a00dac8a2a192026baac313b585780380e0470ad2b41464aec7110df4cd023efe16167bce506ff9e85bd86ea592e056d1879cfbf9d0b6c97ebc3646cc5f3bad3eb3f3f37d8fe50a1e729a751d532ff22fe6e973b63bb891ef91bf4f0f37dbd6328234a8a8df3481fed624ac31e361e31b558d880d24a5bc6762f10e448e4697e080cd97e1a2c5376f5d15555a96fa370bef841ac83072a2fa5f5a4fb11eb00834c249dcffe5e90fc262ab7ef927e429f321c8e6f9e21e347ba92bced71a2cece943639be8563e599e1abf5c2041c4accbb11d2bc121a1962b03103e86382ca8771b4975f09c8958788f3cebf3d880410656de637799205569fcc33edf814fa8e8fa86eeff533118031d5b082fa342cdc08d60d10bfd108b896116ad7d42834eb744a329efa5e233ba4554214b75d5ad7b0dc97a6b6fea52423444c98983e3e46459f1db40e9eb2759c568657ce7a465f822884457aa54feef064de43afe2ea35fb2a113b60e15c9cb604a545863919ea9e8da1593a34efc74502141bbf5add02ab810126f8e10c0e1f46dfee15460c505e673fd124a46ea5f8d806ff73094d80e6af9037227baadd93f8b33bc19d441caf98f70b61dbf389d450e4fbbe0ada62d14f6208713b2ef0e6da08d9af413857eb2b31ea883c6239dce2604641e620743e99b72d6480669e868e06796655335cf4d29df43852326ff0fed0fb904221248ecb3a613ce57d7303c6ed7cf525b8d95add48126dcf8b4d629a13794ed9542ae38d9c8b0406dd599e6fbdec9e2e6a327c98ae7ded518010a2216121bc182ffd55b77fd869fcf91266b9253025317d902d07bc95e9456a48a766aabc2c2b1e3f29b18621ed3b69c51703906c260ae7d247fdd29573b70c291d273c124eef1b146ec960ada019db488e4f9a85cb9cccfadcdeb835d3687ca4a4260a206ad1c554792c2ce7cf905953e6e7b0b4872eef064079b0464fb73e48006a83c81f4583e786384bf516c3eab62f88540cb9207f1cbacae7dd9b997d3b244ea2b6e8bc572e74395fb65a0c64b8131a9bc8d8ec5c672141e9adb809e139068f2f7cf4adc1aa8cae6d862180468618b31dcbfc596b1ae2afa3ae0fdf926a52b135a094b3e6c18ca60a1aebc036fc482bbeb7d2e019a3e7ab12da7282753335def112848bb37db2f524a65be7b50bdb4fd0dc63ae49b0399ad3f096fa227db9da13273c7a45bf60f86f43761b1691f3a2c99561a6faf1b726257f0519d77ec1f20a996d42809ca6d5cf1ef44ebd5550693bc766db4e4b5b8a9128b8c159e43ba497b994c994186ad17444722f178d20c587a1a440819df420ebba2c00000e011756f7673843f3c4cffae39fdda57fb8da1ffc0263e318fc870f59021fd535add1bbe673fac01677072e9e02c1abd6ef127dee73abed83205fffb82e4c106de959dc8146b7de214ec5f595ca026f5717bd955814317c71542dd6d0eb3322f11e067b151e59987140723e5d8ca0c0e5fab2e77a785fbff8163a3d9b86f648b4354f6c853e34d8198b05b83ac2057712e00d5c408b430dafca8cdb11d43c2164b83deb04102cba679b9fb17db9e546848242af40074a2fa8bb77089ef65b2881fe546b84fe380256daa9878373eeb866d72fef331561d372fbee3829d9a0df1860cf266c7f4507b5db8dc2233e328ebdb21fb66fb5829a25bc0a4eab9bb2ac0bea9b36633298762e2308948ab67f2fe853e70992149d600c33e1cd04c0aaa80c95843f0c920e770b845097ecb2939e00f1a3af5665adfde01dbd3eef5faeaf565b41cc9152453f11b621896f8a95bbc672cbd100388989dcb5827b982245361563db36aff0e573459e96108d4921e091ab6a0e80b3726b2fafeebad485ab8e9e4f35e361157122e4abda9fbeb16f9c49d1a71905e0eded5e36553ba935f3d65a077788b8751251075826cd4b69dbb8014843e6b4a8eedf07c9f42ec050ffdb672cb5a0b708df4ba91bfae08fe38d111e4554ace337999c92eb9f163b0a72ea0f98d08cb7709442ca4a26029fbb9ab6a5c2b710c838d4ef257e762c58014cd8947f0617e6578bd7069c431f97b8533b8069749281992b50c156745adc19007bcc42c9b1d8944d39b383554ae5a2914d88f149aba6b8d067a75422a3c39610fae98d45d4eda50ae4483940df872360bc06947890dc24814d2ee4bf074e224e76b033f74aa8e19c779fa9874ab48c99673f5f7391f2fd965120608079c1426cac641f58544e5f673905b1d09c16083925971e9d244153df9d6987def3138bbcf564ea6cd4ce84557b7226ab708d920843325b6c17bea972af3e2cd48ba6a54092c7547109c2c5564b4adf15149d5f8afbd00537aeaf306cd7178929570f53f2444ec6cd217f981fdaaa51234666ff09d5eb211f09f57133ff12cd6d84a0865603a8fe1db40ae27728b274811b3cffbb0a84fafb07d1b97dcaa31503091200ce21ff524aa0f332e31109ee2e4e0d08a4bfb57e0215107b88de1a1cfd4512f4486535b04348baa7570d8bce3afbbd6c3cd70ce9bef1fe0e2f0ac348076643d8243cd2dbaaff26949c19e3771565accabbde4c2cc8620fe112d1c523c807e317ab3eb1172ae1ae6518bc407f2cb815ec75c937f1f539379219d371aa83c3aa13e2a6aef342187eb80010821c9c7ec40e152b01b25b16689b21be537c3405c83f811d9ac0c89fabe987485134c426dec79ce7f32c3b46c5a73b39d97cff5b256ce15092d5badb0eba7a14e60025b9e37a6d28cb135c0a846681b70d4631407de9e6da2fe6c12954f5b83f5e872bb6c43d676ee9493cb483c74a206822fa5871fddb5a07055bd558447b2a441f2f7b1eec0127bc9f649780c157c071baeff55b191959375ec5b970071ebb2661d54b4e9c277c4555b992ccb5d082c78d352d62a6091864ccde49656f0ad13e732501291fddf69f819ef940ad8e4012144b4b235bae7ad8649089efe0e4401863c833dcf5d5528898a99c2c1419e5b9634f4ed5e7abea76909ff55d1839ff97a06973a19fc7f0a291005a048607a33fe483c57d4c8bba79caf236033f8b02c605bd3b5b7ab99bba6da205063ec4536392699e9a6ead00fb3c722082079a566276ca25ac7a4cf6bc7b712c9280f90ccdecad35f05830ae34b29837b4c869f0a811841a3ef0c88e29c65ac6ed44284c7b3cd79af8cd7ad49a94098bb785e259e4c609c2b0399938d553f68b4294d7b95d1da8957815f00c17aaba2a015823b314b4b2d56aedb5cb5cbf258b7907f9cfe849961590138108ed76e873c2709da8fe015c03a8e0f993664ce3b40b56f20f963a02f93f6fa8472b1553ad509db9d9a0063e7441f4b129b4262f1a0e980f36d1e236cb10d99f96a375d8871ffdc02470f91ad6c9fd14e482bd5985c12dfaa0a69b16251c5ce91fe240b86cfc9129eca2c3df10ac35451293060b08a9fb2e396883b72317b36a811825b9582a1ba85d9eec37852cb14ff8c128f017a986bd952e2abfb2305a694430d98d75154fd77ef53495442c94f533a689da127f59041af31b2610de70a6947748a38f14586e3aae91a1fc2709e8e32ab0c721f616f049b2e3baa37fe7d411cf769adb2d20feef704ac5eb441efbc3232023c7ebdc4a5255ab57c26d3eba66a41e6fc426abee396a6c5fe40462128e170ff7f1b458502c42b2102d9b4bf5c19477cd2f9fa2bb790d21786602cf421b391d5ce7b3e40abc0c52cff45121dbca648c7ab30fc651d3632797359cb779739c4fb6dfef70e35c8055160dccf05e806ac3da23b47c37f38b5c348074d7c96bbb0c6eeb75d6632f4558bad4c8d891120c8fef4d56af8d4f5262c59bc6808144eea20475735f4ed842d6d17cba3c754dd0e6eaffc0d481582f467ef35ba8cf518d06ff0b90dbe38a90b1227966d25b52ed722250ff3a24b5468c8f431c580f19f15b42658c6d621501ae60cb561ce6d1e8c3e8a175b1cf6cfd32bef434498c6907b777d18fc9af3b2d738d7e63b428e27e1b2c63932d01bd5fb2157a6f5646fd5f417fd084871cbc7f64f4f4a74a58eda07ea37fcc0adacbb03ca03672b09224c7c71a23ab09495934738a889233a91a36240771de5a3248f2b014ea31cfb7fe9c6fef321de712ebf653d838eb38a9c947724d1841766a31b25ddb5a300aab487cb259cdb81061a16c444a502fe7cf3f7c8c868075efac7c53728f698da22937148474be8ea2041effbb618ff245eae8a0a9a0f72af59ddffb697b39489c5f97f6a609d3fc38b44fd1acc93cd5eafc52a2e01df63dc8edb961a1ac48a1fe391f0a67b309e5ba6e687f8882d91c78236b4f66e4e5d4c3a5e516b1b5af4c12410554043f237d46d044fd6148ea3a250ff405bf13b963eaf81962ee2d98c1f15ca226025d0696a8c64e7ca02d461cd24083060ad302217be8d63e539212e0820bf805a6ac6e6031b413a42ccc3675756dae02bddce05ba314ca78b8d36a296417de7ad080845727c062cd1f3c04aae2c634c6b9b1d6d2a2def90a863260cdc9a960933edde9a37fc5b028ad48ff1596f527476496b4479df2dfb48a07d86b41bf8de7b08a9f24685ec18d5bd00898c02c56205415fe04c62b35e705ab78bc75110f92cf06fd4f33d7eed1987c7e5a58c038cdcf2b74ce929a6fde8d1ff88f6182858dce8a067c9d3cb38f2a22079f52a8cad71929f0c1db74ada0a04441f7b20864a4060ae0cf1241ede0a245b841a61214cc4fdaf0b06520c9fec1fcdc0ab1ce7feb92ed148f37d1c0f89e057a64798985f18934aa831622ff045b6e287d06dc76dba766d5fc205a03ef13a0cfccc6058c88df39789616bf1e6d265c80673b40cf6dded355d3a732f42ab280771ef0d8a98cca20375e5cd78f81e30ad42dafdcde49cd42ee6f35a80f03bf5b794cd876447f3d34339d9228005bb5c1c080505a0a12b04c0d35b2e4b2770b6eb1823d885e65fa71feb470940e678316e9896571bfd0a38d49b02aaf4a5a7a27fa4d16744617c0b901aa95c6a2239657c2ab20407b4a00de4537371d3c6b599b4592d0d8f682c5f8a6d788c852f72e85c2e0790c987d7b2ac1f7044974032f64c99c2f460381849f5d33c24ce89e1b86deb670c73e64a62d718f0499f42624cbf340d691761a453027a8c83dd5614261651347e2f9e823a5ccbc78cb1fb5416b6f1bc12f64701193419f5f10e9a9ecd47a5d6f71a2a238222257bb6864bfb15b6c46df266a77cce6728557246113ecd2585c7358e31a0efc8c51f2fac7d7497d1a111e7560b41b73bd01750264d11af129bf342cb417962edd11e7b3e48f9329955129e0bda5329cc0a088b4ddc3d886568fddfa457e3a5837c069b79d9e8d05b12412f1e7f24f306f12d1f363dc9662cf43a03d732423888a5daa717ad6b03a869481906f5764b4a766c87ca9c9dcc4bbeae80df1d81fe95ec5fe1a1f3629071891190ae543d61d103629d0a9759348b8b931a74c202156b02cac04f1d173b4e6dc8bff2fdca2e896d1973e5bd69d268139098fccb8b921061d4726933b51269d7561dcff568f26364c74e059d46f336926c18bf7ee9a2b13ee367f6c0aded60104844b3d368ec4f73ce999b0e480fde14b33ab5a92bf3c295b0792294167f6fcdc24370fe7e2cf6a68bd1739de96dfdfe8aac959b5d5ae57407c5bb0d4563a2928673450322aa93c3205ae98dd4201fd6cb135a1262fb8b6b5d222e9bc1056694b917f1c3c9968df741d32643a45420b8348b691d8f1f0ce7f451734a96f375332d9115f941d056ea6d1549b96cac70a76e12c7bb9c6c1c0734736852edec2d7e191a6892ccacb1b79f15ce26d86fcbd0ff286cf6e14ab2bfeb7d2e2e1002ffcf40eaa3242abc5a7b00a7c74660eb1ead4201156b8ec8e0ae90fb314e92111975cd7d1c12a5d846bd0e87b754158f31f54ff5a3ab9a2c6a723b0cb5ef7df94cc93a3755ab6a5e57791f58d614f74115eebf9e6733efea57b5eb3834a5afe7a0fd4c543b74a1f8d4bb2662b1e9107eed5ba95b10fd6e16eb99281b01488ca796f18bcc1fb268b0fdcdbd3ef32ba332af03bacbbba45888f526313e66c06b282fcd737cfe1ddc880dec3c2bfed46e9fdc203418cb74c6dd7f7f9a52a202c9d45d06f2dd9d0ad20154fad04246fe54c45bbb7d3f492e5a405f495cf9061fe46320da96cb928f5cfce984286afbdf3a3e41a8a682c745988e6e9d0feed652ffe89e431980b4a47c086b4509a46da77d023995492ca61439960698dde171c10eca967703e4d221b86a0e57fd3a70d6c3551b034d44ae006715433a8e8c5553bfa8cea58290e05da5a45f8ef86f43e8546e2edd57d633a5493ea12d0869ca863110551744b53828a6c26074ddf75faa136a14e0b0f9dd3232e70be8f45a69ba80d532a4feac6b063910bd18d39e86a5183cd185e4abfe6b75eb439e155a335481926d2abe707cd96f21d61889839dada3715bef0ff7a0456efdfce75b9e1b38c5b21cc9255250b58f3d1e28381f33f45d24b3c6ca722734939f9f97cdc445888f7eb9e7fa158a25e14aeaef5c1e202a70665fcbcf10e6b796190432d7c1568aabc227569979e69f51dd348aa60b7ab429c53ce541bfd75091bbee42a121d0a808754e3a613274481be923743b5d8017291405231547cfc22dcaf902c6cd04bfe52ad098dacc6a63172ad76fdd38b7787630535203aec77a30c73271c0bb24099e1aa253cbd725286db173e1566f5b262f03b916e2f1b457f9aae3a30089b1d95ada85aaa0b1452ff67ca9caeb102f46cc41a7af8467ac9bd75177271890f7018ff4ef0b19976e0f6f9f5d37faa825ab7b13920b22a6723778fa4b38f4070d93fe9980a7f6c2660e5d76faf2e187900c729e4806b5651bd4190031705da10412914483dd4d2548e2387373bec545e5c37f41659ff298cefe4e55a6eab017b898c0b6b4dd9ad0a4028dfadfb73323dd880db1dac9bdf8d73f950b8be0ae6d3bd70691d18714d9231a82e7782ee0ea3e76de43980ee025235ff1d84860c6cd001cc172bdd6158cc8ec99f09dbf8ecb13fca6a808409eaab87bdf8e5cfcab34a05fd66fcb803bbae81adf39f303987634631929b24505dd08b234f9eb73c0aa1abb09030e31164f7327a66a55eec369464bf13cf81dee863535b239591bdbb910821c26733c9033b27d92229e6424cbbff4f8eda487b2997f373612b846ac4b1c3053fc074d049fd8247453c1392356bb1e58154e36ca55489de04b6b6b6a992dcdc67d8ce686445ad3afc5eae78b0b74c0de5933f37e37302a2a0d9205d0a05f79720c2e6ac20888155e86e56efc55bb0ed9a041feae3c9a92234d4eba662da76d2bb72f65c1c10d896cedf2b907b458bac29ad195a68b4fccbea9d7b248f380da6bf66f204e6ee12f42a634d7e067d846f50c684c3b3566072f7b2a39bd5ebf2181001b43c493b39fa0c963e693f4f90f2d5eb87233930efa558e8f888aed7439221ef8a78a9778e8b438351c3700692afeb1f1a40ba9db8cac0f3a94fe9b8d3314f0cbd277268807df5cc9fb4ac7faf4978a3b05eb43efb1ed09e33fc41e4efb8fa0b7bf4c31b683781c99156f3493babf2ca9ea0a2be262908aa33fb1888eace468b9eefd1a5b66b21fb3091fc0f8e41531e45343b8edd794fc868ee3a38855cbf16b8cfcbc3a20b64da31766145302b9488155fc18ab39d10fe796f9988913bc3e4959b53ff298f5d29c6e7aa9764184b220fb87d353f4db81ea03a108f8cd58b69db5a8b99d9ffc2f1ba15909a10b5e90d7558ad80aa404aec49e6f19adfd056494b215d948aa8cd1a983ac35fab466a4be4c23d976a788b6fc90ee9eab2ef374481dda94a879ed8662646bfd41132de4732779119de96ca435a767ca65b9137bfcea53c5b1ee6339533e797d71a02da19877e0c0db33a8e2fc45416d0b0cb8a201c479d53eb69437bb6a1672a53aa6170342df7c18038ac4ed9dd7a5e0e7d811813ea29226a96f0ecb1e9cef04c0ea559c19458e15e6df69a728a49066337a0de65ca20c686adb2c64420957ed18fba754f31809d423cc550b377f5082003210d6cec6bbbd35573983ddc6d75d75966da2c916721772c26bf411bf3ce52a0380707bef667b088782295991ae10045f3bc2b8d950a43b2916107c1194340828beabb43e8127b65f5e03c2d0e45754f5f4107cb5eb7713d8b378383d6f1100cf2dad8d425cb2f5ab5533c0ff67baf685407b57e9c1432e0e9682ab7232e66834d2b73ce2eba90171738105b8b96d33a9808d84ae6c20b405894f4caf72e0072201b6a64e2a4832bf3fc8c51ccf430e0315222423844a3b0ac8f5e84ecef0570b5b3c40609a5bd494f15b33fedd54a99c0294f0a77c9a94dc9660354209ec6d2a9cf6a22d1928cac64b6f464983b95db274546f65a6dcf99161128ed2476b4b1931f5e3cfab531e30dbce833e699352469d1675928e7e2918f2b2a35c867f38979f317614280be093aea938302bfffddf064eeafdd597950bc0b76b4dcd2e166ebee5804ff7191e4d7d5ddc20574f301715f3266f682ba9daa20fe8f3e50ef79a44a591df59aaf8d6f1e02b604db7ba53e75ebafe219d98fba3a0f38d21dc1f37a8ec1645501c3bbe3ef9ea9cfd033c068c3fee9be97018530294fc632974f7db4cae38b9e1f84e4149648211051810b12250858ee177a4449510e0d3220279b3d1fd378f0d772ef18634f331c0fa58a95bda37c4aae0ad722c5a103cf72d17c669b8c88a3db1d6dfab1cb0ddce968c69b3b37aabc63e4bfcf7ff08020367adb8da515c9ee481b4472a79312285b7932b75478d19c1cf665b99c13dfae1f2969740bdc69af02caa46ccb85cabb79b42afba0f14e5b1d52314b9a2582f09dc301864adb95e1d4f49d6b1098181b4a9e27384dc6fbbaeaa9e8b6047e27b9cc1e07972953c2ad2f2de5cd37ad38198315775c78b1ebd688b1fe46d9e4e7acc48b0aa6160cfe130dbd6128dcbacf40a0a516786f454dd1b57e9b76a8127850e12de9a300a00a27c267fbfa1960c50713bf47f9db3a5bf30f60d8872ca09094067881cfb350604837ae23a8d29142d43712ca63cdf891776668d8a119a33e7cfe2f815134a49de8abcef82eb704674579353a952958d9e85bb190bacbae1ad30ab5057d3e38af171f81a98321a3d8269d5d2c1f06227c9dbec1f52e526a599fca9dde85e64c4ab595077e35c1cedac57c43a8793b9d02a1c68d0b52538533c50cc95bd69206596bee5f5f479d6191b0ef194b9db9ddec310d2ad9292127694a0b306d6e0dbda9c1325fe946d55d9843e9f0f00babcb0d30c2d208adcd9b266d365e850929efd278639bfc1f36f11677e60e24a219bc17627e3acbc07d5999f704259c6e38b539ce44536a07c94c6fe1af56bec24d558230a3522441563eded6fd45b4cde5b052e96670e34d7ad8370862caa396f691be932461f1f4424c5bb35c0726d316ec0f808edbaffbeae1b1dabf04cafbf532db67ec1afeb1507cf075277c06e1df2397e837f2170bfde1eb7d1d7904b685165115819b6f33a6191f0872e380dcce8806e1004e33c46795481242b2e174a038433b21485eae1cf905c6aadf4a25a7f6e82b8ae44c2b4f63e80a35f4f532e5188399249763a830cebbe0f5d15d9d370830b9942c5191b9ccfd65a3e8e2fc93a624ec3be4cb3da36accf375afe1246fc908eed8344dcbd2e01427109a1170eea5b27ea4d9270568b869cdc327d4cca866d41566bf6ed37640d1ea003b679a1f0ccec97c4f49e175867504303ef89184aacf4a4774fd2f2791963b76c4bf030df38f2c17cc31693e09cbe0de1ce8c16ccf3d0dba7f4c6e4fb82ef29a1670d771bbaa8744f1f68bbf467b47eaa4c89f08b65324826712488cab864770b4cceb2adcc34a7d5ecf6f32e198aab542061e2f91918754e9c26bbd956fba8e14f0459d3008b593fa9590087973a6135ebfaa43dfc3216ae945841dfe57362b890e4d0d009c945479ec5bbb5288a493dad5d65feb22b8d2c7e3791520797ec07dbca1b99cea09f3ee4bbb806f8471994060cfaa2b4805d60800ab204667ff262874b9f8caa4d223b31cec20a602df4b87fb46fd361462b4e830e89d67b916d8df5041ab6e8707081311e4a1b4c9a9645811a72f39609b820c8c9c855383fc2b886966c89783fe738611a10b5a35ff817b5e42bdd23b68212ddd90c3aaad54d3518ed4c129c0fa65f6e3f186c92c669639b00df166d8c75abbf8b89a72775e0c2804e0a93bcb40194acb7102cabdd003b4797a088ffe793129c77d2113029dddfd0ccd4288e00e15a5cefeaf11d0e94d5817bb7cab03dea4f2ca7b1787fdd45c2853f5bb0e7801a46b91b302407b5143891ca81ef7b62f7a6b885af144c2f10c81676bcb6a8bbb9b72bd0ec2ebd87fe8a7f68b13145410ab2d6a8c3484ee33cf52017f2e8b7729cb3e6efc492f4410576c8256cf42bfc3b9fb632f35ecfd52bdcbf27a9b4d30b213d74324484c06ca413365e8a4a7677b779a40317a626ed0e8971abe2fc3d1509787d9c4d2ae568cbda0cd613c8179ca75b4d3ed22c92fbca774395d71a9c19be2ee2505a82c59214242279f2275318b87518d92a30b887d870b5b29dc8304f10bce3b912a096845002b994fdd5e70058246228ce292e56bdd73c8345490cc5ca5870a5ea029a4ccf474014cf98dd6a2f61b4067bdc434b516ba29d7200a1fe3bec1ae1b45a56f27002c866a9590ee46fa0d62ba3469c856cb84ae30df007872c81aab26ed7656079190df33aa5f741fe4472a68e50b76cb68dfbaf6b9ebfa0725f239916e3e94e62f3dbc9646aa0602771e3937666132c040184092fde6b0fe5dc1511e4f87c914021fa6accfbd3c899c5eafe7c8cfda2f56b5dbf212d684aa6866cdd90d5a75ccc882d47a35ddba2957735eef941095609224f6eca04852432b9219a0257141aefb8fa6adee7ea7a42d4c7d3e46f33825551fee935f609ba68fcc45f11086293167fd39df9e8ce90481f242cf8769308e942c4bccc0a98b0f84a0699c27af638068d117901fa1b6cea331048d1c43c836d99ea57cd2726eda83a41f283b082e6043487c834c234be666e3b37f3cf6d33c8b39974e414315546e7d7e15a7b49eee6049a232f180b3485d69d629356f8f6193339abe34b984e288b86a5644f0d6096a2e79d1bad01bfcf6ead323c5177a93bcc466fb260d3f3549edce8199c6f2e4ef9b5f11df562f84a42770d479397683ed14c46111ca8197a7ee998f6a18b56cb360d2a152a3ab68577e5ec1afbdc5de316f11b05faa896f3aa707290ad6c40b173edb8bb73a43a359ad63e434c846730f039e76eafca8a2366bfaa564aad603ea250992b123d641c9af9cd86f25ab843ee63470434c0b5b4196007362deb845ec9be5d967c5e7b48687399caefa146d6fe8a6406bc61d69575b645c94504ea5ea4f006030ee52534f51d94cbf17271ec3c1cb72b8141f23f54455911616632c6b4e9f0d1ffb811a33c52e825a9f5b6bbf62f8a01918eec488dfd1f9dec0cc08151667882cf765607768d647547c3d26dd528d65a8885872cd1d147a78342fdb19c4f8d8e438355f35f0775f579c67c4f6a39486dffb979d7be8ef86ad9d83c3fe7523da6e19cbb282ae3b90a37ba25148e8d7871ac8a4d65bf05600d0c496580ce09e4344943d2a4c0f2b714b22ea7cc30602f8f06865769f028ba8f405f50641b6970b3841e6c09ce2fc2ffd1265b71662dd85ef1d3718b9d57d5c8b827a4deba0dc77a6ab78b029a5db7df0b38b22c307acb70c49005eea1c65ec6d2390c3c0473edbcad02401cd86c220668cee401ebe97f49e5c37d9a91390d99e4bff82cd8637e9c221f4f50cca83616968600d5eb2fbddb41e077ecdb02646f2ea49755cf9c8812e1426811262894163db421c55dd71eb702928cb148e65b721c3019aa1e3b8345ac2aa5f30edddd44c4ff9087473a0399b38bb049b103ab8f048e9a9ef1fd0496deab61b18e56d1995d691b294ab8c91368d558a8bae29914fdb07e9c6f2fcbf193469a4c4860afec287a7531d581e2cd19d3fc4dad9760d95b7ea962d983f47478dcc68581944a4983fb85c0d7f0e2c2da9ba0534bbe7db16dd83ef96a854282c3c99ab548fc4f41fc1adaa6fa45d9d1f93af8ba57ff0ac71b9b2f28a9855f7b6f578e956ee7747a9db35eb062e3c439d2bea5a610cd4637dc4afa71c633ce9f4de8e72f5b17e5608e9f17c84178f34dcf3be8a0eee60f1c338806ab0853fc595b33f34a19fa93cb99a1e6ebfa189d3a60317194763fc95bfdace534a1685438dd0d42425e0d8777752df9b7e9be2c0aa9758bce90eef26b0e9ec5b6e47141ec3c322845fce3caaf0353a0d28849e05b4b7e542a577f0c16ee1671579599aa0942174a2b098c1a133f516394a2fabea08a1f1301f0614795556d001b22423676a6e493bcca06d1bf76fd52d39558a4e60fea5406b85800c898849b88f0f6ea0417c71ee76028d05e69994301c2ebb7c49fcc1fed18ff368d5588f7ac4c15dfabda158b6b3a29ac774c3da34115811d99b20297cfa8a04fc10f0ca81099b1f4594c34063d41ce6a46ae1adfd0a8fb8e5b015f0273c565cbf91bda224bbcbed5145a3cc8f60d7453f7bfc62f664f9d6c5860c6e798605c476370842c931ae2189dbeb479ef242bc5a6f509cbbfa286eb2fb8902cf82727d837d6c2b3db07e65003e4a7d28cdf447af1205da82db24f7ecb276bdcc31bbcf59f672a0231f7d236bfa8fdb5304a843fd6c15503e96c03c7ca0ef68653cbf049524e53ca33c9f350fb4ca3f15da6af166dedcda650cc997546b52d7bf7df8541f692c38bac1f2b1477d2e0bf7aaf96e2f34db199d3e90c3d3f03de2f97a5807f6f661c589b7c566f31116dae57494c8485799e43267344abddf711ef1eed113a7d3075a2122231c0bf9fca3b5cd1c474c4d306b3abaf9bdd523399f8a3f3c8b3b599e2fbf997638c32400b0c4a290be4d2b8aa01578fe4eed3e0e5a9b779dd2e29157d078229d7c4b3759b2ac930b344ac34079176ce214794be686637e961052725138bc5f67641f4eb4b0035eacba121d0095adf0dbcc30dc60245ce89ced691c80b997710e3fd4d0db1829c7eb01db4c8b16a200ac2985002a89252c123eb1096255e761595b8de4e09c6ea4896551b0c80dbcb8b6555b90ce118b09b9bd132dc2ac3d98d728541b2debd3ef38708841c31d0216a8670a33d0181804da679111b7c299c1c7ce1a29b34422b20bf1b158b42a3eb81b142f2990ac539e03d3ceba2d5b56483b556859e843ea1b14df003df9d8e69b1db534018964dbc3406b3cbc9c7bb82dc0e1e0ad3623cc181ce650cdda755b8bc0752cc7011cb6bbc8b5f6694ed71dcb87a726295e56db853b1e180f00430c05ff58950f85c44fc524620386b4b7cb7c065a2e26616771ee3b31d47c8799d20284b843b2d1f2e08d83b0bccec703c318133be06e328dee79751f650015b24fe286c18c5ba237f4057e5694ce2cbb6c8a477d1cb3c777d861128f83edfd819941c16700edc8d158a49036fb8c983b6c00158f3de95867c71572610be0f476e9425655a1abdf9930f006ee18c1b23a6efbe3d83f972e190b7bbe64ec682dcb0a3754579f703159d65b25f69bb49e64c1c64621a8ebdf6b8a2c863bbab2c14b540d42754e62fd50ac5cd340eaa33b399401b9b074ac929a86cffc3ce9c93c24a1d17cd151d136f4edfa27cb83edce43b649eee7a70031786e612316ca7b5a2dffbb4bf422d1958c8615f2652497795b24bafe97025ffd4d1aa6a6c31d451af45a53130835113b357868cbe910d872728e46927ad7aba333aba9413105a39f0d5b04f3a29c16085b25bafa35825b805233d531a42b035a83a0ee2c25eedf369d44a55e1404ecc5a71da1eb03589e35c6f9dd8bdb30f55cbd0a94eb671fcfad17e422b77db58a37fbbb1f10a50f59a206eb3009ab5cfe5eac0f0a15b9ed3e28f7ef7686867e88d65eb9115e1b1c0d886ff40c9f54962337fb54ba0ae9b2c2b8ec66b58d5e23e3147b4733bb2b3695c257785917e44de19e035eef29bae78553bb31f1356b93e528b1ab7cbf2cc99fc4a05a96b15fc02746f3d17e4cecf5c1c75cdea9fbed52f1978264b5215a281800d8f0e3146fef829fa54ffd1e9cfbe1695f9e8f31e6e8027bdc40416d804c15155ca012c1569e89adf77e148e732b83ecfdd3ef67b96fe8b6d666d32026a6b6cb086347d97a1f6fd14fe17d0aee5a46691135f77310b87eeafc4ce10cd7f0f28d5278cc13d51da06c0abf02ddc7144dc43f4c371cf7a4fcd5bc301e0aa350887fc122968f411adbc3b542b0d5ca999e38d8a3a5fe526de29f505c9b9de9eb8e205e91222f61178204015bb6fc707e09a38d10114b0caa308d42d21ea1234b2cd3f9b4bbf7780df0a9de4f79b2ec941d6771622d2acf452708b34ff7b50ce0aad2c0d42f6307fcbc1ed1d9252510b50fa72e38006d7e70b6c0bac907c3e9ec76c9805b4ee3d8bf896c4f7bb505b3b59f2e1fa4644fbd9f29cee51d95edccab4a0aad90053d2b3ce9252d54dfab1ad8ca1013fef9a7fabee7c6725152500fca5f97f53a18ca31725848f6557b1011176ddddfba01398ac8986a2f84c13741970018ad3065e5227f99a4860c64a3ecc4a167e04e4bdd0912e5ddebe325aa38d639697d8a5b1f846ed3c2c939224050b4cf50e7b14575264b2132579678c4a5db4fec5bd29ac58ff3657c3d941b68167199a56828b2845cf1bbabdff31ea10e2393690d131a49c8023adb27462281ca368447ad495123ce6a1de9fabcb4d6d26b3e6212fc3dd4385e4c1e6ffc4ece960c54184c290440603424e15de45d80b1fc8cd8a6417d3ce52a6422a81570103519e9c9d15fb8965af7f418c59c2c82ded67356d05d6806efbb994d051bb50542df493f655cf99b28c6b175f7ee40a1a2036f942f8dd1be7df6556d96ed626444fd5a8a2e1f2a3025fada58d6630b151d05f1d6d68af64cc5fc83183f00dd77b7738599f3e23fe4e0ffbaea0b762b85220d92c44fd155fb20384ea74e2a5017406212520bd5723bbe4e82223761a82f00ee7857bb384b65d934e391ab5a558838acef7d024f85c5789cb840676ee9c3eb95d87c6243f56b1b54d36080a4f7c8ff205a4b68ddbfd5eade96d2ea0ce7e895e0c5a733d6f97c4b956fdd02774697e59c67664c9884fcf54f5c47adbf19b83d6ac50c64bb3dcdaf5712e2fce253b3cd93b441946b77a748d77e523bb3cf8e8084a7a7dcd3ea8ae746d22276529290b3e4f3957f8d454258b685836dc90a335047ec0b9403aa567b8738b0edce38592ca3ba2314aa278b108c6daf4e4a3cda50b34b83e3993fc4426ad4a98c9d974f3aedd2ac614e77d482a72e36fd19b6766306074f99f4f9283d3624bfa6543b68b4418a66c4fa105ead01eee69fe437e70b07c85a834d2dfbfeffcb6a9ca3f1048bd8aab653ecaef6454836f0d9aa1472b166772190393ee1f11b5cd2e32b0a9aacf28df70a5932673e5e3838a42f946a125b0a9eb0ac21c8742ec6ae71f5a04866aa49e53ebc392c3624232811f8fe2a5a98fc536504697c5cd67c05fe289d5e190c92f3b58e1fb47d7c6a5ba1dfd558abc0684f99b3b27bfb3a3e7d2e1afdc739c4152da759557eaee599d0666c3b63893bfeda3a08a21d86036df42f79bb2a933547766c3c2367cb720fae321824aeb7d005fecb7112ad828fdf98a83a69b1422370dbbe6be7b22dc95d892981652d78bfacf45121f0ec621e19fb86da0c3b66543ff90504705e10b6bd74dab2fe80c39b165531b36b48ec705bc45606d324000d25bae29dda47726a6a78dc0d710c7d203b61463670bd7c0dcdd294f66444540114a0a29c8fb7c9e4208a6725973a817f1bdbfb148de7f53311b930f28caffcbde2cdb75cfd2a9710e26d67d96854caf73ae8e8380e9b90b2a322a20fc85865f07b0bee7d2b82fc996f32242c246b18e093e77662e8da6a895f82d093d095308b9e6e051e55eaa0588e8eeaf45ceb778bb277a8e11457c0db1893e18542b1d15f0ce23c9877907abe9ddde0a70e24b32e4552c83c7fff6f0b59e278be3a950d98085856f1006d6c23a38461d6590ccee05ff9b9b6f18d2df2c7c55722f55a641e16ee6ebf4871ea11a7c24ea7a134ef2cbd5557bdcdd63ea50715d0d68aa97a19c2b71f2a80fe05f3458ccb5369943ddd687fcfae04a763e4ed7b6d56c1e063836da23ad8173cf4ce574b39a7ca4751d7c901c38868ec26a262707a9d3242ffa4d9386c0bc6b09b558fa7b51d3bda5567f15260164ffa16dc050597ce598e9e140cb03d3f606e047375e0868ff8fb67eb2c665c9457f95c4934ab447c514350f4f44c96f42533120457add4ada3b97193934f69c47ac30a37fdf5ff3bf8a4eb3f0afe5e99638aef7a09f83619bed9875983eea7fa0da8625720ada1b9952c8b6b8f41fac39ba68d06f5747477395a52acade2c29dd301cc45808d6e3910174975453f35a36d680a1b0f10b791ec5a5d3ce04fa5b973b9ea5dbec3318b8448bcabadc6ccfac828c14567da2f0831858c91d48be36fea832eb5378048f061f7dc0f9048f49f76805764ac576fad886e77bb477fc1e549136c63be919cc2127d0e56d6b1a87f43e79091cc25c96ea2d433aef33dff5b28ac32352f17005ec0d9d6dc439865f128a640a1f5a04bed9bc6e20148cd5af47bd8424516678e024fcd44aa467db565bb28b492305240d1a918bc4b399f7442c609d011e4369629e35fc292b36b072da44cad58698f3364dcd0c9d23c09f379876b46d79fc1d3426cd4db8cb14184743f5f57d885faaa85adf50ff9b9938ace3d2416427bb9b5b8b6d6ee23829ccd047a157829a81123fc2417b963cbbc9ee29307803563dbf32692a99eba79b010d7f34b914f06d121b54ee73036f164b20e49c54415b2a35dcdeea63e5ec3203bbd9309371cfd252d071736be0ba3208efdd3b36418085ad3f0f99cbd42fd696e6e0e6ea68b6bcc3b4eebcebc4b9fcc059dc431e21f960026f3b8c89fd0573c515ed581a2e8c8d92b5f7562c17c915e1e642137b1b82f3398e98b169aa5a7f1e6e9199cde1b6b864428444bd8de7948abbcd22216068f7e73402aa63df8ef41fa4c8a6945520cc7601b2e5f985fc51328c017874b3128c43fa12a1ee48cbc3c9388f253daddf8fab650fb77a52b8ee10fa2fcbc2a24b2a4cead2a39c619f84c97f0a76a68edfe20f175a73d13db2c0e5a50a9c81a70b81c93bdf6550f342a0485ee8b93f23734f01c6ac123dcc6059bfeaba80c1ed545c9ae305c849db367d7578ed937182d74b15ede9e2dd8fe6fc09e21ddf5b80a87516fefe77d09c1287abffdc42a2dcba6988fc1edba72bcbd6dcc2f0a07f7b8d9b4cf915ab6840a131e707ac150ee8071c9a25d2ac8a7ba8a105816aca8a96ebabdb2316ac4dbe60d06761574a9feebc95ddb52f6b9ce961682cf17ed009f457b9653b91492d29aea0444c86594564171d1d092b06a673c88be64c2a950936c1979b8722e84b712178b10ee26822b0b98b10efb45598e68a5c96297d3e82dbf47169a80c7a30f06b546f3bbda2a7d486acf3be3c17b1e7fd8d3e6c4ee8d8dcafa2df329408261a3ff225e45219c4c5cbc904793d400263f20b7319560ad99bf0bd11a1bde15635f434990a4f0b49352a55cf3ec422d32d1d31631d53af95ab19e042d802b6f1b405733c780fef2307c1445ec100acdb3a0ebcb17814b27bd008f9c419baf160e97b8048920ae2b3d268ec5a45292dbae96f51bdd1e9d410242d6b21873db45b5863b947fd851ca3f3a80ef403582c4af40a69b6dc5bf92116ee66b6ec7ec777b753dbaf68a82a36ec82e638657881a45b12db5ff7ef8f12ef234b5ca04ca0a69a27f9d87c66dd8472cc84970666a0d3c6dd5de057bfd04c55dac25476299633fa7cd9c09d2e082d150d6d8831f0f563f62adb284472888cf9b5694b98f921f594eaa8bd0d0a6b0038460150f1d7c358ee1e338df2400f57cd4acd1f8410977e723df73387bffd25bc731427cb2d7b80b1e3bb39fa3bd43139a9a44117c2a7eba25b8155d9936dd4ca08aba7e36ba41e3c6c4708c22f65075dfb29f55ec6feb43bbe168851fe30155e56d37b09bef06b87a609b2c6df76248f5bccd986064018b7ce157b9198891edc61f9b880da6b3eac0f63766c24d730389927ba1484a73a3f72f76106159b25953b5f356695f744dd6c4e1ff1096bfdade028cf021b92fee00ab0c2055f60b721fe72f433fb3319ed2107aef1e8cb09aeebad3bb3b0b8c13956a07e7fad6ba0d3911c1dd39ccecd0ba04404bc931e8a3ed76cc78a5da78f8d0f864fe0dd040c91808b6f4663158eebb44b0e6a29473e11c3dafa6d2cab11f8ab54f6822e8f74e52d54feaef40802cf3a0023df9aa9ee55ac985c7be85f71dddbb983e59c06b4d76739a769de29276cd75fd37b5117f7faee9cd5e2d43603f783e206349d9563c29a2a4ae7b6708a921afe1df300c32356098a5ee7d7cb055a7955090b9be6bc0ad25d940e0dbd7419b2539ec584a55b4e42b1c4128328e882b7d1f2a7fee537bfbbbcfb1a1fcf4620302c82bb5bf6037697909f132698af04c1f3abfa2f7cf3ec6190b4effc6224bdf9e36026ed28d20eb36932cb61aa664b5863d0123659de2bffb665679e3670dfe91282d95e029fad38617e2f22b9af05ef036511af243237d75f6ba32437af87ac39a2bc479bede8fb20412dba2d3e1fbcf476629ae7ee9bf9dd7761cb618f1b2ee9c93d2fdd4ee018cbdad803ef4eea3f0fae4fbdf584cc</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-default\">\n      <input class=\"hbe hbe-input-field hbe-input-field-default\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-default\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-default\">您好, 这里需要密码.</span>\n      </label>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">",
            "tags": [
                "isp",
                "awb",
                "mywork"
            ]
        },
        {
            "id": "https://blog.17lai.site/posts/509c7bd3/",
            "url": "https://blog.17lai.site/posts/509c7bd3/",
            "title": "自动曝光原理",
            "date_published": "2021-09-14T01:25:00.000Z",
            "content_html": "<h2 id=\"自动曝光的原理\">自动曝光的原理</h2>\n<p>曝光是摄影中十分重要的一个环节，它决定了一张图片的明暗，如下图所示，第一张图片太暗，而第三种图片太亮。</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/09/1420210914131959.jpeg\" alt=\"\"></p>\n<h2 id=\"曝光由什么来决定\"><strong>曝光由什么来决定</strong></h2>\n<p>使用过数码相机的人都知道曝光由光圈、曝光时间、ISO三者共同决定，详细的关系就不赘述。</p>\n<h3 id=\"光圈：控制进光量；\"><strong>光圈</strong>：控制进光量；</h3>\n<h3 id=\"曝光时间：光到达的时间长度；\"><strong>曝光时间</strong>：光到达的时间长度；</h3>\n<h3 id=\"ISO：增益；\"><strong>ISO</strong>：增益；</h3>\n<p>但是对于手机以及其他电子产品使用的微型摄像头，光圈大小是固定的，所以手机拍照的曝光由<strong>曝光时间</strong>和**增益(ISO)**来控制。</p>\n<h2 id=\"什么是自动曝光\"><strong>什么是自动曝光</strong></h2>\n<p>数码相机中有一种手动模式，可手动设置光圈、曝光时间、ISO来控制曝光，该模式的使用对摄影师的要求会比较高。另外 数码相机的全自动模式、光圈优先模式、快门优先模式以及手机等电子产品的曝光都属于自动曝光。</p>\n<p>自动曝光就是相机代替人的操作，自动调节曝光时间、光圈、ISO进行曝光，使得所摄物体亮度正常。这句话解释起来很简单，但是存在两个难点问题：第一，相机不如人眼这样可以直观的分辨图像明暗，如何判断这幅图像是否亮度合适；第二，如何调整曝光时间、光圈、ISO,这三者调节的比例。</p>\n<h2 id=\"自动曝光的标准\"><strong>自动曝光的标准</strong></h2>\n<p>在此之前需要了解物体的亮度与色彩是由物体对光线的反射率来决定的。例如纯黑色的放射率是0，纯白色的反射率是100%，处于中间的灰度的反射率是18%，这就是18%中间灰度。</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/09/1420210914132002.png\" alt=\"\"></p>\n<p>具有一定反射率的物体在最终的图像中被还原到了其相应的灰度级，这就意味着达到了正确的曝光。例如摄影师们通常在拍摄之前使用中性灰卡测试曝光是否正常。</p>\n<p>但是相机在各种场景下无法识别物体的反射率，因此采用了一个简单粗暴而又行之有效的方法，统一将图像整体平均亮度设置为中性灰的亮度。该方法基于**科学家认为自然界的平均反射率是18%**这一理论。当然，这个方法也不是走遍天下都不怕，比如拍摄雪景时需要增加曝光补偿，不然会偏暗，因为雪景的亮度远远大于中性灰度。这也就是摄影中的一句口诀的由来“白增黑减”。</p>\n<h2 id=\"自动曝光算法\"><strong>自动曝光算法</strong></h2>\n<p>上面已经讲了自动曝光的标准，也就确立了曝光目标，要达到这一目标还要自动曝光算法来实现。</p>\n<p>目前比较常见的算法有平均亮度法、权重均值法、亮度直方图等。其中最普遍的就是平均亮度法。<strong>平均亮度法</strong>就是对图像所以像素亮度求平均值，通过不断调整曝光参数最终达到目标亮度。而<strong>权重均值法</strong>是对图像不同区域设置不同权重来计算图像亮度，例如相机中的各种测光模式的选择就是改变不同区域的权重。<strong>亮度直方图法</strong>是通过为直方图中峰值分配不同权重来计算图像亮度。</p>\n<p>自动曝光实现的过程：</p>\n<p>第一步：对当前图像进行亮度统计；</p>\n<p>第二步：根据当前图像亮度确定曝光值；</p>\n<p>第三步：计算新的曝光参数，曝光时间、光圈、增益；</p>\n<p>第四步：将新的曝光参数应用到相机；</p>\n<p>第五步：重复步骤一到四，直到亮度满足要求。</p>\n<h2 id=\"曝光参数调整-曝光表\"><strong>曝光参数调整_曝光表</strong></h2>\n<p>前面留下两个问题：“第一，相机不如人眼这样可以直观的分辨图像明暗，如何判断这幅图像是否亮度合适；第二，如何调整曝光时间、光圈、ISO,这三者调节的比例。” 第一个问题在前面有过解释，第二个问题也就是自动曝光实现步骤的第三步，曝光值由光圈、曝光时间、增益沟通决定，当计算出一个曝光量，曝光三要素有很多种组合方式。一般情况下有曝光曲线，每个曝光量对应一组参数。手机中曝光曲线可以通过Tuning调整。</p>\n<p>From: <a href=\"https://zhuanlan.zhihu.com/p/33462189\">积极的悲观主义者</a></p>\n<h2 id=\"系列教程\"><strong>系列教程</strong></h2>\n<p><a href=\"/atom.xml\"><i class=\"fas fa-rss\"></i>全部文章RSS订阅</a></p>\n<h3 id=\"Embeded系列\"><strong>Embeded系列</strong></h3>\n<p><a href=\"/categories/embeded/atom.xml\"><i class=\"fas fa-rss\"></i><strong>Embeded 分类 RSS 订阅</strong></a></p>\n<ul>\n<li><a href=\"/posts/13894dce/\">海思MPP&amp;UNF构架源代码级分析</a></li>\n<li><a href=\"/posts/6b2ba137/\">3G,4G,Wifi选型需求分析及技术简介</a></li>\n<li><a href=\"/posts/509c7bd3/\">自动曝光原理</a></li>\n<li><a href=\"/posts/798e6e62/\">ISP 数字图像处理 算法概述、工作原理、架构、处理流程</a></li>\n</ul>\n",
            "tags": [
                "3a",
                "ae",
                "image"
            ]
        },
        {
            "id": "https://blog.17lai.site/posts/6b2ba137/",
            "url": "https://blog.17lai.site/posts/6b2ba137/",
            "title": "3G,4G,Wifi选型需求分析及技术简介",
            "date_published": "2021-07-30T08:25:00.000Z",
            "content_html": "<h2 id=\"3G-4G-Wifi选型需求分析及技术简介\">3G,4G,Wifi选型需求分析及技术简介</h2>\n<ul>\n<li>\n<p>文章写了好多年了，只在一个网站发布过<a href=\"http://bbs.ebaina.com/forum.php?mod=viewthread&amp;tid=14995&amp;extra=&amp;page=1\">PDF版本</a>，行业内应该很多人看过这个。</p>\n</li>\n<li>\n<p>关于本blog，<strong>图床</strong>一般使用<strong>github</strong>，已经配置了CDN，如果图片还是未显示请自行代理解决</p>\n</li>\n<li>\n<p><strong>原创声明警告</strong>，本文<strong>禁止转载</strong>，禁止发布到其它任何网站，可以接受约稿。</p>\n</li>\n</ul>\n<h2 id=\"用户需求分析\">用户需求分析</h2>\n<p>减少布线，或有的地方很难布线。</p>\n<p>​    例如：偏远森林，沙漠，海岛，土地所有制导致不能随便开挖等各种原因。</p>\n<h3 id=\"–3G，4G–\">–3G，4G–</h3>\n<p>优点： 布线，距离远。</p>\n<p>缺点：流量费高（可以和运营商合作 ）</p>\n<h3 id=\"–Wifi–\">–Wifi–</h3>\n<p>优点：费用低，</p>\n<p>缺点：距离近</p>\n<h2 id=\"研发需求分析\">研发需求分析</h2>\n<h2 id=\"WANTED\">WANTED!</h2>\n<h3 id=\"3G，4G选型标准需求\">3G，4G选型标准需求</h3>\n<p>1：产品生命周期，时间空间的重叠。 初产时间较近，出货时间长，</p>\n<p>2：客户那里运营商网络制式？？（例如<strong>TD-LTE****，<strong><strong>FDD-LTE</strong></strong>，<strong><strong>CDMA2000</strong></strong>等等</strong>），</p>\n<p>​    运营商名称？？（一般不同国家不一样，一个国家很多个运营商）</p>\n<p>3：3G，4G具体型号选择： 1：厂家选择？？？ 2：网络制式选择（需要选择制式尽可能支持区域大的，亚洲，欧美，日韩）？？？ 3：USB 使用的技术代差（1：usb猫，2：usb光驱，3：html拨号）</p>\n<p>4：客户3G，4G使用场景？？。流量大小，费用</p>\n<p>**注意：**可能客户那里支持的制式和国内不一样，我们这边验证的制式在客户那里不能用，客户那里支持的制式在国内又没法验证。选择制式的时候特别需要注意。</p>\n<h3 id=\"Wifi选择需求\">Wifi选择需求</h3>\n<p>5：芯片厂家需要支持Linux驱动。 芯片出来年代？？？，价格？？？，协议标准（决定速度），网络信号质量？？？，传输速度（不同距离速度，是否要求穿墙）？？？</p>\n<p>6：对应的无线路由器调试</p>\n<p>7：客户Wifi使用场景？？。 主要是使用距离引起速度衰变， 现在有2,4G，5G路由，速度有150Mbit/s 300Mbit/s，450Mbit/s。需要ap评估这种速度能否满足各种场景使用需求</p>\n<h2 id=\"3G，4G部分\">3G，4G部分</h2>\n<h3 id=\"中国2G，3G，4G制式标准\">中国2G，3G，4G制式标准</h3>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730141533.jpg\" alt=\"运营商制式\"></p>\n<p>UMTS(Universal Mobile Telecommunications System)，意即通用移动通信系统。UMTS是国际标准化组织3GPP制定的全球3G标准之一。作为一个完整的3G移动通信技术标准，UMTS并不仅限于定义空中接口。它的主体包括CDMA接入网络和分组化的核心网络等一系列技术规范和接口协议。除WCDMA作为首选空中接口技术获得不断完善外，UMTS还相继引入了TD-SCDMA和HSDPA技术。<br>\nUMTS网络优先选择的就是WCDMA，国内就是中国联通</p>\n<h3 id=\"电信\"><strong>电信</strong></h3>\n<ul>\n<li><strong>2G CDMA</strong></li>\n<li><strong>3G CDMA2000</strong></li>\n<li><strong>4G TD-LTE</strong>**，**<strong>FDD-LTE</strong></li>\n</ul>\n<h3 id=\"移动\"><strong>移动</strong></h3>\n<ul>\n<li><strong>2G GSM</strong></li>\n<li><strong>3G TD-SCDMA</strong></li>\n<li><strong>4G TD-LTE</strong>**，**<strong>FDD-LTE</strong></li>\n</ul>\n<h3 id=\"联通\"><strong>联通</strong></h3>\n<ul>\n<li>\n<p><strong>2G GSM</strong></p>\n</li>\n<li>\n<p><strong>3G WCDMA</strong></p>\n</li>\n<li>\n<p><strong>4G TD-LTE</strong>**，**<strong>FDD-LTE</strong></p>\n</li>\n<li>\n<p>中国移动TD-LTE：支持频段38、39、40</p>\n</li>\n<li>\n<p>中国联通TD-LTE：支持频段40、41</p>\n</li>\n<li>\n<p>中国电信TD-LTE：支持频段40、41</p>\n</li>\n<li>\n<p>中国联通FDD-LTE：支持频段3</p>\n</li>\n<li>\n<p>中国电信FDD-LTE：支持频段3</p>\n</li>\n</ul>\n<h3 id=\"全球制式和区域\">全球制式和区域</h3>\n<h4 id=\"2G有GSM，还有CDMA。\">2G有GSM，还有CDMA。</h4>\n<p>​    我们平时说的G 网或者C 网了。联通和移动都是GSM，电信的133号段（之前是联通主营，后来转移给电信）是C网</p>\n<h4 id=\"3G有3种：WCDMA，CDMA2000，TD-CDMA\">3G有3种：WCDMA，CDMA2000，TD_CDMA</h4>\n<p>WCDMA（日本、欧洲）、CDMA2000（北美）、TD-SCDMA（中国移动）</p>\n<p>使用最广泛的是WCDMA。美国、欧洲等国很多是WCDMA和CDMA2000都有的。<br>\n另外WCDMA、CDMA2000里面还有更细的划分，主要是技术、标准、速度的细微差别。</p>\n<p>WCDMA（欧洲版）：这个是欧洲的主流，也是目前世界范围3G 的使用模式最广的，在中国大陆，是中国联通3G （沃）的模式。<br>\nCDMA2000（美国版）：这个数量相对少些，由美国为代表。在大陆，是中国电信3G （天翼）的模式<br>\nTD-SCDMA（中国版）：这个是中国大陆自主知识产权的，可以说是中国特色的3G ，虽然大部分的通讯厂商宣布对此技术可以支持，但世界范围内使用的范围有限。在大陆，是中国移动3G的网络模式。</p>\n<h4 id=\"4G有2种-LTE-FDD，LTE-TDD\">4G有2种: LTE FDD，LTE TDD</h4>\n<p>LTE FDD（世界绝大多数国家）、LTE TDD（中国移动和国外极少数地区的个别运营商）。</p>\n<p>TD- LTE是我国自主研发的4G标准，是由TD-SCDMA（3G网络）发展而来。</p>\n<p>LTE FDD是现在国际上主流的，使用最广泛的4G网络，由WCDMA演化而来。</p>\n<p>现在全球有超过200个LTE的商用网络，其中超过90%是FDD的。</p>\n<p>从技术上说，TD- LTE采用的是时分双工，而LTE FDD采用的是频分双工</p>\n<p>TD-LTE和FDD-LTE 是4G的两种国际标准，各有利弊。TD-LTE占用频段少，节省资源，带宽长，适合区域热点覆盖；FDD速度更快，覆盖更广，但占用资源多。适合广域覆盖。</p>\n<h4 id=\"国内三家运营商4G网络制式分别如下：\">国内三家运营商4G网络制式分别如下：</h4>\n<p>联通4G：TD-LTE、FDD-LTE</p>\n<p>电信4G：TD-LTE、FDD-LTE</p>\n<p>移动4G：TD-LTE</p>\n<p>虽然联通跟电信都是采用双4G网络制式，但目前4G网络仅在部分地区覆盖，3G网络仍然是不可或缺的。而联通3G采用的是WCDMA，为欧洲标准，是技术发展最成熟、国际通用和覆盖范围最广的制式，目前是国内3G网络最快的，最高可达42Mbps，在国外已将其定义为4G标准。</p>\n<p>综合以上，选型推荐。</p>\n<h2 id=\"3G推荐选型：WCDMA欧洲，CDMA2000美国\">3G推荐选型：WCDMA欧洲，CDMA2000美国</h2>\n<h2 id=\"4G推荐选型：FDD-LTE\">4G推荐选型：FDD-LTE</h2>\n<h2 id=\"WIFI部分\">WIFI部分</h2>\n<h2 id=\"2-4G和5G究竟是什么\">2.4G和5G究竟是什么</h2>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730141643.jpg\" alt=\"\">   以往我们一直使用的Wi-Fi大多数是支持 IEEE 802.11n（第四代）无线标准的，而且工作在2.4GHz这个频段上的，所以称之为2.4gWi-Fi，但是严格来说工作在5GHz频段上的不一定就是5G Wi-Fi，因为IEEE 802.11a（第一代）IEEE 802.11n（第四代）和IEEE 802.11ac（第五代)这三种标准都可以工作在5GHz这个频段上。</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730141655.jpg\" alt=\"\">   严格来说只有支持802.11ac的才是真正5G Wi-Fi（在这个视频里我们将它称作ac 5G)，现来在说支持2.4G和5G双频的路由器其实很多都是指支持第四代无线标准，也就是802.11n的双频，而真正支持ac 5G的路由最便宜都要400、500甚至上千元</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730141748.jpg\" alt=\"\">   我们的路由器一般会有标有一些类似54Mbps，150Mbps，300Mbps这样的参数，要说明一下，这个参数不是指路由器的无线覆盖范围，而是指它的最高传输速率。若要支持ac 5G的也要双方同时支持，单方面支持是不行的。</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730141738.jpg\" alt=\"\">   这个速率就相当于车道上的限速标志，当然也不能完全等同与限速标志，因为如果网络中多个设备同时传输要分流的</p>\n<p><strong><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730141801.jpg\" alt=\"\"></strong></p>\n<p>最后不要忘记要考虑空间的大小，200多平米的房子一般普通无线路由器的2.4G勉强可以覆盖，5G的话150平米就开始有压力，如果房屋太大或者多楼层的话可能就要考虑一下多个无线路由桥接了。</p>\n<h3 id=\"5GWifi速度快，穿墙弱\">5GWifi速度快，穿墙弱</h3>\n<p>5G Wi-Fi的最大缺点就是穿墙能力比较弱，墙体对Wi-Fi信号的强度影响是比较大的，每穿过一面墙，Wi-Fi信号就要减弱不少。</p>\n<h3 id=\"路由器摆放小技巧。增强信号。\">路由器摆放小技巧。增强信号。</h3>\n<h4 id=\"最根本一半是有线速度限制，但信号强度也很重要\">最根本一半是有线速度限制，但信号强度也很重要</h4>\n<p>另外分享一个摆放路由器的方法，如果受制与网线或者台式电脑的位置就没得说，但是如果可以移动的话，这个位置的原则是要经过尽量少的墙体</p>\n<p>最好不要放在地上，更不要放在角落，</p>\n<h4 id=\"放在高处\">放在高处</h4>\n<p>而且应该经适当的放高一点，而不是放在地上，这和手机信号塔的原理是一样的，更加不应该因为他碍眼把它放进抽屉、柜子等里面。这些方法可以略微增强信号强度，不过想从根本上解决信号问题，还是要换一款更好的路由。</p>\n<h2 id=\"无线网卡选购简介\">无线网卡选购简介</h2>\n<p>常见值得选购的USB无线网卡按技术规格和价位，大致可以分为如下3类：</p>\n<p>单频11n网卡，标注速度200-300M，20-30元。</p>\n<p>双频11n网卡，支持5g频段，标注速度600M，40-50元。</p>\n<p>双频11ac网卡，支持5g频段，标注速度900-1200M或更高，80元以上。</p>\n<p>无线网卡要想达到标注的技术标准和速度，首先需要路由器支持该标准及速度，否则会降速运行。</p>\n<h3 id=\"USB协议：速度，选择2-0还是3-0\">USB协议：速度，选择2.0还是3.0</h3>\n<p>USB2.0的速度传输，理论最大速率480M bit/S。 60MB/S</p>\n<p>USB3.0的理论最大速率是5G bit/S，要比USB2.0快10倍！ 640MB/S</p>\n<p>看线路，工艺质量，实际速度可能不到理论速度一半</p>\n<h3 id=\"USB3-0-对wifi和BlueTooth干扰。\">USB3.0 对wifi和BlueTooth干扰。</h3>\n<p>USB3.0的传输频率确实是5GHz串行，但USB3.0使用4条数据线组成2组，每组负责一个传输方向，实现全双工双向5GHz，而每条数据线的基准频率是2.5GHz。</p>\n<p>所以，总带宽是5GHz没错，但每条线上是2.5GHz，这个频率距离2.4G Wifi的频率太近了，又因为高频设备大多数都使用了SSC技术（扩频时钟？）使得信号不完全分布在一个固定频率上，所以就波及了2.5GHz附近的其它频率，所以对Wifi和蓝牙产生了较大的干扰。</p>\n<h3 id=\"USB-3-0-干扰-Wifi-2-4G通讯的问题和解决方法\">USB 3.0 干扰 Wifi 2.4G通讯的问题和解决方法</h3>\n<h4 id=\"USB3-0-WIFI干扰解决方法\">USB3.0 WIFI干扰解决方法</h4>\n<p>USB3.0的确对2.4G有影响，不过一样可以解决，比如<strong>网件</strong>的解决方法就是，USB3.0 和网口,天线不在一面，USB3.0接口弄到前面，而且是所有接口有<strong>金属屏蔽罩</strong>（包括WAN和LAN口），连USB接口与主板连线处都用<strong>屏蔽胶布</strong>包裹。可惜国内厂商哪怕是大如华为，网口也舍不得这点成本用金属屏蔽的。</p>\n<p>带有USB 3.0接口的无线路由，如果出现外接3.0移动硬盘后网速下降，断网，或者ping延时变得很高，说明出现了3.0对无线的干扰。</p>\n<p>USB3.0与无线冲突解决办法：</p>\n<p>第一种：给USB接口加金属膜做屏蔽可以适当降低干扰，但不能完全屏蔽</p>\n<p>第二种：给主板的USB底座增加统一（并与使用设备）接地和增加金属屏蔽罩，基本可以排除</p>\n<p>【推荐】第三种：用1.2米 双磁环带屏蔽层的USB延长线将移动硬盘放到一米外的地方使用，基本可以完全可以排除</p>\n<p>其实不单是无线路由，像我们平常使用的无线鼠标键盘、蓝牙、wifi电视、iPad、手机等各种使用民用2.4G的通信设备都会出现与USB3.0冲突的情况。</p>\n<h4 id=\"USB3-0-移动硬盘干扰解决方法\">USB3.0 移动硬盘干扰解决方法</h4>\n<p>相信随着USB3.0使用的用户越来越多，不少人遇到了一插上USB3.0的硬盘，wifi就出现降速或者中断的问题。其本质原因是USB 3.0 干扰2.4GHz下的Wifi通讯。</p>\n<p>解决方法如下，</p>\n<p>1.更换无线路由为5GHz，因为USB 3.0对5GHz的Wifi干扰程度较低<br>\n2.把硬盘盒从USB3.0接口换到USB2.0接口也可以将问题解决<br>\n3.使用高质量带屏蔽的USB3.0设备/线缆/接口。或者在USB3.0接口处加屏蔽罩（金属箔即可）<br>\n4.最简单的，使用1m以上的高质量USB3.0延长线。将USB3.0设备远离电脑主机。</p>\n<p>Intel官方对USB3.0对WIFI干扰的描述文档：</p>\n<p><a href=\"http://www.usb.org/developers/whitepapers/327216.pdf\">http://www.usb.org/developers/whitepapers/327216.pdf</a></p>\n<h2 id=\"目前在调试的两款型号：\">目前在调试的两款型号：</h2>\n<h3 id=\"TL-WN823N\">TL-WN823N</h3>\n<ul>\n<li>​         Bus 002 Device 007: ID 0bda:818b</li>\n<li>​         RTL8192EU</li>\n<li>​         300M迷你型无线USB网卡 TL-WN823N</li>\n</ul>\n<h3 id=\"TL-WN725N\">TL-WN725N</h3>\n<ul>\n<li>​         Bus 002 Device 008: ID 0bda:8179</li>\n<li>​         rtl8188eu</li>\n<li>​         150M无线USB网卡 TL-WN725N</li>\n<li>​         网上的驱动版本数据结构和3.10差异较大，不能用</li>\n</ul>\n<h2 id=\"Wifi芯片厂家\">Wifi芯片厂家</h2>\n<h3 id=\"Realtek：\">Realtek：</h3>\n<p>​         官方无linux驱动支持</p>\n<h3 id=\"Ralink\">Ralink</h3>\n<p>（已经被MTK收购）： 官方有linux驱动</p>\n<h3 id=\"Atheros\">Atheros</h3>\n<p>（已经被高通qualcomm收购）：AR9271</p>\n<h2 id=\"整理推荐芯片型号：\">整理推荐芯片型号：</h2>\n<p>USB 2.0 Mbit/s</p>\n<h3 id=\"rt3070\">rt3070</h3>\n<ul>\n<li><a href=\"http://www.mediatek.cn/products/broadbandWifi/rt3070\">http://www.mediatek.cn/products/broadbandWifi/rt3070</a></li>\n<li>IEEE 802.11:b/g/n</li>\n<li>Wi-Fi Frequency:2.4GHz</li>\n<li>Antenna:1T1R</li>\n<li>Data Throughput:150Mbit/s</li>\n</ul>\n<h3 id=\"rt5370\">rt5370</h3>\n<ul>\n<li><a href=\"http://www.mediatek.cn/products/broadbandWifi/rt5370\">http://www.mediatek.cn/products/broadbandWifi/rt5370</a></li>\n<li>IEEE 802.11:b/g/n</li>\n<li>Wi-Fi Frequency:2.4GHz</li>\n<li>Antenna:1T1R</li>\n<li>Data Throughput:150Mbit/s</li>\n</ul>\n<h3 id=\"RT3573\">RT3573</h3>\n<ul>\n<li><a href=\"http://www.mediatek.cn/products/broadbandWifi/rt3573\">http://www.mediatek.cn/products/broadbandWifi/rt3573</a></li>\n<li>IEEE 802.11:b/g/n/ac</li>\n<li>Wi-Fi Frequency:2.4GHz, 5GHz</li>\n<li>Antenna:3T3R</li>\n<li>Data Throughput:450Mbit/s</li>\n</ul>\n<h3 id=\"RT5572\">RT5572</h3>\n<ul>\n<li><a href=\"http://www.mediatek.cn/products/broadbandWifi/rt5572\">http://www.mediatek.cn/products/broadbandWifi/rt5572</a></li>\n<li>IEEE 802.11:b/g/n/ac</li>\n<li>Wi-Fi Frequency:2.4GHz, 5GHz</li>\n<li>Antenna:2T2R</li>\n<li>Data Throughput:300Mbit/s</li>\n</ul>\n<h2 id=\"集成分析\">集成分析</h2>\n<hr>\n<h2 id=\"3G，4G集成分析\">3G，4G集成分析</h2>\n<p>根据拨号技术流程，现在已经发现的USB上网有三种</p>\n<ul>\n<li>1：默认识别为USB Modem，使用pppoe拨号脚本拨号。</li>\n<li>2：默认识别为usb cdrom，使用usb-modeswitch 转换usb设备工作状态，转换为USB Modem后再采用pppoe拨号脚本拨号。</li>\n<li>3：使用CGI 调用Html链接方式拨号。不需要我们配置用户名密码，网络制式，最方便。</li>\n</ul>\n<h3 id=\"1：Pppoe拨号\">1：Pppoe拨号</h3>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">pppd call wcdma </code></pre></div></figure>\n<h3 id=\"2：usb-modeswitch转换usb设备工作模式。\">2：usb_modeswitch转换usb设备工作模式。</h3>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">usb_modeswitch -W -c /etc/usb_modeswitch.d/19D2:0117</code></pre></div></figure>\n<h3 id=\"3：CGI拨号示例\">3：CGI拨号示例</h3>\n<p>从集成实现来说，这种最方便。</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">./curl --header \"Referer: http://192.168.0.1/index.html\" http://192.168.0.1/goform/goform_set_cmd_process?goformId=SET_CONNECTION_MODE&amp;ConnectionMode=auto_dial\n\n./curl --header \"Referer: http://192.168.0.1/index.html\" http://192.168.0.1/goform/goform_process?goformId=MODE_SWITCH&amp;switchCmd=FACTORY</code></pre></div></figure>\n<h2 id=\"Wifi集成分析\">Wifi集成分析</h2>\n<p>步骤：</p>\n<ul>\n<li>1：驱动移植识别</li>\n<li>2：wireless_tools或者wpa_supplicant拨号</li>\n</ul>\n<p>wpa_supplicant依赖openssl和libnl，支持PSK加密需要用到这个。wireless_tools只支持普通web加密。</p>\n<h2 id=\"带宽性能测试\">带宽性能测试</h2>\n<p>服务器运行 iperf -s</p>\n<p>客户端运行 iperf -c 服务器ip -t 60000 -i 2</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-none\"><code class=\"language-none\">iperf -c 192.168.1.100 -t 60000 -i 2\nTP—Link 845</code></pre></div></figure>\n<p>笔记本有线连接运行服务端, H3531a（2716TE_C）使用TL-WN823N连接</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">[root@Tvt iperf]# ./iperf.hisi3531A -c 192.168.1.100 -t 60000 -i 2\n\\------------------------------------------------------------\nClient connecting to 192.168.1.100, TCP port 5001\nTCP window size: 21.0 KByte (default)\n\\------------------------------------------------------------\n[ 3] local 192.168.1.103 port 47671 connected with 192.168.1.100 port 5001\n[ ID] Interval    Transfer   Bandwidth\n[ 3] 0.0- 2.0 sec 2.25 MBytes 9.44 Mbits/sec\n[ 3] 2.0- 4.0 sec  256 KBytes 1.05 Mbits/sec\n[ 3] 4.0- 6.0 sec  128 KBytes  524 Kbits/sec\n[ 3] 6.0- 8.0 sec  256 KBytes 1.05 Mbits/sec\n[ 3] 8.0-10.0 sec 1.25 MBytes 5.24 Mbits/sec\n[ 3] 10.0-12.0 sec 3.75 MBytes 15.7 Mbits/sec\n[ 3] 12.0-14.0 sec 4.25 MBytes 17.8 Mbits/sec\n[ 3] 14.0-16.0 sec 3.13 MBytes 13.1 Mbits/sec\n[ 3] 16.0-18.0 sec 1.75 MBytes 7.34 Mbits/sec\n[ 3] 18.0-20.0 sec 1.38 MBytes 5.77 Mbits/sec\n[ 3] 20.0-22.0 sec 1.13 MBytes 4.72 Mbits/sec\n[ 3] 22.0-24.0 sec  256 KBytes 1.05 Mbits/sec\n[ 3] 24.0-26.0 sec  128 KBytes  524 Kbits/sec\n[ 3] 26.0-28.0 sec  128 KBytes  524 Kbits/sec\n[ 3] 28.0-30.0 sec  512 KBytes 2.10 Mbits/sec\n[ 3] 30.0-32.0 sec 2.88 MBytes 12.1 Mbits/sec\n[ 3] 32.0-34.0 sec 1.63 MBytes 6.82 Mbits/sec\n[ 3] 34.0-36.0 sec 3.50 MBytes 14.7 Mbits/sec\n[ 3] 36.0-38.0 sec  768 KBytes 3.15 Mbits/sec\n[ 3] 38.0-40.0 sec 4.38 MBytes 18.4 Mbits/sec\n[ 3] 40.0-42.0 sec 5.38 MBytes 22.5 Mbits/sec\n[ 3] 42.0-44.0 sec 7.13 MBytes 29.9 Mbits/sec\n[ 3] 44.0-46.0 sec 6.63 MBytes 27.8 Mbits/sec\n[ 3] 46.0-48.0 sec 5.38 MBytes 22.5 Mbits/sec\n[ 3] 48.0-50.0 sec 5.75 MBytes 24.1 Mbits/sec\n[ 3] 50.0-52.0 sec 7.50 MBytes 31.5 Mbits/sec\n[ 3] 52.0-54.0 sec 4.63 MBytes 19.4 Mbits/sec\n[ 3] 54.0-56.0 sec 7.50 MBytes 31.5 Mbits/sec\n[ 3] 56.0-58.0 sec 6.75 MBytes 28.3 Mbits/sec\n[ 3] 58.0-60.0 sec 5.13 MBytes 21.5 Mbits/sec\n[ 3] 60.0-62.0 sec 5.38 MBytes 22.5 Mbits/sec\n[ 3] 62.0-64.0 sec 4.75 MBytes 19.9 Mbits/sec\n[ 3] 64.0-66.0 sec 6.00 MBytes 25.2 Mbits/sec\n[ 3] 66.0-68.0 sec 3.50 MBytes 14.7 Mbits/sec\n[ 3] 68.0-70.0 sec 5.50 MBytes 23.1 Mbits/sec\n[ 3] 70.0-72.0 sec 4.75 MBytes 19.9 Mbits/sec\n[ 3] 72.0-74.0 sec 1.50 MBytes 6.29 Mbits/sec\n[ 3] 74.0-76.0 sec 4.50 MBytes 18.9 Mbits/sec\n[ 3] 76.0-78.0 sec 4.25 MBytes 17.8 Mbits/sec\n[ 3] 78.0-80.0 sec 5.13 MBytes 21.5 Mbits/sec\n[ 3] 80.0-82.0 sec 7.88 MBytes 33.0 Mbits/sec\n[ 3] 82.0-84.0 sec 7.38 MBytes 30.9 Mbits/sec\n[ 3] 84.0-86.0 sec 4.38 MBytes 18.4 Mbits/sec\n[ 3] 86.0-88.0 sec 5.25 MBytes 22.0 Mbits/sec\n[ 3] 88.0-90.0 sec 6.63 MBytes 27.8 Mbits/sec\n[ 3] 90.0-92.0 sec 5.00 MBytes 21.0 Mbits/sec\n[ 3] 92.0-94.0 sec 6.88 MBytes 28.8 Mbits/sec\n[ 3] 94.0-96.0 sec 8.25 MBytes 34.6 Mbits/sec\n[ 3] 96.0-98.0 sec 7.25 MBytes 30.4 Mbits/sec</code></pre></div></figure>\n<h2 id=\"附录\">附录</h2>\n<h2 id=\"1：TD-LTE和LTE-FDD标准差异\">1：TD- LTE和LTE FDD标准差异</h2>\n<p>TD- LTE是我国自主研发的4G标准，是由TD-SCDMA（3G网络）发展而来。</p>\n<p>LTE FDD是现在国际上主流的，使用最广泛的4G网络。</p>\n<p>现在全球有超过200个LTE的商用网络，其中超过90%是FDD的。</p>\n<p>从技术上说，TD- LTE采用的是时分双工，而LTE FDD采用的是频分双工</p>\n<p>那什么是频分双工，什么又是时分双工呢？</p>\n<p>先来解释“双工”。</p>\n<p>移动通信系统的工作方式分为：单工、半双工和全双工</p>\n<p>1，单工就是信息只能向一个方向传播。例如寻呼机和收音机，只能接收信息，不能发出信息。</p>\n<p>2，半双工就是信息可以双向传播，但是上传信息的时候只能上传，下载的时候只能下载。例如对讲机，你说话的时候听不见别人别人说，听别人说的时候自己不能说。</p>\n<p>3， 全双工就是信息可以同时双向传播。例如手机，可以边听边说。<br>\n其中全双工又分为：时分双工TDD，与频分双工FDD。</p>\n<p>​    所谓的频分双工就是将信息上传和信息下载放在两个不同的频段，称为上行频段和下行频段，且这两个频段必须对称。为了不防止上下行频段之间的信息串频，两个频段不能重叠，而且中间必须隔开一段，称为保护频。如下图：上行和下行频段相互分开</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730142158.jpg\" alt=\"保护帧\"></p>\n<p>所谓的时分双工就是将上传和下载放在同一个频段，也就是上行频段和下行频段完全一样。那它是如何做到上下的信息不串频呢？其实很简单，顾名思义，频分双工分的是频段，那时分双工分的就是时间。将波传播的时间轴一分为二，</p>\n<p>前半部分用于信息的上传，后一部分用于信息的下载。其实这从理论上更像是同步的半双工，但是由于上行和下行时间差距极短，我们无法感觉到，所以从效果上也是全双工。如下图：时间帧的第一帧为上行，第二帧而为下行，上下行共用一个频段，用时间的差将他们隔开。</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730142220.jpg\" alt=\"数据帧\"></p>\n<p>​    接下来说一说移动TD- LTE和电信联通LTE FDD的优缺点，其实就是时分双工与频分双工的特点。</p>\n<p>​     TD- LTE由于采用上行和下行分时，所以上行和下行的时间差导致他信息传输的速度受到一定的限制。他的理论下载峰值为100Mbps，相比FDD的150Mbps来说，慢了不少。当然TD- LTE的基站信号覆盖半径也比LTE FDD小一点。</p>\n<p>​    LTE FDD也并非都是优点。FDD制式必须要找对称分开的上行、下行频段，也就是说它必须浪费更多的频段资源。那中国联通的FDD网为例，工信部给他发的频段牌照为，上行1755<sub>1765MHz和下行1850</sub>1860MHz（2×10M），实际联通只得到了上下各10M的频段，但是加上当中的保护频段，一共占用了1755~1860MHz也就是105MHz的频段。这就导致了频段资源利用率低，是一种资源的浪费。目前，频率资源本身就紧张，能找到对称的上行和下行频段就尤其难。频率除了用在手机上网通讯上，像广播，军事,甚至无线路由器等民用领域也广泛使用。将来随着科技的进步，频率频段的稀缺会日益严重。</p>\n<p>​    TD-LTE和FDD-LTE 是4G的两种国际标准，各有利弊。TD-LTE占用频段少，节省资源，带宽长，适合区域热点覆盖；FDD速度更快，覆盖更广，但占用资源多。适合广域覆盖。</p>\n<hr>\n<ul>\n<li><a href=\"https://wireless.wiki.kernel.org/en/users/drivers\">Kernel wireless 支持列表</a></li>\n</ul>\n<h2 id=\"系列教程\"><strong>系列教程</strong></h2>\n<p><a href=\"/atom.xml\"><i class=\"fas fa-rss\"></i>全部文章RSS订阅</a></p>\n<h3 id=\"Embeded系列\"><strong>Embeded系列</strong></h3>\n<p><a href=\"/categories/embeded/atom.xml\"><i class=\"fas fa-rss\"></i><strong>Embeded 分类 RSS 订阅</strong></a></p>\n<ul>\n<li><a href=\"/posts/13894dce/\">海思MPP&amp;UNF构架源代码级分析</a></li>\n<li><a href=\"/posts/6b2ba137/\">3G,4G,Wifi选型需求分析及技术简介</a></li>\n<li><a href=\"/posts/509c7bd3/\">自动曝光原理</a></li>\n<li><a href=\"/posts/798e6e62/\">ISP 数字图像处理 算法概述、工作原理、架构、处理流程</a></li>\n</ul>\n",
            "tags": [
                "embeded",
                "linux",
                "3G",
                "4G",
                "3531a",
                "移植",
                "嵌入式"
            ]
        },
        {
            "id": "https://blog.17lai.site/posts/13894dce/",
            "url": "https://blog.17lai.site/posts/13894dce/",
            "title": "海思MPP&UNF构架源代码级分析",
            "date_published": "2021-07-01T10:25:00.000Z",
            "content_html": "<ul>\n<li>\n<p>文章写了好多年了，只在一个网站发布过<a href=\"http://bbs.ebaina.com/forum.php?mod=viewthread&amp;tid=14994&amp;extra=&amp;page=1\">PDF版本</a>，行业内应该很多人看过这个。由于早期笔记使用Word格式，转换格式时有不少格式错误，笔者尽量修正。</p>\n</li>\n<li>\n<p>关于本blog，<strong>图床</strong>一般使用<strong>github</strong>，已经配置了CDN，如果图片还是未显示请自行代理解决</p>\n</li>\n<li>\n<p><strong>原创声明警告</strong>，本文<strong>禁止转载</strong>，禁止发布到其它任何网站，可以接受约稿。</p>\n</li>\n</ul>\n<h2 id=\"前言：\">前言：</h2>\n<p>​    本文通过分析海思文档和代码，把海思SDK的MPI和UNF构架大概实现思想和构架进行了简略的分析。着重分析了内存管理，底层功能如何实现。</p>\n<p>​    前面章节简要分析了NVR芯片MPI构架及其内存管理机制，后面着重详细分析了3798M底层模块api和drv实现的细节过程及其方法流程。</p>\n<p>​    本文前面简略分析了DVR，MPI构架的大体实现机制。后面就具体分析3798M UNF构架的实现。</p>\n<p>本文不光分析了UNF构架，还使用了很多工具，辅助分析代码。这里从三个层面分析了UNF的实现。</p>\n<p>1: 应用层，驱动层的实现框架，使用source insight查看代码并着重分析了avplay等几个模块。</p>\n<p>2：静态分析函数调用。使用cflow，dot工具生成调用关系图</p>\n<p>3：动态追踪运行过程。Ltrace, strace, valgrind分析函数调用，perf动态分析内核调用。</p>\n<h2 id=\"1-Hi35xx系列芯片MPP构架\">1:Hi35xx系列芯片MPP构架</h2>\n<h3 id=\"1-1-概述\">1.1 概述</h3>\n<p>海思提供的媒体处理软件平台(Media Process Platform,简称 MPP)，可支持应用软件快速开发。该平台对应用软件屏蔽了芯片相关的复杂的底层处理，并对应用软件直接提供MPI（MPP Programe Interface）接口完成相应功能。该平台支持应用软件快速开发以下功能：输入视频捕获、H.264/MJPEG/JPEG/MPEG4 编码、H264/H.265/VC1/MPEG4/MPEG2/AVS 解码、视频输出显示、视频图像前处理（包括去噪、增强、锐化、Deinterlace） 、编码码流叠加 OSD、视频侦测分析、智能分析、音频捕获及输出、音频编解码等功能。</p>\n<h3 id=\"1-2-整体软硬件构架\">1.2 整体软硬件构架</h3>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730160509.png\" alt=\"\"></p>\n<p>MPP 平台支持的典型的系统层次如上图所示，主要分为以下层次：</p>\n<p><strong>硬件层</strong></p>\n<p>硬件层由 Hi35xx 芯片加上必要的外围器件构成。外围器件包括 Flash、DDR<br>\n（Double Data-Rate） 、视频 Sensor 或 AD、音频 AD 等。</p>\n<p><strong>操作系统层</strong></p>\n<p>基于 Linux 3.10.y 的 OS 系统。</p>\n<p><strong>媒体处理平台</strong></p>\n<p>基于操作系统层，控制芯片完成相应的媒体处理功能。它对应用层屏蔽了硬件处理细节，并为应用层提供 API 接口完成相应功能。</p>\n<p><strong>其他驱动</strong></p>\n<p>除媒体处理平台外,海思为 Hi35xx 芯片的其他相关硬件处理单元提供了相应的驱动,</p>\n<p>包括 GMAC、SDIO、I2C、USB、SSP 等驱动。</p>\n<p><strong>应用层</strong></p>\n<p>基于海思媒体处理平台及其他驱动，由用户开发的应用软件系统。</p>\n<h3 id=\"1-3-海思媒体处理平台架构\">1.3 海思媒体处理平台架构</h3>\n<p>海思媒体处理平台的主要内部处理流程如上图所示，主要分为视频输入（VI） 、视频处理（VPSS） 、视频编码（VENC） 、视频解码（VDEC） 、视频输出(VO)、视频侦测分析(VDA)、音频输入(AI)、音频输出(AO)、音频编码（AENC） 、音频解码（ADEC） 、区域管理（REGION）等模块。主要的处理流程介绍如下</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730160451.png\" alt=\"\"></p>\n<ul>\n<li>\n<p>VI 模块捕获视频图像，可对其做剪切、缩放、镜像等处理，并输出多路不同分辨<br>\n率的图像数据。</p>\n</li>\n<li>\n<p>解码模块对编码后的视频码流进行解码，并将解析后的图像数据送 VPSS 进行图<br>\n像处理或直接送 VO 显示。可对 H.264/H.265/VC1/MPEG4/MPEG2/AVS 格式的视<br>\n频码流进行解码。</p>\n</li>\n<li>\n<p>VPSS 模块接收 VI 和解码模块发送过来的图像，可对图像进行去噪、图像增强、<br>\n锐化等处理，并实现同源输出多路不同分辨率的图像数据用于编码、预览或抓<br>\n拍。</p>\n</li>\n<li>\n<p>编码模块接收 VI 捕获并经 VPSS 处理后输出的图像数据，可叠加用户通过 Region<br>\n模块设置的 OSD 图像，然后按不同协议进行编码并输出相应码流。<br>\nVDA 模块接收 VI 的输出图像，并进行移动侦测和遮挡侦测，最后输出侦测分析<br>\n结果。</p>\n</li>\n<li>\n<p>VO 模块接收 VPSS 处理后的输出图像，可进行播放控制等处理，最后按用户配置<br>\n的输出协议输出给外围视频设备。</p>\n</li>\n<li>\n<p>AI 模块捕获音频数据，然后 AENC 模块支持按多种音频协议对其进行编码，最后<br>\n输出音频码流。</p>\n</li>\n<li>\n<p>用户从网络或外围存储设备获取的音频码流可直接送给 ADEC 模块，ADEC 支持</p>\n</li>\n</ul>\n<h3 id=\"1-4-MMZ与模块绑定\">1.4 MMZ与模块绑定</h3>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730160438.png\" alt=\"\"></p>\n<p>MPP 提供系统绑定接口（HI_MPI_SYS_Bind） ，即通过数据接收者绑定数据源来建立</p>\n<p>两者之间的关联关系（只允许数据接收者绑定数据源） 。绑定后，数据源生成的数据将</p>\n<p>自动发送给接收者。</p>\n<p>Uboot环境变量中定义linux内核使用的内存大小</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">setenv 'mem=288M console=ttyAMA0,115200 root=/dev/mtdblock2 rootfstype=jffs2 mtdparts=hi_sfc:768K(boot),2304K(sdr021000),13M(rootfs)'</code></pre></div></figure>\n<p>加载内核模块分配MMZ内存大小</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">insmod mmz.ko mmz=anonymous,0,0x8E000000,792M anony=1</code></pre></div></figure>\n<p>例如512M的DDR</p>\n<p>DDR:</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">DDR:                                                          \n-----------|----------|  0x80000000   # Memory managed by OS.             \n   64M     |   OS     |                                                \n           |          |                                                \n-----------|----------|  0x84000000   # Memory managed by MMZ block anonymous.         \n   448M    |    MMZ   |                                                \n           |          |                                                \n-----------|----------|  0xA0000000   # Memory managed by MMZ block jpeg.                      </code></pre></div></figure>\n<h3 id=\"1-5-HiMPP-支持的绑定关系\">1.5 HiMPP 支持的绑定关系</h3>\n<table>\n<thead>\n<tr>\n<th>数据源</th>\n<th>数据接收者</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>VI</td>\n<td>VO</td>\n</tr>\n<tr>\n<td></td>\n<td>VENC</td>\n</tr>\n<tr>\n<td></td>\n<td>VDA</td>\n</tr>\n<tr>\n<td></td>\n<td>VPSS</td>\n</tr>\n<tr>\n<td></td>\n<td>PCIV</td>\n</tr>\n<tr>\n<td>VPSS</td>\n<td>VO</td>\n</tr>\n<tr>\n<td></td>\n<td>VENC</td>\n</tr>\n<tr>\n<td></td>\n<td>VDA</td>\n</tr>\n<tr>\n<td></td>\n<td>VPSS</td>\n</tr>\n<tr>\n<td></td>\n<td>PCIV</td>\n</tr>\n<tr>\n<td>VDEC</td>\n<td>VPSS</td>\n</tr>\n<tr>\n<td></td>\n<td>VO（只能是标清设备或 single 模式分割）</td>\n</tr>\n<tr>\n<td></td>\n<td>VDA</td>\n</tr>\n<tr>\n<td></td>\n<td>PCIV</td>\n</tr>\n<tr>\n<td>vo(WBC)</td>\n<td>VO</td>\n</tr>\n<tr>\n<td></td>\n<td>VENC</td>\n</tr>\n<tr>\n<td></td>\n<td>VPSS</td>\n</tr>\n<tr>\n<td></td>\n<td>PCIV</td>\n</tr>\n<tr>\n<td>AI</td>\n<td>AENC</td>\n</tr>\n<tr>\n<td></td>\n<td>AO</td>\n</tr>\n<tr>\n<td>ADEC</td>\n<td>AO</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"1-6-函数约定说明\">1.6 函数约定说明</h3>\n<ul>\n<li>\n<p>Open/Close<br>\nOpen/Close 操作用来打开、关闭那些可枚举的设备。</p>\n</li>\n<li>\n<p>Create/ Destroy<br>\nCreate/ Destroy 操作用来创建、销毁那些不可枚举的设备。</p>\n</li>\n<li>\n<p>Handle<br>\nHandle 用来标识一个“不可枚举”类型的设备。Handle 只在本进程内有效，也就是说 Handle 不可以跨进程传递Handle 是一个 32bit 的数据，其低 8bit 表示设备的 ID，高 16bit 表示模块 ID。比如0x00110000 表示模块 ID 为 0x11 的第 0 个设备。</p>\n</li>\n<li>\n<p>Attach /Detach<br>\nAttach/Detach 用来绑定、解绑定两个设备直接的关联。</p>\n</li>\n</ul>\n<p>Attach 后，目的设备将自动处于 Start/Enable 状态； Detach 后，目的设备将自动处于Stop/Disable 状态。<br>\n对于多级绑定，<strong>要求从最后一个设备逐级向前绑定，解绑定的顺序则相反，要求逐级向后。</strong>**<br>\n** 当绑定在一起的多个设备可以设置相同属性时，必须通过最后一个设备进行设置。</p>\n<ul>\n<li>\n<p>Get/Put<br>\nGet/Put 用来往某个模块输入数据。</p>\n</li>\n<li>\n<p>Acquire/Release<br>\nAcquire/Release 用来从某个模块获取数据。</p>\n</li>\n</ul>\n<p>Get/Put和Acquire/Release推荐成对使用</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155911.png\" alt=\"\"></p>\n<h3 id=\"1-7-MPP优缺点\">1.7 MPP优缺点</h3>\n<h4 id=\"1-7-1-MPP优点\">1.7.1 MPP优点</h4>\n<p>​    内存VB管理和模块绑定子系统，proc运行时调试信息是MPP构架节约用户时间最大的设计。</p>\n<p>​    大部分外围接口都封装好，用户调用接口直接使用，快速，方便。</p>\n<h4 id=\"1-7-2-MPP缺点\">1.7.2 MPP缺点</h4>\n<p>​    没有相应子系统的源代码。出了问题，有bug必须需要海思查看，解决。</p>\n<p>​    MPI接口和标准linux接口差异非常大，构架也不一样。有问题需要找海思。中间时间成本。</p>\n<p>不利于研发技术积累。</p>\n<h2 id=\"2-MPP和UNF对比\">2:  MPP和UNF对比</h2>\n<p>从函数命名，参数，使用方法来看。UNF和MPP分开比较早，UNF构架在上面函数约定说明基础上的MPI接口封装了一层，UNF-&gt;MPI调用，UNF开发支持更多的模块接口。MPP的模块接口比较固定，比UNF少得多，增强了MMZ内存，VB管理功能，模块绑定功能。</p>\n<p>MPP由HI_MPI_SYS_Bind来绑定两个模块，而UNF还是使用Hi_XXX_Attach来绑定两个模块。</p>\n<p>MPP内存管理MMZ，VB也比UNF更细致，强大。</p>\n<p>UNF支持更多的外设模块。如TUNER（广播电视），CIPHER（芯片内部加密），Subtitle（字幕），PDM（低功耗），SCI（智能卡），GPU等。</p>\n<p>UNF开源。在一些模块的实现中，也使用了一些开源项目，如FFmpeg，Alsa，wpa_supplicant等。</p>\n<h2 id=\"3-3798芯片UNF处理构架\">3:  3798芯片UNF处理构架</h2>\n<h3 id=\"3-1-应用架构\">3.1 应用架构</h3>\n<p>海思媒体处理平台（ MSP）实现了对海思高清机顶盒解决方案处理器中媒体、图形以<br>\n及外设的屏蔽和封装，对应用软件直接提供 API（ Application Program Interface）接口<br>\n完成相应功能。典型的应用架构如下图所示</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155841.png\" alt=\"\"></p>\n<p><strong>3798<strong><strong>比35xx</strong></strong>多了一个UNF<strong><strong>层，它在MPI</strong></strong>基础上进行了一层封装</strong></p>\n<p>软件架构主要包含以下 4 层：</p>\n<ul>\n<li>\n<p>UNF层</p>\n<p>媒体处理平台（ MSP）对外统一的应用开发接口。</p>\n</li>\n<li>\n<p>MPI层</p>\n<p>处理器各模块硬件能力实现层的用户态部分。</p>\n</li>\n<li>\n<p>DRV层</p>\n<p>处理器各模块硬件能力实现层的内核态部分。</p>\n</li>\n<li>\n<p>HAL层</p>\n<p>处理器各模块的硬件抽象层。</p>\n</li>\n</ul>\n<h3 id=\"3-2-3798SDK-概览（功能介绍）\">3.2 3798SDK 概览（功能介绍）</h3>\n<p>媒体处理平台（ MSP）中所有模块按照功能可以分为媒体处理，图形处理，外设处理 3<br>\n类：</p>\n<ul>\n<li>\n<p>媒体处理</p>\n<p>DEMUX、 AVPLAY、 SOUND、 DISPLAY、 VO、 HDMI、 PVR、 VDEC、 VENC、<br>\nADEC、 AENC、 VI、 AI</p>\n</li>\n<li>\n<p>图形处理</p>\n<p>HIFB、 HIGO、 TDE、 JPEG、 JPGE、 GPU</p>\n</li>\n<li>\n<p>外设处理</p>\n<p>Cipher、 OTP、 PMOC、 Frontend、 I2C、 SCI、 KEYLED、 GPIO、 IR、 WDG、 C51</p>\n</li>\n</ul>\n<h3 id=\"3-3-3798内存管理\">3.3 3798内存管理</h3>\n<h4 id=\"3-3-1-Mmz内存\">3.3.1 Mmz内存</h4>\n<p>3798的mmz内存在uboot bootargs环境变量中分配，在内核中大块连续内存使用dma_alloc_from_contiguous（drv/mmz/drv_media_mem_v2.c）来分配内存， 小块内存使用kmalloc分配，并且使用内核链表标记管理。和应用层交互使用mamp，umamp，并使用内核链表管理内存。这点和35xx DVR芯片有很大区别，DVR芯片模块内存和linux内核使用内存不再一个地方，应该是通过物理地址往虚拟地址映射来使用的。</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># cat /proc/cmdline\nmem=1G console=ttyAMA0,115200 root=/dev/romblock3 rootfstype=squashfs mtdparts=hinand:5M(boot),1M(baseparam),7M(kernel),18M(rootfs),64M(appfs),16M(qte),4M(config),12M(log),1M(logo) mmz=ddr,0,0,500M</code></pre></div></figure>\n<p>具体就是在bootargs中配置mem=1G mmz=ddr,0,0,435M</p>\n<p>查看内存使用情况跟监控相同，通过cat /proc/media-mem</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155600.png\" alt=\"\"></p>\n<h4 id=\"3-3-2-解码vid内存\">3.3.2 解码vid内存</h4>\n<p>关于码流解码过程中视频缓冲buffer u32VidBufSize配置：</p>\n<p>创建avplay时，可以指定视频es buf大小，参考如下代码</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">Ret = HI_UNF_AVPLAY_GetDefaultConfig(&amp;AvplayAttr, HI_UNF_AVPLAY_STREAM_TYPE_ES);\nAvplayAttr.stStreamAttr.u32VidBufSize = 2*1024*1024;\nRet |= HI_UNF_AVPLAY_Create(&amp;AvplayAttr, &amp;hAvplay[i]);</code></pre></div></figure>\n<p>Es buf的作用存储码流原始es流。</p>\n<p>这个buffer的大小跟码流分辨率、码率都有关系，一般情况下，D1/720P/1080P/4K 码流的配置为 2M/3M/5M/16M 即可，特殊码流除外。</p>\n<h3 id=\"3-4-3798模块\">3.4 3798模块</h3>\n<h4 id=\"DEMUX：\">DEMUX：</h4>\n<p>​\t数据输入模块。IF，TSI，RAM。</p>\n<p>​\tNVR使用的是RAM接口输入ES码流。</p>\n<h4 id=\"VI\">VI:</h4>\n<p>虚拟VI</p>\n<h4 id=\"VDEC\">VDEC</h4>\n<p>​\t解码器模块提供一组函数指针，供解码使用。目前有264，mpeg4两个。</p>\n<p>视频解码的简单流程是：<br>\n步骤 1 VDEC 从 Demux 或 ES buffer 获取 ES 数据送 Firmware 进行解码（ Firmware: StreamInput(VDEC-&gt;Firmware)）。<br>\n步骤 2 Firmware 将解码完的 1D 或者 2D 帧存放在帧 buffer 中。<br>\n步骤 3 VDEC 从帧 buffer 中获取（ Firmware: Frame Output(Firmware-&gt;VDEC)）视频帧放入其帧队列中。<br>\n步骤 4 VPSS 在线程中从 VDEC 的帧队列中取帧做解码后处理（ Frame Output(VDEC-&gt;VPSS)）。<br>\n步骤 5 AVPLAY 向 VDEC 获取视频帧， VDEC 从 VPSS 获取视频帧返回给 AVPLAY。</p>\n<h4 id=\"SYNC：\">SYNC：</h4>\n<p>音视频同步工具</p>\n<h4 id=\"DISPLAY：显示设备\">DISPLAY：显示设备</h4>\n<h4 id=\"WINDOW：显示通道\">WINDOW：显示通道</h4>\n<p>msp 目录下的“ windowXXYY”节点的中的 XX 为显示通道的编号， YY 为 window 序号。比如 window0100， bit[15:8]的 01 表示该 window 基于 DISPLAY1 创建， bit[7:0]的00 表示 window 序号为 0。有支持3D显示</p>\n<p>DISP（ Display）模块接收 WINDOW 提供的视频图像、 Frame Buffer 提供的图形画<br>\n面，进行图像叠加处理和图像色彩调节，并将叠加后图像通过多种视频输出端口输出<br>\n给显示设备；此外， DISP 支持获取视频输出端口上的包含视频和图形的完整图像。</p>\n<p>窗口类型</p>\n<ul>\n<li>Display：独立显示窗口</li>\n<li>Virtual：虚拟窗口</li>\n<li>Main：同源显示主窗口</li>\n<li>Slave：同源显示从窗口</li>\n</ul>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155307.png\" alt=\"\"></p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155256.png\" alt=\"\"></p>\n<h4 id=\"SO（-Subtitle-Output）\">SO（ Subtitle Output）</h4>\n<h4 id=\"PDM\">PDM</h4>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155248.png\" alt=\"\"></p>\n<p>PDM(Product Data Manager)模块用于管理与产品相关的数据，包括基本参数、开机画<br>\n面参数及数据、瞬播参数及数据的管理</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155410.png\" alt=\"\"></p>\n<p>用户通过镜像制作工具制作基本参数镜像与瞬播镜像，通过烧写工具烧写至 FLASH，PDM 模块在 BOOT 下将基本参数及瞬播数据读入内存，并传递至 KERNEL。 KERNEL下瞬播从 PDM 模块获取参数及数据，调用 DEMUX、 VDEC、 VO 等模块驱动，完成瞬播播放</p>\n<p>demux</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155234.png\" alt=\"\"></p>\n<p>DEMUX 模块接收 DEMOD 或内存中的 TS 流，按客户应用程序（下简称 APP）的设<br>\n置提取出其中的 SEC 数据、 PES 数据、 TS 数据、音频数据和视频数据。 APP 获取<br>\nSEC 数据、 PES 数据和 TS 数据进行处理。 AVPLAY 获取音频数据进行处理， VDEC 获<br>\n取视频数据进行处理。</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155217.png\" alt=\"\"></p>\n<p>AVPLAY 主要依赖 ADEC/VDEC/DEMUX 等模块，其向应用或中间件播放器提供基本<br>\n的播放业务相关接口。</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155202.png\" alt=\"\"></p>\n<h3 id=\"3-5-3798和NVR模块使用方面区别：\">3.5 3798和NVR模块使用方面区别：</h3>\n<p>3798模块中vpss，sync等模块是其它模块自动创建，自动绑定处理的。这点和NVR系列芯片差别很大，nvr中vi，vpss，vo都需要用户自己绑定，设置属性，而3798中vpss，vo创建，属性设置是在上层模块中自动处理的（少量设置属性上层传递下去）。</p>\n<p>​    简单来说，MPP接口只实现了基本的功能接口，没有封装或很少封装。</p>\n<p>UNF 应用层实现了很多业务接口，对底层驱动进行了多层封装，并且实现了一些常用的业务。</p>\n<h2 id=\"4-3798代码祥看\">4: 3798代码祥看</h2>\n<h3 id=\"4-1-分析方法\">4.1 分析方法</h3>\n<h4 id=\"4-1-1：查看代码，静态分析应用层，驱动层实现方法\">4.1.1：查看代码，静态分析应用层，驱动层实现方法</h4>\n<p>​    使用Source insight分析kernel，msp代码。</p>\n<h4 id=\"4-1-2：图示静态分析函数调用关系\">4.1.2：图示静态分析函数调用关系</h4>\n<p>​    使用cflow， tree2dotx，和dot生成函数静态调用图。</p>\n<h4 id=\"4-1-3：图示动态分析函数调用关系：库函数，系统调用，内核调用\">4.1.3：图示动态分析函数调用关系：库函数，系统调用，内核调用</h4>\n<ul>\n<li>​    使用ltrace分析系统库函数</li>\n<li>​    strace分析系统调用流程</li>\n<li>​    使用Ftrace，valgrind，gprof2dot生成运行时调用图。</li>\n<li>​    Perf分析内核空间调用。发现一些依赖库在ubuntu12.04里面不可用。</li>\n</ul>\n<p>这一步实现了valgrind动态分析，其它的几个工具需要交叉编译，TODO。使用Perf可能需要换更新的linux版本。</p>\n<p>其它还有time(大概运行时间)，gconv（覆盖率统计）等分析方式。</p>\n<h3 id=\"4-2-基础模块：hi-media-hi-mmz-hi-common\">4.2 基础模块：hi_media hi_mmz hi_common</h3>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730155123.png\" alt=\"\"></p>\n<p>​    可以从lsmod中很清晰的看出来hi_media hi_mmz hi_common这几个模块的基础地位。hi_media基础模块管理，hi_mmz提供内存管理，hi_common提供proc，log等基础功能，符号导出供其他海思模块使用。</p>\n<p>Common</p>\n<ul>\n<li>COMMON 模块是 SDK 的基础模块，提供的 API 主要供 SDK 的其他模块调用。<br>\nCOMMON 模块现在主要有以下功能：\n<ul>\n<li>系统初始化和去初始化；</li>\n<li>版本信息获取；</li>\n<li>获取时间戳；</li>\n<li>寄存器读写、映射功能；</li>\n<li>MMZ 内存使用；</li>\n<li>调试信息控制；</li>\n<li>Flash 操作。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"4-2-1-基本通用模块应用层接口common-api\">4.2.1 基本通用模块应用层接口common/api</h4>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">HiSTBLinuxFS/source/common/api\nmpi_mem.c\nMEM_POOL_Init 应用层的内存池，重复利用。\nmpi_memmap.c\n映射使用链表区分。管理mmap映射\n \n \nmpi_module.c\nHI_MODULE_Init中有打开内存操作，内存统一管理。\n模块id，名称注册，相互查找。\n \nmpi_stat.c\n线程时间归零，等相关处理\n \nhi_common.c\nproc，sys一些路径目录增删提供了用户层接口，mmz内存管理用户层接口\n \nmpi_userproc\n用户层提供线程 通用proc接口，proc读写是在其它模块内部实现的，函数指针形式\n \n \n注：himedia 相关模块是海思自己实现的内核子系统。有自己实现的总线，驱动，设备模型结构体。也是在标准linux模型基础上封装的。\n </code></pre></div></figure>\n<h4 id=\"4-2-2-基本通用模块驱动接口common-dev\">4.2.2 基本通用模块驱动接口common/dev</h4>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">HiSTBLinuxFS/source/common/dev\ndrv_dev_ext_k.c 重要\nHI_DRV_DEV_Init 所有模块宏定义在这里，注册模块结构体在这里\nhimedia.c himedia_bash.c     模块注册，注销基础函数\n#define DYNAMIC_MINORS 128 /* like dynamic majors */            himedia主设备号218\nstatic unsigned char himedia_minors[DYNAMIC_MINORS / 8];\n \ntypedef struct tagPM_BASEDEV_S{\n    HI_S32        id;\n    const HI_S8    * name;\n    struct device    dev;\n}PM_BASEDEV_S;\n \n#define TO_PM_BASEDEV(x) container_of((x), PM_BASEDEV_S, dev)\n \ntypedef struct tagPM_BASEOPS_S {\n    HI_S32  (*probe)(PM_BASEDEV_S *);\n    HI_S32  (*remove)(PM_BASEDEV_S *);\n    HI_VOID (*shutdown)(PM_BASEDEV_S *);\n    HI_S32  (*prepare)(PM_BASEDEV_S *);\n    HI_VOID (*complete)(PM_BASEDEV_S *);\n    HI_S32  (*suspend)(PM_BASEDEV_S *, pm_message_t state);\n    HI_S32  (*suspend_late)(PM_BASEDEV_S *, pm_message_t state);\n    HI_S32  (*resume_early)(PM_BASEDEV_S *);\n    HI_S32  (*resume)(PM_BASEDEV_S *);\n}PM_BASEOPS_S;\n \n \ntypedef struct tagPM_BASEDRV_S {\n    HI_S32  (*probe) (PM_BASEDEV_S *);\n    HI_S32  (*remove)(PM_BASEDEV_S *);\n    HI_VOID (*shutdown)(PM_BASEDEV_S *);\n    HI_S32  (*suspend)(PM_BASEDEV_S *, pm_message_t state);\n    HI_S32  (*suspend_late)(PM_BASEDEV_S *, pm_message_t state);\n    HI_S32  (*resume_early)(PM_BASEDEV_S *);\n    HI_S32  (*resume)(PM_BASEDEV_S *);\n    struct device_driver driver;\n}PM_BASEDRV_S;\n \ntypedef struct tagPM_DEVICE_S  {\n    HI_S32 minor;\n    const HI_S8 *name;\n    struct module *owner;\n    const struct file_operations *app_ops;\n    PM_BASEOPS_S *base_ops;\n    struct list_head list;\n    struct device *app_device;\n    PM_BASEDEV_S *base_device;\n    PM_BASEDRV_S *base_driver;\n}PM_DEVICE_S;\n \nstatic struct class *himedia_class;\nstatic struct file_operations himedia_fops = {\n    .owner        = THIS_MODULE,\n    .open        = himedia_open,\n};\n </code></pre></div></figure>\n<h5 id=\"设备模型结构体\">设备模型结构体</h5>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">struct himedia_devobj {\n    PM_BASEDEV_S pdev;\n    char name[1];\n};\n \ntypedef struct tagPM_BASEDEV_S{\n    HI_S32        id;\n    const HI_S8    * name;\n    struct device    dev;\n}PM_BASEDEV_S;\n </code></pre></div></figure>\n<h5 id=\"海思模块顶层总线himedia-bus\">海思模块顶层总线himedia_bus</h5>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">struct device himedia_bus = {\n         .init_name        = \"himediaBusDev\",\n         .release    = himedia_bus_release\n};  /*top level bus, parent and bus member are both NULL*//*CNcomment:这是顶层总线，parent 和 bus 成员为 NULL*/\nstruct bus_type himedia_bus_type = {\n         .name                = \"himediaBus\",\n         .dev_attrs        = himedia_dev_attrs,\n         .match               = himedia_match,\n         .uevent              = himedia_uevent,\n         .pm                     = HIMEDIA_PM_OPS_PTR,\n};\n定义HIMEDIA_PM_OPS_PTR\n                            static struct dev_pm_ops himedia_dev_pm_ops = {\n                                     .prepare        = himedia_pm_prepare,\n                                     .complete       = himedia_pm_complete,\n                                     .suspend        = himedia_pm_suspend,\n                                     .resume         = himedia_pm_resume,\n                                     .freeze         = himedia_pm_freeze,\n                                     .thaw           = himedia_pm_thaw,\n                                     .poweroff       = himedia_pm_poweroff,\n                                     .restore        = himedia_pm_restore,\n                                     .suspend_noirq  = himedia_pm_suspend_noirq,\n                                     .resume_noirq   = himedia_pm_resume_noirq,\n                                     .freeze_noirq   = himedia_pm_freeze_noirq,\n                                     .thaw_noirq     = himedia_pm_thaw_noirq,\n                                     .poweroff_noirq = himedia_pm_poweroff_noirq,\n                                     .restore_noirq  = himedia_pm_restore_noirq,\n                            };\n                            #define HIMEDIA_PM_OPS_PTR     (&amp;himedia_dev_pm_ops)</code></pre></div></figure>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730154854.png\" alt=\"\"></p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730154845.png\" alt=\"\"></p>\n<h5 id=\"内核到用户往用户空间写文件调试\">内核到用户往用户空间写文件调试</h5>\n<p>drv_file_ext.c 提供内核空间创建，读写用户空间文件函数，/mnt文件存储路径。提供了内核数据导出到用户空间的方法。</p>\n<p>应该是echo * &gt; /proc/msp/** 这种调试方式的实现方式</p>\n<h5 id=\"内核log日志\">内核log日志</h5>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">drv_log_ioctl.h  打印日志相关。  这里日志位置可选0:串口 1:网络 2:U盘\n/*structure of mode log level */\n/*CNcomment: 模块打印级别控制信息结构 */\ntypedef struct hiLOG_CONFIG_INFO_S\n{\n    HI_U8 ModName[16+12];     /*mode name 16 + '_' 1 + pid 10 */\n    HI_U8 u8LogLevel;         /*log level*//*CNcomment:  模块打印级别控制 */\n    HI_U8 u8LogPrintPos;      /*log output location, 0:serial port; 1:network;2:u-disk*//*CNcomment:  模块打印位置控制 0:串口 1:网络 2:U盘 */\n    HI_U8 u8UdiskFlag;        /* u-disk log flag */\n}LOG_CONFIG_INFO_S;\n\nhi_debug.h    log调试级别\n/**Default level of the output debugging information*/\n/**CNcomment: 默认的调试信息输出级别*/\n#define HI_LOG_LEVEL_DEFAULT HI_LOG_LEVEL_ERROR\n \n/**Level of the output debugging information*/\n/**CNcomment: 调试信息输出级别*/\ntypedef enum hiLOG_LEVEL_E\n{\n    HI_LOG_LEVEL_FATAL   = 0,     /**&lt;Fatal error. It indicates that a critical problem occurs in the system. Therefore, you must pay attention to it.*/\n                                  /**&lt;CNcomment: 致命错误, 此类错误需要特别关注，一般出现此类错误代表系统出现了重大问题 */\n    HI_LOG_LEVEL_ERROR   = 1,     /**&lt;Major error. It indicates that a major problem occurs in the system and the system cannot run.*/\n                                  /**&lt;CNcomment: 一般错误, 一般出现此类错误代表系统出现了比较大的问题，不能再正常运行 */\n    HI_LOG_LEVEL_WARNING = 2,     /**&lt;Warning. It indicates that a minor problem occurs in the system, but the system still can run properly.*/\n                                  /**&lt;CNcomment: 告警信息, 一般出现此类信息代表系统可能出现问题，但是还能继续运行 */\n    HI_LOG_LEVEL_INFO    = 3,     /**&lt;Message. It is used to prompt users. Users can open the message when locating problems. It is recommended to disable this message in general.*/\n                                  /**&lt;CNcomment: 提示信息, 一般是为提醒用户而输出，在定位问题的时候可以打开，一般情况下建议关闭 */\n    HI_LOG_LEVEL_DBG     = 4,     /**&lt;Debug. It is used to prompt developers. Developers can open the message when locating problems. It is recommended to disable this message in general.*/\n                                  /**&lt;CNcomment: 提示信息, 一般是为开发人员调试问题而设定的打印级别，一般情况下建议关闭 */\n \n    HI_LOG_LEVEL_BUTT\n} HI_LOG_LEVEL_E;\n \ndrv_media_mem_v2.c    实现了cat /proc/media-mem\n \ndrv_mem_ext.c 实现了 KMEM_POOL_S 的管理，</code></pre></div></figure>\n<h5 id=\"内核模块管理\">内核模块管理</h5>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">drv_module_ext.c\n\nCOMMON_DRV_ModInit\n\n         MMNGR_DRV_ModInit\n\n        \n\n    s32Ret = HI_DRV_MODULE_Register(HI_ID_SYS,    \"HI_SYS\",      HI_NULL);\n\n    s32Ret |= HI_DRV_MODULE_Register(HI_ID_MODULE, \"HI_MODULE\",   HI_NULL);\n\n    s32Ret |= HI_DRV_MODULE_Register(HI_ID_LOG,    \"HI_LOG\",      HI_NULL);\n\n    s32Ret |= HI_DRV_MODULE_Register(HI_ID_PROC,   \"HI_PROC\",     HI_NULL);\n\n    s32Ret |= HI_DRV_MODULE_Register(HI_ID_STAT,   \"HI_STAT\",     HI_NULL);\n\n    s32Ret |= HI_DRV_MODULE_Register(HI_ID_MEM,    \"HI_MEM\",      HI_NULL);\n\n \n\ndrv_media_mem.c  使用dma_alloc_from_contiguous来分配\n\nHI_DRV_MMZ_Init 这里根据bootargs传递的mmz参数分配内存大小。 mmz分配时的参数：&lt;mmz_name&gt;,&lt;gfp&gt;,&lt;phys_start_addr&gt;,&lt;size&gt;,&lt;alloc_type&gt;\"</code></pre></div></figure>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730154720.png\" alt=\"\"></p>\n<h5 id=\"内核Proc的实现\">内核Proc的实现</h5>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">drv_proc_ext.c\nHI_DRV_PROC_Init 实现cat /proc/hisi/msp/\n    proc_mkdir(\"graphics\", g_pHisi_proc);\n    proc_symlink(\"msp\", NULL, \"hisi/msp\");\n    proc_symlink(\"graphics\", NULL, \"hisi/graphics\");</code></pre></div></figure>\n<p>drv_userproc.c    proc使用红黑树管理目录路径</p>\n<p>​    创建销毁目录，路径在这里实现，具体每一个不同模块的proc文件读写在每个模块内部实现，使用函数指针。</p>\n<h4 id=\"4-2-3-业务模块应用层通用组件source-component\">4.2.3 业务模块应用层通用组件source/component</h4>\n<p>/home/andy/HiSTBLinuxFS/source/component  <a href=\"http://xn--ciqz3l2zejvhba81ax77b534ada8984d6qek8t.so\">这个目录里面很多目录只有.so</a> .a库，没有源代码。</p>\n<p>/source/component/hiplayer 没有源码。</p>\n<p>hi_debug.h   各种调试宏定义，不同级别调试定义</p>\n<p>HI_MALLOC   内存分配使用了内核链表管理</p>\n<p>内存在一个模块内分配，往用户空间传递物理地址，其它模块使用这个物理地址映射到虚拟地址，这样来共享内存</p>\n<p>​    海思这里大多数模块都只提供了编译后的库</p>\n<h3 id=\"4-3-海思专用组件\">4.3 海思专用组件</h3>\n<h4 id=\"4-3-1-海思MSP模块应用层接口source-msp-api\">4.3.1 海思MSP模块应用层接口source/msp/api</h4>\n<h5 id=\"Avplay分析\">Avplay分析</h5>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">HI_MPI_AVPLAY_Create\n         AVPLAY_FrcCreate  帧率控制？    \n         HI_MPI_SYNC_Create     音视频同步\n         AVPLAY_CreateThread</code></pre></div></figure>\n<p>​     <img src=\"https://cimg1.17lai.site/data/2021/07/3020210730154354.svg\" alt=\"HI_MPI_AVPLAY_Create.__avplay_mpi_avplay_c\"></p>\n<p>上图插图的是svg格式图片，可以使用IE，firefox打开，最好使用专门的看图软件打开。</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">HI_MPI_VDEC_AllocChan\n         VPSS_Control(pstVdec-&gt;hVdec,VPSS_CMD_CREATEVPSS,&amp;(pstVdec-&gt;hVpss))\n        \nUNF调用一般过程，最终采用ioctl调用驱动   \nHI_UNF_AVPLAY_GetBuf\n         HI_MPI_AVPLAY_GetBuf\n                   HI_MPI_VDEC_ChanGetBuffer\n                            VDEC_GetStreamBuf                /* If get but not put, return last address */    这里有对不对称调用特殊处理\n                                     ioctl(s_stVdecAdpParam.s32DevFd, UMAPC_VDEC_GETBUF, &amp;stBufParam);     \n                                    \nHI_MPI_AVPLAY_Start\n         AVPLAY_StartVidChn\n                   HI_MPI_SYNC_Start\n                   HI_MPI_VDEC_ChanStart\n                             ioctl(g_SyncDevFd, CMD_SYNC_START_SYNC, &amp;SyncId);\n         HI_MPI_SYNC_Play 结构体状态改变\n         AVPLAY_Play             结构体状态控制\n         HI_MPI_STAT_Event                                   \n \nHI_MPI_AVPLAY_Stop\n         AVPLAY_StopVidChn\n                   HI_MPI_VDEC_ChanStop\n                            VDEC_ChanStop      这里调用函数指针\n                   HI_MPI_VDEC_ResetChan\n                            VDEC_ResetStreamBuf\n                            VDEC_VPSSCMD(hVdec, VPSS_CMD_RESETVPSS, HI_NULL);         调用函数指针，指向VPSS_Control\n                   AVPLAY_ResetWindow\n                   HI_MPI_SYNC_Stop\n         HI_MPI_STAT_Event(STAT_EVENT_VSTOP, 0);\n \nVDEC使用函数指针集来支持多种解码方式，内部vfmw。mjpeg，内部硬件265协处理器\nmpi_vdec_vpu.c\nHI_MPI_VDEC_Init\n         HI_CODEC_Register(VDEC_MJPEG_Codec());\n         HI_CODEC_Register(VDEC_VFMW_Codec());\n \nstatic HI_CODEC_S hi_codecVPU_entry =\n{\n    .pszName                  = \"VPU\",\n    .unVersion                 = {.stVersion = {1, 0, 0, 0}},\n    .pszDescription = \"Hisilicon H265 codec\",\n \n    .GetCap                      = HI_VPU_GetCap,\n    .Create                       = HI_VPU_Create,\n    .Destroy            = HI_VPU_Destroy,\n    .Start                           = HI_VPU_Start,\n    .Stop                            = HI_VPU_Stop,\n    .Reset                         = HI_VPU_Reset,\n    .SetAttr             = HI_VPU_SetAttr,\n    .GetAttr            = HI_VPU_GetAttr,\n    .DecodeFrame          = HI_VPU_DecodeFrame,\n    .EncodeFrame = HI_NULL,\n    .RegFrameBuffer = HI_VPU_RegFrameBuffer,\n    .GetStreamInfo        = HI_VPU_GetStreamInfo,\n    .Control             = HI_VPU_Control,\n};\n \navplay，vi和 vo之间使用vpss关联。\nHI_UNF_VO_DetachWindow\n         HI_MPI_AVPLAY_DetachWindow\n                   HI_MPI_VDEC_DestroyPort\n         HI_MPI_VI_Detach(hSrc, hWindow);\n                   VI_DetachFromVpss\n        \nHI_MPI_AVPLAY_ChnClose\n         AVPLAY_FreeVidChn\n                   HI_MPI_VDEC_ChanBufferDeInit\n                            VDEC_VFMWSpecCMD(hVdec, VFMW_CMD_DETACHBUF, HI_NULL);\n                            VDEC_DestroyStreamBuf(pstVdec-&gt;hStreamBuf);                   ummap内存块，ioctl通知内核vdec销毁内存\n                   AVPLAY_FreeVdec\n                            HI_MPI_VDEC_FreeChan\n                                     VPSS_Control(pstVdec-&gt;hVdec,VPSS_CMD_DESTORYVPSS,&amp;(pstVdec-&gt;hVpss));\n                                     VDEC_DestroyCodec(pstVdec);\n \nHI_UNF_AVPLAY_Destroy\n         HI_MPI_AVPLAY_Destroy\n                   HI_MPI_SYNC_Destroy(pAvplay-&gt;hSync);\n                   ioctl(g_AvplayDevFd, CMD_AVPLAY_DESTROY, &amp;AvplayUsrAddr.AvplayId);\n                  \navplay内部的线程\n    (HI_VOID)pthread_join(pAvplay-&gt;AvplayDataThdInst, HI_NULL);\n#ifdef AVPLAY_VID_THREAD\n    (HI_VOID)pthread_join(pAvplay-&gt;AvplayVidDataThdInst, HI_NULL);\n#endif\n    (HI_VOID)pthread_join(pAvplay-&gt;AvplayStatThdInst, HI_NULL);          </code></pre></div></figure>\n<h4 id=\"4-3-2-海思MSP模块驱动层接口source-msp-drv\">4.3.2 海思MSP模块驱动层接口source/msp/drv/</h4>\n<h5 id=\"VENC\">VENC</h5>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730161000.png\" alt=\"\"></p>\n<p>VENC 模块的具体工作原理如上图所示，注意图中褐色箭头，是 VENC 调用到VPSS 模块，来对帧信息做缩放处理后编码的数据流，该处理只用于外部用户送帧的模式。若在绑定情况下出现帧信息分辨率与编码分辨率不匹配， VENC 模块会通知绑定的前级模块进行缩放处理，而不会自行调用 VPSS 模块缩放。</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">VENC_DRV_ModInit\n         VENC_DRV_Init\n                   HI_DRV_MODULE_Register(HI_ID_VENC, \"HI_VENC\", (HI_VOID*)&amp;s_VencExportFuncs);\n                            MODULE_DRV_Register\n                                     ModuleMgr_Link_AddNode(g_pstKModuleHeader, &amp;stModule); 链表管理\n                                     LOGAddModule((HI_PCHAR)pu8ModuleName, (HI_MOD_ID_E)u32ModuleID);  在log模块中注册\n         HI_DRV_DEV_Register(&amp;g_VencRegisterData)\n                   HI_DRV_PM_Register     海思模块管理非常重要的模块，了解这个函数实现过程就大概明白海思内核模块实现思想了\n         VENC_DRV_BoardDeinit();      一些寄存器配置，reset，clock操作。\n         venc调用硬件协处理器，涉及263,264，mpeg4，\n    snprintf(g_VencRegisterData.devfs_name, 64, \"%s\", UMAP_DEVNAME_VENC);\n    g_VencRegisterData.fops   = &amp;VENC_FOPS;\n    g_VencRegisterData.minor  = UMAP_MIN_MINOR_VENC;\n    g_VencRegisterData.owner  = THIS_MODULE;\n    g_VencRegisterData.drvops = &amp;venc_drvops;      </code></pre></div></figure>\n<h5 id=\"avplay\">avplay</h5>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730154040.png\" alt=\"\"></p>\n<ul>\n<li>AVPLAY 主要由以下三部分组成：\n<ul>\n<li>音视频解码器</li>\n<li>同步播放控制模块</li>\n<li>命令与状态管理模块</li>\n</ul>\n</li>\n</ul>\n<p>主要负责响应外部控制命令的执行、状态查询上报、使解码后的帧数据通过同步控制<br>\n模块输出</p>\n<h5 id=\"avplay初始化分析\">avplay初始化分析</h5>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">AVPLAY_DRV_ModInit\n​    HI_DRV_MODULE_Register\n​         HI_DRV_MODULE_Register(HI_ID_AVPLAY, AVPLAY_NAME, HI_NULL);\n​             ModuleMgr_Link_AddNode  内核模块管理\n​             KMODULE_MEM_POOL_AddModule\n​                 KMODULE_MEM_POOL_FindNode    找到空的没有使用的节点\n​                 KMODULE_MEM_POOL_MALLOC 分配内存，然后放到链表\n​             LOGAddModule                    日志\n​    HI_DRV_DEV_Register(&amp;g_AvplayRegisterData)\n​         HI_DRV_PM_Register(&amp;s_umap_devs[i]);   himedia封装处理\n​             himedia_device_alloc(himedia-&gt;name, -1);\n​             himedia_device_add(bdev);\n​                 dev_set_name(&amp;pdev-&gt;dev, \"%s.%d\", pdev-&gt;name, pdev-&gt;id);\n​                 device_add(&amp;pdev-&gt;dev);\n​             device_create(himedia_class, &amp;(bdev-&gt;dev), dev, NULL, \"%s\", himedia-&gt;name);\n​             himedia_driver_alloc(himedia-&gt;name, himedia-&gt;owner, himedia-&gt;base_ops);\n​             himedia_driver_register(bdrv);\n​                 driver_register(&amp;drv-&gt;driver);\n​   \n \n  g_AvplayRegisterData.fops = &amp;AVPLAY_FOPS;\n  g_AvplayRegisterData.minor = UMAP_MIN_MINOR_AVPLAY;\n  g_AvplayRegisterData.owner = THIS_MODULE;\n  g_AvplayRegisterData.drvops = &amp;AVPLAY_DRVOPS;  \n \n  s_umap_devs[i].minor = umapd-&gt;minor;\n  s_umap_devs[i].name = umapd-&gt;devfs_name;\n  s_umap_devs[i].owner = umapd-&gt;owner;\n  s_umap_devs[i].app_ops = umapd-&gt;fops;\n  s_umap_devs[i].base_ops = umapd-&gt;drvops;</code></pre></div></figure>\n<h5 id=\"IOCTL实现分析-基于avplay\">IOCTL实现分析 基于avplay</h5>\n<p>在HI_DRV_DEV_Register<strong>中注册</strong></p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">static struct file_operations AVPLAY_FOPS =\n{\n    .owner          =  THIS_MODULE,\n    .open           =  AVPLAY_DRV_Open,\n    .unlocked_ioctl =  AVPLAY_DRV_Ioctl,\n    .release        =  AVPLAY_DRV_Close,\n};      \nAVPLAY_DRV_Ioctl\n         HI_DRV_UserCopy(ffile-&gt;f_dentry-&gt;d_inode, ffile, cmd, arg, AVPLAY_Ioctl);\n                   func(inode, file, cmd, (parg));           这里对ioctl进行了一层封装，copy_from_user，copy_to_user的自动化处理\nAVPLAY_Ioctl(struct inode *inode, struct file *file, unsigned int cmd, HI_VOID *arg)  \n                   CMD_AVPLAY_CREATE            \n                            AVPLAY_Create\n                                     HI_DRV_MMZ_AllocAndMap(BufName, MMZ_OTHERS, 0x2000, 0, &amp;MemBuf);\n                                     HI_DRV_PROC_AddModule(ProcName, HI_NULL, HI_NULL);                 这里实现了proc目录的生成，下面是读写proc\n                                pProcItem-&gt;read = AVPLAY_ProcRead;\n                                pProcItem-&gt;write = AVPLAY_ProcWrite;</code></pre></div></figure>\n<h5 id=\"avplay-多个实例如何找到对应实例\">avplay 多个实例如何找到对应实例</h5>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">AVPLAY_GET_INST_AND_LOCK();\n         AVPLAY_CheckHandle\n                   pAvplayUsrAddr-&gt;AvplayId = hAvplay &amp; 0xff;\n                   ioctl(g_AvplayDevFd, CMD_AVPLAY_CHECK_ID, pAvplayUsrAddr);</code></pre></div></figure>\n<p>drv中的实现</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">AVPLAY_Ioctl            \n         AVPLAY_CheckId              \n                   pAvplayUsrAddr-&gt;AvplayUsrAddr = g_AvplayGlobalState.AvplayInfo[pAvplayUsrAddr-&gt;AvplayId].AvplayUsrAddr;</code></pre></div></figure>\n<h5 id=\"VPSS\">VPSS</h5>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153749.png\" alt=\"\"></p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">    g_VpssRegisterData.fops   = &amp;s_VpssFileOps;\n    g_VpssRegisterData.minor  = UMAP_MIN_MINOR_VPSS;\n    g_VpssRegisterData.owner  = THIS_MODULE;\ng_VpssRegisterData.drvops = &amp;s_VpssBasicOps;\nVPSS_DRV_Init\nVPSS_CTRL_Init\n         VPSS_CTRL_RegistISR     注册中断\n         VPSS_CTRL_InitInstList((VPSS_IP_E)i)     管理vpss实例链表初始化\n         VPSS_HAL_Init                   内存，寄存器配置\n         VPSS_CTRL_CreateThread      内核线程\n                   VPSS_CTRL_ThreadProc\n                            VPSS_CTRL_CreateTask           创建任务\n                            VPSS_CTRL_StartTask               开始任务</code></pre></div></figure>\n<h5 id=\"VDEC-2\">VDEC</h5>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153702.png\" alt=\"\"></p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153709.png\" alt=\"\"></p>\n<h5 id=\"Avplay解码ES流过程\">Avplay解码ES流过程</h5>\n<p>步骤 1 初始化并配置相关设备，如 DISPLAY、 VO、 SOUND、 DEMUX 设备等。<br>\n步骤 2 调用 HI_UNF_AVPLAY_Init 接口初始化 AVPLAY 设备。<br>\n步骤 3 调用 HI_UNF_AVPLAY_GetDefaultConfig 接口获取缺省的 AVPLAY 配置，注意选择HI_UNF_AVPLAY_STREAM_TYPE_ES 模式。<br>\n步骤 4 根据应用需要，修改码流属性参数。<br>\n步骤 5 调用 HI_UNF_AVPLAY_Create 接口创建 AVPLAY 播放器。<br>\n步骤 6 调用 HI_UNF_AVPLAY_ChnOpen 接口打开音频或视频通道。</p>\n<p>步骤 7 调用 HI_UNF_AVPLAY_SetAttr 接口设置音频解码器或视频解码器属性，同步设置为自由播放。<br>\n步骤 8 调用 HI_UNF_SND_CreateTrack 创建 Track。<br>\n步骤 9 调用 HI_UNF_SND_Attach 接口将音频播放器与 Track 绑定。<br>\n步骤 10 调用 HI_UNF_VO_AttachWindow 接口将视频播放器与 VO 的窗口绑定。<br>\n步骤 11 调用 HI_UNF_VO_SetWindowEnable 接口使能窗口。<br>\n步骤 12 调用 HI_UNF_AVPLAY_Start 接口发送 Start 命令，开始播放音频或视频。<br>\n步骤 13 调用 HI_UNF_AVPLAY_GetBuf 接口申请存放音频或视频的缓冲区。<br>\n步骤 14 通过内存拷贝或文件读取等方式，将音频或视频数据直接写到缓冲区中。<br>\n步骤 15 调用 HI_UNF_AVPLAY_PutBuf 接口更新音视频缓冲区中的读写指针。<br>\n步骤 16 播放任务结束后，首先调用 HI_UNF_AVPLAY_Stop 接口停止 AVPLAY，再调用HI_UNF_AVPLAY_Destroy 接口销毁 AVPLAY，释放相关资源。<br>\n步骤 17 关闭相关设备，如 DISPLAY 设备、 VO 设备、 SOUND 设备、 DEMUX 设备和AVPLAY</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730164615.svg\" alt=\"HI_MPI_AVPLAY_Create.__avplay_mpi_avplay_c\"></p>\n<p>MCE实现了启动过程画面的平滑切换</p>\n<h5 id=\"IR\">IR</h5>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153646.png\" alt=\"\"></p>\n<p>驱动层</p>\n<p>负责完成红外模块的中断处理，在底半部中遍历所有协议并调用 match 函数来判定当前收到的红外帧属于哪种协议。如果没有匹配，则丢弃当前帧。完成最顶层的错误处理：如果当前帧当前时刻还不能被解析，则会等待大约 200ms 之后再次尝试，如果失败，则丢弃当前帧。</p>\n<p>协议适配层</p>\n<p>完成各个协议的初始化工作，向上提供遍历协议的接口，向下提供容纳协议描述符的存储空间。</p>\n<p>协议处理层</p>\n<p>协议处理层完成判定：由从某个 symbol 开始的一连串 symbol 是不是符合本协议的一<br>\n帧。在判定某一帧符合本协议的前提条件下，完成一帧 symbol 的解析，将对应的键值解析出来。如果在解析过程中出错，或者判定是本协议的帧，但无法解析时，完成错误处理。</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153556.png\" alt=\"\"></p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153604.png\" alt=\"\"></p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153611.png\" alt=\"\"></p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153623.png\" alt=\"\"></p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153630.png\" alt=\"\"></p>\n<h4 id=\"4-4-Sample-mosaic分析\">4.4 Sample_mosaic分析</h4>\n<h5 id=\"应用层调用\">应用层调用</h5>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153315.png\" alt=\"\"></p>\n<p>上图是部分截图，完整大的原图见目录中svg文件</p>\n<p>valgrind --tool=callgrind ./sample_mosaic 1080P.h264 h264</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153400.svg\" alt=\"samplemosaic-callgrind-all\"></p>\n<h5 id=\"系统调用\">系统调用</h5>\n<p>Strace分析</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/07/3020210730153300.png\" alt=\"\"></p>\n<h2 id=\"5-小结：\">5:小结：</h2>\n<p>海思MPI驱动其实就是在标准linux驱动基础之上封装了一层，增加了log，proc，内存管理（映射，链表）功能。MPI是在标准linux驱动基础上封装了DVR常用外围逻辑接口，并且统一并简化了接口操作方式，原来各个外围子系统操作方式差别很大，不同实现框架，实现方式使用方法也不一样（如VI，VO，AI/AO，VPSS，如果自己用标准linux子系统实现要复杂得多）。</p>\n<p>应用层MPI接口是在MPI驱动基础上再次封装了一层，封装了驱动的调用，配置等操作，在驱动功能的基础上进一步封装完成了一些简单的业务功能接口，方便了用户的使用。UNF就是在MPI基础上增加了业务逻辑封装，把常用的业务逻辑封装成接口，大大方便用户的应用程序开发。</p>\n<h3 id=\"5-1-UNF相对标准内核模块区别\">5.1 UNF相对标准内核模块区别</h3>\n<h4 id=\"5-1-1-Proc读写调试。\">5.1.1 Proc读写调试。</h4>\n<p>实时查询运行状态，修改设置。通用的proc目录、文件创建销毁有通用接口。读写proc文件在每个内核模块中有单独实现。</p>\n<h4 id=\"5-1-2-内核空间往应用空间写文件\">5.1.2 内核空间往应用空间写文件</h4>\n<p>方便调试，Dump内核数据到用户控件方便定位Bug。</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">HI_DRV_FILE_Open\nfilp_open\nHI_DRV_FILE_Close\n​    filp_close\nHI_DRV_FILE_Read\n​    pFile-&gt;f_op-&gt;read\nHI_DRV_FILE_Write\n​    pFile-&gt;f_op-&gt;write\nHI_DRV_FILE_Lseek\n​    vfs_llseek</code></pre></div></figure>\n<h4 id=\"5-1-3Log管理\">5.1.3Log管理</h4>\n<p>日志打印分级，实时修改。如何实现的见前面章节。</p>\n<h4 id=\"5-1-4内存映射\">5.1.4内存映射</h4>\n<p>物理地址，虚拟地址映射关系管理，小块内存使用kmalloc申请，大块内存使用dma_alloc_from_contiguous申请。</p>\n<p>使用内核链表管理。</p>\n<p>打印到proc，log模块中，实时查看运行状态，内存。</p>\n<p>方便查找，打印。</p>\n<p>在多个内核共享数据也是这样实现的。</p>\n<h3 id=\"5-2代码分析方法\">5.2代码分析方法</h3>\n<h4 id=\"5-2-1-查看代码，静态分析应用层，驱动层实现方法\">5.2.1 查看代码，静态分析应用层，驱动层实现方法</h4>\n<h4 id=\"5-2-2-图示静态分析函数调用关系\">5.2.2 图示静态分析函数调用关系.</h4>\n<p>Cflow, dot</p>\n<h4 id=\"5-2-3-图示动态分析函数调用关系：库函数，系统调用，内核调用\">5.2.3 图示动态分析函数调用关系：库函数，系统调用，内核调用</h4>\n<p>​    Ltrace, strace, valgrind, perf</p>\n<p>具体分析方法，使用工具见前面章节。</p>\n<h2 id=\"参考文档：\">参考文档：</h2>\n<ol>\n<li>03-HMS 开发指南.pdf</li>\n<li>HiSTBAndroidV600R001C00SPC060_cn\\document\\01-Development Guide</li>\n<li>HiMPP V3.0 媒体处理软件开发参考.pdf</li>\n<li>HiSTBAndroidV600R001C00SPC060_cn\\document\\01-Development Guide</li>\n<li>3798m SDK 代码</li>\n<li>HMS API Development Reference.chm</li>\n<li>HiSTBAndroidV600R001C00SPC060_cn\\document\\01-Development Guide\\09-API Reference</li>\n</ol>\n<h2 id=\"相关文章\">相关文章</h2>\n\n    <div class=\"vkr-url-wrapper\">\n        <a href=\"/posts/ed364362/\"><img class=\"avatar\" src=\"/medias_webp/cover/linux.webp\"></a>\n        <div class=\"desc-wrapper\">\n            <a href=\"/posts/ed364362/\">如何编写Linux驱动</a>\n            <hr>\n            <div class=\"desc\">本文介绍了编写驱动必备基础知识，编写驱动的难点之处。并从按键驱动到Sensor驱动简单介绍示范了驱动编写过程。并给出了驱动学习方法和评价驱动能力的技术指标！</div>\n        </div>\n    </div>\n    \n\n    <div class=\"vkr-url-wrapper\">\n        <a href=\"/posts/6b2ba137/\"><img class=\"avatar\" src=\"/medias_webp/cover/3g4g.webp\"></a>\n        <div class=\"desc-wrapper\">\n            <a href=\"/posts/6b2ba137/\">3G,4G,Wifi选型需求分析及技术简介</a>\n            <hr>\n            <div class=\"desc\">详细介绍了3G，4G，wifi技术类型，选型，移植，性能介绍全过程。写了好多年了，禁止转载，第一次公开发表。</div>\n        </div>\n    </div>\n    \n\n    <div class=\"vkr-url-wrapper\">\n        <a href=\"/posts/13894dce/\"><img class=\"avatar\" src=\"/medias_webp/cover/hisi.webp\"></a>\n        <div class=\"desc-wrapper\">\n            <a href=\"/posts/13894dce/\">海思MPP&amp;UNF构架源代码级分析</a>\n            <hr>\n            <div class=\"desc\">行业中分析海思MPP内核构架，源码分析，多年经验总结积累结果。写了好多年了，禁止转载，第一次公开发表。</div>\n        </div>\n    </div>\n    \n\n    <div class=\"vkr-url-wrapper\">\n        <a href=\"/posts/ffcce55d/\"><img class=\"avatar\" src=\"/medias_webp/cover/os.webp\"></a>\n        <div class=\"desc-wrapper\">\n            <a href=\"/posts/ffcce55d/\">如何实现自己的操作系统</a>\n            <hr>\n            <div class=\"desc\">作为一个程序员，你肯定设想过创造属于自己的操作系统，这其中涉及非常多的知识。本文大概介绍了涉及的知识点，并给出了相关书籍和参考源代码仓库！</div>\n        </div>\n    </div>\n    \n\n    <div class=\"vkr-url-wrapper\">\n        <a href=\"/posts/32570315/\"><img class=\"avatar\" src=\"/medias_webp/cover/compiler.webp\"></a>\n        <div class=\"desc-wrapper\">\n            <a href=\"/posts/32570315/\">手把手教你构建 C 语言编译器</a>\n            <hr>\n            <div class=\"desc\">“手把手教你构建 C 语言编译器” 这一系列教程将带你从头编写一个 C 语言的编译器。希望通过这个系列，我们能对编译器的构建有一定的了解，同时，我们也将构建出一个能用的 C 语言编译器，尽管有许多语法并不支持。</div>\n        </div>\n    </div>\n    \n<h2 id=\"系列教程\"><strong>系列教程</strong></h2>\n<p><a href=\"/atom.xml\"><i class=\"fas fa-rss\"></i>全部文章RSS订阅</a></p>\n<h3 id=\"Embeded系列\"><strong>Embeded系列</strong></h3>\n<p><a href=\"/categories/embeded/atom.xml\"><i class=\"fas fa-rss\"></i><strong>Embeded 分类 RSS 订阅</strong></a></p>\n<ul>\n<li><a href=\"/posts/13894dce/\">海思MPP&amp;UNF构架源代码级分析</a></li>\n<li><a href=\"/posts/6b2ba137/\">3G,4G,Wifi选型需求分析及技术简介</a></li>\n<li><a href=\"/posts/509c7bd3/\">自动曝光原理</a></li>\n<li><a href=\"/posts/798e6e62/\">ISP 数字图像处理 算法概述、工作原理、架构、处理流程</a></li>\n</ul>\n",
            "tags": [
                "embeded",
                "hisilicon",
                "linux",
                "driver",
                "3798m",
                "mpp",
                "unf",
                "kernel"
            ]
        }
    ]
}