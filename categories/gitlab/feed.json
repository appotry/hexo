{
    "version": "https://jsonfeed.org/version/1",
    "title": "å¤œæ³•ä¹‹ä¹¦ â€¢ All posts by \"gitlab\" category",
    "description": "~è½¯ä»¶é©±åŠ¨ä¸–ç•Œ~ä¸ªäººç‹¬ç«‹æŠ€æœ¯åšå®¢ï¼Œå…³äºLinux,å¼€æºï¼ŒNasï¼ŒDockerï¼ŒåµŒå…¥å¼ï¼Œç†è´¢ï¼Œå¥èº«ç­‰ä¸»é¢˜ï¼",
    "home_page_url": "https://blog.17lai.site",
    "items": [
        {
            "id": "https://blog.17lai.site/posts/1879721e/",
            "url": "https://blog.17lai.site/posts/1879721e/",
            "title": "CI/CDä¸Git Flowä¸GitLab",
            "date_published": "2021-11-01T11:25:00.000Z",
            "content_html": "<blockquote>\n<p>CI/CD + Git Flow + GitLab çš„æ•´ä½“å·¥ä½œæµç¨‹è®°å½•ã€‚ä¸»è¦ä»‹ç»ä¸€ä¸‹ GitLab CI ç›¸å…³åŠŸèƒ½ï¼Œå¹¶é€šè¿‡ GitLab CI å®ç°è‡ªåŠ¨åŒ–æ„å»ºé¡¹ç›®ã€‚é¡¹ç›®ä¸­æ‰€ç”¨çš„ç¤ºä¾‹é¡¹ç›®å·²ç»ä¸Šä¼ åˆ°äº† <a href=\"https://github.com/mritd/GitLabCI-TestProject\">GitHub</a></p>\n</blockquote>\n<h3 id=\"ä¸€ã€Git-Flow-ç®€ä»‹\">ä¸€ã€Git Flow ç®€ä»‹</h3>\n<p>Git Flow å®šä¹‰äº†ä¸€ä¸ªå›´ç»•é¡¹ç›®å¼€å‘å‘å¸ƒçš„ä¸¥æ ¼ git åˆ†æ”¯æ¨¡å‹ï¼Œç”¨äºç®¡ç†å¤šäººåä½œçš„å¤§å‹é¡¹ç›®ä¸­å®ç°é«˜æ•ˆçš„åä½œå¼€å‘ï¼›Git Flow åˆ†æ”¯æ¨¡å‹æœ€æ—©èµ·æºäº <a href=\"http://nvie.com/about/\">Vincent Driessen</a> çš„ <a href=\"http://nvie.com/posts/a-successful-git-branching-model/\">A successful Git branching model</a> æ–‡ç« ï¼›éšç€æ—¶é—´å‘å±•ï¼ŒGit Flow å¤§è‡´åˆ†ä¸ºä¸‰ç§:</p>\n<ul>\n<li>Git Flow: æœ€åŸå§‹çš„ Git Flow åˆ†æ”¯æ¨¡å‹</li>\n<li>Github Flow: Git Flow çš„ç®€åŒ–ç‰ˆï¼Œä¸“é—¨é…åˆæŒç»­å‘å¸ƒ</li>\n<li>GitLab Flow: Git Flow ä¸ Github Flow çš„ç»“åˆç‰ˆ</li>\n</ul>\n<p>å…³äºä¸‰ç§ Git Flow åŒºåˆ«è¯¦æƒ…å¯å‚è€ƒ <a href=\"https://www.ruanyifeng.com/blog/2015/12/git-workflow.html\">Git å·¥ä½œæµç¨‹</a></p>\n<h3 id=\"äºŒã€-Git-Flow-æµç¨‹\">äºŒã€ Git Flow æµç¨‹</h3>\n<p>Github Flow å’Œ GitLab Flow å¯¹äºæŒç»­å‘å¸ƒæ”¯æŒæ¯”è¾ƒå¥½ï¼Œä½†æ˜¯åŸå§‹ç‰ˆæœ¬çš„ Git Flow å¯¹äºä¼ ç»Ÿçš„æŒ‰ç…§ç‰ˆæœ¬å‘å¸ƒæ›´åŠ å‹å¥½ä¸€äº›ï¼Œæ‰€ä»¥ä»¥ä¸‹ä¸»è¦è¯´æ˜ä»¥ä¸‹ Git Flow çš„å·¥ä½œæµç¨‹ï¼›Git Flow ä¸»è¦åˆ†æ”¯æ¨¡å‹å¦‚ä¸‹</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220215.jpg\" alt=\"git flow\"></p>\n<p>åœ¨æ•´ä¸ªåˆ†æ”¯æ¨¡å‹ä¸­ <strong>å­˜åœ¨ä¸¤ä¸ªé•¿æœŸåˆ†æ”¯: develop å’Œ master</strong>ï¼Œå…¶ä¸­ develop åˆ†æ”¯ä¸ºå¼€å‘åˆ†æ”¯ï¼Œmaster ä¸ºç”Ÿäº§åˆ†æ”¯ï¼›<strong>master ä»£ç å§‹ç»ˆä¿æŒéšæ—¶å¯ä»¥éƒ¨ç½²åˆ°çº¿ä¸Šçš„çŠ¶æ€ï¼›develop åˆ†æ”¯ç”¨äºåˆå¹¶æœ€æ–°æäº¤çš„åŠŸèƒ½æ€§ä»£ç </strong>ï¼›å…·ä½“çš„åˆ†æ”¯å®šä¹‰å¦‚ä¸‹</p>\n<ul>\n<li>master: ç”Ÿäº§ä»£ç ï¼Œå§‹ç»ˆä¿æŒå¯ä»¥ç›´æ¥éƒ¨ç½²ç”Ÿäº§çš„çŠ¶æ€</li>\n<li>develop: å¼€å‘åˆ†æ”¯ï¼Œæ¯æ¬¡åˆå¹¶æœ€æ–°åŠŸèƒ½ä»£ç åˆ°æ­¤åˆ†æ”¯</li>\n<li>feature: æ–°åŠŸèƒ½åˆ†æ”¯ï¼Œæ‰€æœ‰æ–°å¼€å‘çš„åŠŸèƒ½å°†é‡‡ç”¨ <code>feature/xxxx</code> å½¢å¼å‘½ååˆ†æ”¯</li>\n<li>hotfixes: ç´§æ€¥ä¿®å¤è¡¥ä¸åˆ†æ”¯ï¼Œå½“æ–°åŠŸèƒ½éƒ¨ç½²åˆ°äº†çº¿ä¸Šå‡ºç°äº†ä¸¥é‡ bug éœ€è¦ç´§æ€¥ä¿®å¤æ—¶ï¼Œåˆ™åˆ›å»º <code>hotfixes/xxxx</code> å½¢å¼å‘½åçš„åˆ†æ”¯</li>\n<li>release: ç¨³å®šç‰ˆåˆ†æ”¯ï¼Œå½“å®Œæˆå¤§ç‰ˆæœ¬å˜åŠ¨åï¼Œåº”è¯¥åˆ›å»º <code>release/xxxx</code> åˆ†æ”¯</li>\n</ul>\n<p>åœ¨æ•´ä¸ªåˆ†æ”¯æ¨¡å‹ä¸­ï¼Œdevelop åˆ†æ”¯ä¸ºæœ€ä¸Šæ¸¸åˆ†æ”¯ï¼Œä¼šä¸æ–­æœ‰æ–°çš„ feature åˆå¹¶å…¥ develop åˆ†æ”¯ï¼Œå½“åŠŸèƒ½å¼€å‘è¾¾åˆ°å®Œæˆæ‰€æœ‰ç‰ˆæœ¬éœ€æ±‚æ—¶ï¼Œåˆ™ä» develop åˆ†æ”¯åˆ›å»º release åˆ†æ”¯ï¼Œrelease åå¦‚æ²¡æœ‰å‘ç°å…¶ä»–é—®é¢˜ï¼Œæœ€ç»ˆ release ä¼šè¢«åˆå¹¶åˆ° master åˆ†æ”¯ä»¥å®Œæˆçº¿ä¸Šéƒ¨ç½²</p>\n<h3 id=\"ä¸‰ã€Git-Flow-å·¥å…·\">ä¸‰ã€Git Flow å·¥å…·</h3>\n<p>é’ˆå¯¹äº Git Flowï¼Œå…¶æ‰‹åŠ¨æ“ä½œ git å‘½ä»¤å¯èƒ½è¿‡äºç¹çï¼Œæ‰€ä»¥åæ¥æœ‰äº† git-flow å·¥å…·ï¼›git-flow æ˜¯ä¸€ä¸ª git æ‰©å±•é›†ï¼ŒæŒ‰ Vincent Driessen çš„åˆ†æ”¯æ¨¡å‹æä¾›é«˜å±‚æ¬¡çš„åº“æ“ä½œï¼›ä½¿ç”¨ git-flow å·¥å…·å¯ä»¥ä»¥æ›´åŠ ç®€å•çš„å‘½ä»¤å®Œæˆå¯¹ Vincent Driessen åˆ†æ”¯æ¨¡å‹çš„å®è·µï¼›<br>\ngit-flow å®‰è£…ä»¥åŠä½¿ç”¨å…·ä½“è¯·å‚è€ƒ <a href=\"https://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html\">git-flow å¤‡å¿˜æ¸…å•</a>ï¼Œè¯¥æ–‡ç« è¯¦ç»†æè¿°äº† git-flow å·¥å…·çš„ä½¿ç”¨æ–¹å¼</p>\n<p>è¿˜æœ‰å¦ä¸€ä¸ªå·¥å…·æ˜¯ <a href=\"https://github.com/tj/git-extras\">git-extras</a>ï¼Œè¯¥å·¥å…·æ²¡æœ‰ git-flow é‚£ä¹ˆç®€å•åŒ–ï¼Œä¸è¿‡å…¶æä¾›æ›´åŠ å¼ºå¤§çš„å‘½ä»¤æ”¯æŒ</p>\n<h3 id=\"å››ã€Git-Commit-Message\">å››ã€Git Commit Message</h3>\n<p>åœ¨æ•´ä¸ª Git Flow ä¸­ï¼Œcommit message ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ï¼›ä¸€ä¸ªè‰¯å¥½ä¸”ç»Ÿä¸€çš„ commit message æœ‰åŠ©äºä»£ç å®¡è®¡ä»¥åŠ review ç­‰ï¼›ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„å†™æ³•æ˜¯ <a href=\"https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#heading=h.greljkmo14y0\">Angular ç¤¾åŒºè§„èŒƒ</a>ï¼Œè¯¥è§„èŒƒå¤§ä¸­ commit message æ ¼å¼å¤§è‡´å¦‚ä¸‹:</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n&lt;BLANK LINE&gt;\n&lt;body&gt;\n&lt;BLANK LINE&gt;\n&lt;footer&gt;Copy</code></pre></div></figure>\n<p>æ€»ä½“æ ¼å¼å¤§è‡´åˆ†ä¸º 3 éƒ¨åˆ†ï¼Œé¦–è¡Œä¸»è¦ 3 ä¸ªç»„æˆéƒ¨åˆ†:</p>\n<ul>\n<li>type: æœ¬æ¬¡æäº¤ç±»å‹</li>\n<li>scope: æœ¬æ¬¡æäº¤å½±å“èŒƒå›´ï¼Œä¸€èˆ¬æ ‡æ˜å½±å“ç‰ˆæœ¬å·æˆ–è€…å…·ä½“çš„èŒƒå›´å¦‚ <code>$browser, $compile, $rootScope, ngHref, ngClick, ngView, etc...</code></li>\n<li>subject: æœ¬æ¬¡æäº¤ç®€çŸ­è¯´æ˜</li>\n</ul>\n<p>å…³äº type æäº¤ç±»å‹ï¼Œæœ‰å¦‚ä¸‹å‡ ç§å€¼:</p>\n<ul>\n<li>featï¼šæ–°åŠŸèƒ½(feature)</li>\n<li>fixï¼šä¿®è¡¥ bug</li>\n<li>docsï¼šæ–‡æ¡£(documentation)</li>\n<li>styleï¼š æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)</li>\n<li>refactorï¼šé‡æ„(å³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨)</li>\n<li>testï¼šå¢åŠ æµ‹è¯•</li>\n<li>choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨</li>\n</ul>\n<p>ä¸­é—´çš„ body éƒ¨åˆ†æ˜¯å¯¹æœ¬æ¬¡æäº¤çš„è¯¦ç»†æè¿°ä¿¡æ¯ï¼Œåº•éƒ¨çš„ footer éƒ¨åˆ†ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§æƒ…å†µ:</p>\n<ul>\n<li>ä¸å…¼å®¹å˜åŠ¨: å¦‚æœå‡ºç°ä¸å…¼å®¹å˜åŠ¨ï¼Œåˆ™ä»¥ <code>BREAKING CHANGE:</code> å¼€å¤´ï¼Œåé¢è·Ÿä¸Šä¸å…¼å®¹å˜åŠ¨çš„å…·ä½“æè¿°å’Œè§£å†³åŠæ³•</li>\n<li>å…³é—­ issue: å¦‚æœè¯¥ commit é’ˆå¯¹æŸä¸ª issueï¼Œå¹¶ä¸”å¯ä»¥å°†å…¶å…³é—­ï¼Œåˆ™å¯ä»¥åœ¨å…¶ä¸­æŒ‡å®šå…³é—­çš„ issueï¼Œå¦‚ <code>Close #9527,#9528</code></li>\n</ul>\n<p>ä¸è¿‡ footer éƒ¨åˆ†ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œå¦‚å›æ»šæŸæ¬¡æäº¤ï¼Œåˆ™ä»¥ <code>revert:</code> å¼€å¤´ï¼Œåé¢ç´§è·Ÿ commit ä¿¡æ¯å’Œå…·ä½“æè¿°ï¼›è¿˜æœ‰æ—¶æŸäº› commit åªæ˜¯è§£å†³äº† æŸä¸ª issue çš„ä¸€éƒ¨åˆ†é—®é¢˜ï¼Œè¿™æ˜¯å¯ä»¥ä½¿ç”¨ <code>refs ISSUE</code> çš„æ–¹å¼æ¥å¼•ç”¨è¯¥ issue</p>\n<h3 id=\"äº”ã€Git-Commit-Message-å·¥å…·\">äº”ã€Git Commit Message å·¥å…·</h3>\n<p>é’ˆå¯¹ Git çš„ commit message ç›®å‰å·²ç»æœ‰äº†æˆç†Ÿçš„ç”Ÿæˆå·¥å…·ï¼Œæ¯”è¾ƒæœ‰åçš„ä¸º <a href=\"https://github.com/commitizen/cz-cli\">commitizen-cli</a> å·¥å…·ï¼Œå…¶é‡‡ç”¨ node.js ç¼–å†™ï¼Œæ‰§è¡Œ <code>git cz</code> å‘½ä»¤èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆç¬¦åˆ Angular ç¤¾åŒºè§„èŒƒçš„ commit messageï¼›ä¸è¿‡ç”±äºå…¶ä½¿ç”¨ node.js ç¼–å†™ï¼Œæ‰€ä»¥å®‰è£…å‰éœ€è¦å®‰è£… node.jsï¼Œå› æ­¤å¯èƒ½ä¸é€‚åˆå…¶ä»–é node.js çš„é¡¹ç›®ä½¿ç”¨ï¼›è¿™é‡Œæ¨èä¸€ä¸ªåŸºäº shell ç¼–å†™çš„ <a href=\"https://cimhealth.github.io/git-toolkit\">Git-toolkit</a>ï¼Œå®‰è£…æ­¤å·¥å…·åæ‰§è¡Œ <code>git ci</code> å‘½ä»¤è¿›è¡Œæäº¤å°†ä¼šäº§ç”Ÿäº¤äº’å¼ç”Ÿæˆ Angular git commit message æ ¼å¼çš„æäº¤è¯´æ˜ï¼Œæˆªå›¾å¦‚ä¸‹:</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220233.jpg\" alt=\"git ci\"></p>\n<h3 id=\"å…­ã€GitLab-æ•´åˆ\">å…­ã€GitLab æ•´åˆ</h3>\n<p>ä»¥ä¸Š Git Flow æ‰€æœ‰æ“ä½œä»‹ç»çš„éƒ½æ˜¯åœ¨æœ¬åœ°æ“ä½œï¼Œè€Œæ­£å¸¸æˆ‘ä»¬åœ¨å·¥ä½œä¸­éƒ½æ˜¯åŸºäº GitLab æ­å»ºç§æœ‰ Git ä»“åº“æ¥è¿›è¡ŒååŒå¼€å‘çš„ï¼Œä»¥ä¸‹ç®€è¿°ä»¥ä¸‹ Git Flow é…åˆ GitLab çš„æµç¨‹</p>\n<h4 id=\"6-1ã€å¼€å‘-features\">6.1ã€å¼€å‘ features</h4>\n<p>å½“å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½æ—¶æµç¨‹å¦‚ä¸‹:</p>\n<ul>\n<li>æœ¬åœ° <code>git flow feature start xxxx</code> å¼€å¯ä¸€ä¸ª feature æ–°åˆ†æ”¯</li>\n<li><code>git flow feature publish xxxx</code> å°†æ­¤åˆ†æ”¯æ¨é€åˆ°è¿œç«¯ä»¥ä¾¿ä»–äººè·å–</li>\n<li>å®Œæˆå¼€å‘å GitLab ä¸Šå‘ <code>develop</code> åˆ†æ”¯å‘èµ·åˆå¹¶è¯·æ±‚</li>\n<li>CI sonar ç­‰è´¨é‡æ£€æµ‹å·¥å…·æ‰«æï¼Œå…¶ä»–ç”¨æˆ· review ä»£ç </li>\n<li>ç¡®è®¤æ— è¯¯å <code>master</code> æƒé™ç”¨æˆ·åˆå¹¶å…¶åˆ° <code>develop</code> åˆ†æ”¯</li>\n<li>éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒä»¥ä¾¿æµ‹è¯•ç»„æµ‹è¯•</li>\n<li>å¦‚æœæµ‹è¯•ä¸é€šè¿‡ï¼Œåˆ™ç»§ç»­åŸºäºæ­¤åˆ†æ”¯å¼€å‘ï¼Œç›´åˆ°è¯¥åŠŸèƒ½å¼€å‘å®Œæˆ</li>\n</ul>\n<h4 id=\"6-2ã€åˆ›å»º-release\">6.2ã€åˆ›å»º release</h4>\n<p>å½“ä¸€å®šé‡çš„ feature å¼€å‘å®Œæˆå¹¶åˆå¹¶åˆ° develop åï¼Œå¦‚æ‰€æœ‰ feature éƒ½æµ‹è¯•é€šè¿‡å¹¶æ»¡è¶³ç‰ˆæœ¬éœ€æ±‚ï¼Œåˆ™å¯ä»¥åˆ›å»º release ç‰ˆæœ¬åˆ†æ”¯ï¼›release åˆ†æ”¯æµç¨‹å¦‚ä¸‹</p>\n<ul>\n<li>æœ¬åœ° <code>git flow release start xxxx</code> å¼€å¯ release åˆ†æ”¯</li>\n<li><code>git flow release publish xxxx</code> å°†å…¶æ¨é€åˆ°è¿œç«¯ä»¥ä¾¿ä»–äººè·å–</li>\n<li>ç»§ç»­è¿›è¡Œå®Œæ•´æ€§æµ‹è¯•ï¼Œå‡ºç°é—®é¢˜ç»§ç»­ä¿®å¤ï¼Œç›´åˆ° release å®Œå…¨ç¨³å®š</li>\n<li>ä» release åˆ†æ”¯å‘ masterã€develop åˆ†æ”¯åˆ†åˆ«å‘èµ·åˆå¹¶è¯·æ±‚</li>\n<li>master åˆå¹¶ååˆ›å»ºå¯¹åº”çš„ release æ ‡ç­¾ï¼Œå¹¶éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ</li>\n<li>develop åˆå¹¶ release çš„åæœŸä¿®æ”¹</li>\n</ul>\n<h4 id=\"6-3ã€ç´§æ€¥ä¿®å¤\">6.3ã€ç´§æ€¥ä¿®å¤</h4>\n<p>å½“ master æŸä¸ª tag éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒåï¼Œä¹Ÿå¯èƒ½å‡ºç°ä¸ç¬¦åˆé¢„æœŸçš„é—®é¢˜å‡ºç°ï¼›æ­¤æ—¶åº”è¯¥åŸºäº master åˆ›å»º hotfix åˆ†æ”¯è¿›è¡Œä¿®å¤ï¼Œæµç¨‹å¦‚ä¸‹</p>\n<ul>\n<li>æœ¬åœ° <code>git flow hotfix start xxxx</code> åˆ›å»ºç´§æ€¥ä¿®å¤åˆ†æ”¯</li>\n<li>ä¿®æ”¹ä»£ç åå°†å…¶æ¨é€åˆ°è¿œç«¯ï¼Œå¹¶åƒ masterã€develop åˆ†æ”¯å‘èµ·åˆå¹¶</li>\n<li>develop åˆå¹¶ç´§æ€¥ä¿®å¤è¡¥ä¸ï¼Œå¦‚æœå¿…è¦æœ€å¥½å†åšä¸€ä¸‹æµ‹è¯•</li>\n<li>master åˆå¹¶ç´§æ€¥ä¿®å¤è¡¥ä¸ï¼Œåˆ›å»ºç´§æ€¥ä¿®å¤ tagï¼Œå¹¶éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ</li>\n</ul>\n<h3 id=\"ä¸ƒã€ç¯å¢ƒå‡†å¤‡\">ä¸ƒã€ç¯å¢ƒå‡†å¤‡</h3>\n<p>é¦–å…ˆéœ€è¦æœ‰ä¸€å° GitLab æœåŠ¡å™¨ï¼Œç„¶åéœ€è¦æœ‰ä¸ªé¡¹ç›®ï¼›è¿™é‡Œç¤ºä¾‹é¡¹ç›®ä»¥ Spring Boot é¡¹ç›®ä¸ºä¾‹ï¼Œç„¶åæœ€å¥½æœ‰ä¸€å°ä¸“é—¨ç”¨æ¥ Build çš„æœºå™¨ï¼Œå®é™…ç”Ÿäº§ä¸­å¦‚æœ Build ä»»åŠ¡ä¸é¢‘ç¹å¯é€‚å½“ç”¨ä¸€äº›ä¸šåŠ¡æœºå™¨è¿›è¡Œ Buildï¼›æœ¬æ–‡ç¤ºä¾‹æ‰€æœ‰ç»„ä»¶å°†é‡‡ç”¨ Docker å¯åŠ¨ï¼Œ GitLab HA ç­‰ä¸åœ¨æœ¬æ–‡é˜è¿°èŒƒå›´å†…</p>\n<ul>\n<li>Docker Version : 1.13.1</li>\n<li>GitLab Version : 10.1.4-ce.0</li>\n<li>GitLab Runner Version : 10.1.0</li>\n<li>GitLab IP : 172.16.0.37</li>\n<li>GitLab Runner IP : 172.16.0.36</li>\n</ul>\n<h3 id=\"å…«ã€GitLab-CI-ç®€ä»‹\">å…«ã€GitLab CI ç®€ä»‹</h3>\n<p>GitLab CI æ˜¯ GitLab é»˜è®¤é›†æˆçš„ CI åŠŸèƒ½ï¼ŒGitLab CI é€šè¿‡åœ¨é¡¹ç›®å†… <code>.gitlab-ci.yaml</code> é…ç½®æ–‡ä»¶è¯»å– CI ä»»åŠ¡å¹¶è¿›è¡Œç›¸åº”å¤„ç†ï¼›GitLab CI é€šè¿‡å…¶ç§°ä¸º GitLab Runner çš„ Agent ç«¯è¿›è¡Œ build æ“ä½œï¼›Runner æœ¬èº«å¯ä»¥ä½¿ç”¨å¤šç§æ–¹å¼å®‰è£…ï¼Œæ¯”å¦‚ä½¿ç”¨ Docker é•œåƒå¯åŠ¨ç­‰ï¼›Runner åœ¨è¿›è¡Œ build æ“ä½œæ—¶ä¹Ÿå¯ä»¥é€‰æ‹©å¤šç§ build ç¯å¢ƒæä¾›è€…ï¼›æ¯”å¦‚ç›´æ¥åœ¨ Runner æ‰€åœ¨å®¿ä¸»æœº buildã€é€šè¿‡æ–°åˆ›å»ºè™šæ‹Ÿæœº(vmwareã€virtualbox)è¿›è¡Œ buildç­‰ï¼›åŒæ—¶ Runner æ”¯æŒ Docker ä½œä¸º build æä¾›è€…ï¼Œå³æ¯æ¬¡ build æ–°å¯åŠ¨å®¹å™¨è¿›è¡Œ buildï¼›GitLab CI å…¶å¤§è‡´æ¶æ„å¦‚ä¸‹</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220236.png\" alt=\"GitLab\"></p>\n<h3 id=\"ä¹ã€æ­å»º-GitLab-æœåŠ¡å™¨\">ä¹ã€æ­å»º GitLab æœåŠ¡å™¨</h3>\n<h4 id=\"9-1ã€GitLab-æ­å»º\">9.1ã€GitLab æ­å»º</h4>\n<p>GitLab æ­å»ºè¿™é‡Œç›´æ¥ä½¿ç”¨ docker compose å¯åŠ¨ï¼Œcompose é…ç½®å¦‚ä¸‹</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">version: '2'\nservices:\n  gitlab:\n    image: 'gitlab/gitlab-ce:10.1.4-ce.0'\n    restart: always\n    container_name: gitlab\n    hostname: 'git.mritd.me'\n    environment:\n      GITLAB_OMNIBUS_CONFIG: |\n        external_url 'http://git.mritd.me'\n        # Add any other gitlab.rb configuration here, each on its own line\n    ports:\n      - '80:80'\n      - '443:443'\n      - '8022:22'\n    volumes:\n      - './data/gitlab/config:/etc/gitlab'\n      - './data/gitlab/logs:/var/log/gitlab'\n      - './data/gitlab/data:/var/opt/gitlab'Copy</code></pre></div></figure>\n<p>ç›´æ¥å¯åŠ¨åï¼Œé¦–æ¬¡ç™»é™†éœ€è¦è®¾ç½®åˆå§‹å¯†ç å¦‚ä¸‹ï¼Œé»˜è®¤ç”¨æˆ·ä¸º <code>root</code></p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220240.png\" alt=\"gitkab init\"></p>\n<p>ç™»é™†æˆåŠŸååˆ›å»ºä¸€ä¸ªç”¨æˆ·(è¯¥ç”¨æˆ·æœ€å¥½ç»™äºˆ Admin æƒé™ï¼Œä»¥åæ“ä½œä»¥è¯¥ç”¨æˆ·ä¸ºä¾‹)ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæµ‹è¯• Group å’Œ Projectï¼Œå¦‚ä¸‹æ‰€ç¤º</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220427.png\" alt=\"Create User\"></p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220432.png\" alt=\"Test Project\"></p>\n<h4 id=\"9-2ã€å¢åŠ ç¤ºä¾‹é¡¹ç›®\">9.2ã€å¢åŠ ç¤ºä¾‹é¡¹ç›®</h4>\n<p>è¿™é‡Œç¤ºä¾‹é¡¹ç›®é‡‡ç”¨ Java çš„ SpringBoot é¡¹ç›®ï¼Œå¹¶é‡‡ç”¨ Gradle æ„å»ºï¼Œå…¶ä»–è¯­è¨€åŸç†ä¸€æ ·ï¼›<strong>å¦‚æœä¸ç†Ÿæ‚‰ Java çš„æ²¡å¿…è¦æ­»ç£•æ­¤æ­¥é…ç½®ï¼Œä»»æ„è¯­è¨€(æœ€å¥½ Java)æ•´ä¸€ä¸ªèƒ½ç”¨çš„ Web é¡¹ç›®å°±è¡Œï¼Œå¹¶ä¸å¼ºæ±‚ä¸€å®š Java å¹¶ä¸”ä½¿ç”¨ Gradle æ„å»ºï¼Œä»¥ä¸‹åªæ˜¯ä¸€ä¸ªæ ·ä¾‹é¡¹ç›®</strong>ï¼›SpringBoot å¯ä»¥é‡‡ç”¨ <a href=\"https://start.spring.io/\">Spring Initializr</a> ç›´æ¥ç”Ÿæˆ(ä¾èµ–è¦åŠ å…¥ WEB)ï¼Œå¦‚ä¸‹æ‰€ç¤º</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220246.png\" alt=\"Spring Initializr\"></p>\n<p>å°†é¡¹ç›®å¯¼å…¥ IDEAï¼Œç„¶ååˆ›å»ºä¸€ä¸ª index ç¤ºä¾‹é¡µé¢ï¼Œä¸»è¦ä¿®æ”¹å¦‚ä¸‹</p>\n<ul>\n<li>build.gradle</li>\n</ul>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-jade\" data-language=\"jade\"><code class=\"language-jade\">buildscript {\n    ext {\n        springBootVersion = '1.5.8.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n    }\n}\n\napply plugin: 'java'\napply plugin: 'eclipse'\napply plugin: 'idea'\napply plugin: 'org.springframework.boot'\n\ngroup = 'me.mritd'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n}\n\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter')\n    compile('org.springframework.boot:spring-boot-starter-web')\n    compile('org.springframework.boot:spring-boot-starter-thymeleaf')\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n}Copy</code></pre></div></figure>\n<ul>\n<li>æ–°å»ºä¸€ä¸ª HomeController</li>\n</ul>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-jade\" data-language=\"jade\"><code class=\"language-jade\">package me.mritd.TestProject;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n/*******************************************************************************\n * Copyright (c) 2005-2017 Mritd, Inc.\n * TestProject\n * me.mritd.TestProject\n * Created by mritd on 2017/11/24 ä¸‹åˆ12:23.\n * Description: \n *******************************************************************************/\n@Controller\npublic class HomeController {\n\n    @RequestMapping(\"/\")\n    public String home(){\n        return \"index\";\n    }\n}Copy</code></pre></div></figure>\n<ul>\n<li>templates ä¸‹æ–°å»º index.html</li>\n</ul>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"/&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Test...&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;Copy</code></pre></div></figure>\n<p>æœ€åé¡¹ç›®æ•´ä½“ç»“æ„å¦‚ä¸‹</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220249.png\" alt=\"TestProject\"></p>\n<p>æ‰§è¡Œ <code>assemble</code> Task æ‰“åŒ…å‡ºå¯æ‰§è¡Œ jar åŒ…ï¼Œå¹¶è¿è¡Œ <code>java -jar TestProject-0.0.1-SNAPSHOT.jar</code> æµ‹è¯•ä¸‹èƒ½å¯åŠ¨è®¿é—®é¡µé¢å³å¯</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220251.png\" alt=\"TestProject assemble\"></p>\n<p>æœ€åå°†é¡¹ç›®æäº¤åˆ° GitLab åå¦‚ä¸‹</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220304.png\" alt=\"init Project\"></p>\n<h3 id=\"åã€GitLab-CI-é…ç½®\">åã€GitLab CI é…ç½®</h3>\n<blockquote>\n<p>é’ˆå¯¹è¿™ä¸€ç« èŠ‚åˆ›å»ºåŸºç¡€é•œåƒä»¥åŠé¡¹ç›®é•œåƒï¼Œè¿™é‡Œä»…ä»¥ Java é¡¹ç›®ä¸ºä¾‹ï¼›å…¶ä»–è¯­è¨€åŸç†ç›¸é€šï¼ŒæŒ‰ç…§å…¶ä»–è¯­è¨€å¯¹åº”çš„è¿è¡Œç¯å¢ƒä¿®æ”¹å³å¯</p>\n</blockquote>\n<h4 id=\"10-1ã€å¢åŠ -Runner\">10.1ã€å¢åŠ  Runner</h4>\n<p>GitLab CI åœ¨è¿›è¡Œæ„å»ºæ—¶ä¼šå°†ä»»åŠ¡ä¸‹å‘ç»™ Runnerï¼Œè®© Runner å»æ‰§è¡Œï¼›æ‰€ä»¥å…ˆè¦æ·»åŠ ä¸€ä¸ª Runnerï¼ŒRunner è¿™é‡Œé‡‡ç”¨ Docker Compose å¯åŠ¨ï¼Œbuild æ–¹å¼ä¹Ÿä½¿ç”¨ Docker æ–¹å¼ Buildï¼›compose æ–‡ä»¶å¦‚ä¸‹</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">version: '2'\nservices:\n  gitlab-runner:\n    container_name: gitlab-runner\n    image: gitlab/gitlab-runner:alpine-v10.1.0\n    restart: always\n    network_mode: \"host\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - ./config.toml:/etc/gitlab-runner/config.toml\n    extra_hosts:\n      - \"git.mritd.me:172.16.0.37\"Copy</code></pre></div></figure>\n<p><strong>åœ¨å¯åŠ¨å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆ touch ä¸€ä¸‹è¿™ä¸ª config.toml é…ç½®æ–‡ä»¶</strong>ï¼›è¯¥æ–‡ä»¶æ˜¯ Runner çš„è¿è¡Œé…ç½®ï¼Œæ­¤å Runner æ‰€æœ‰é…ç½®éƒ½ä¼šå†™å…¥è¿™ä¸ªæ–‡ä»¶(ä¸ touch å‡ºæ¥ docker-compose å‘ç°ä¸å­˜åœ¨ä¼šæŒ‚è½½ä¸€ä¸ªç›®å½•è¿›å»ï¼Œå¯¼è‡´ Runner å¯åŠ¨å¤±è´¥)ï¼›å¯åŠ¨ docker-compose åï¼Œ<strong>éœ€è¦è¿›å…¥å®¹å™¨æ‰§è¡Œæ³¨å†Œï¼Œè®© Runner ä¸»åŠ¨å»è¿æ¥ GitLab æœåŠ¡å™¨</strong></p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># ç”Ÿæˆ Runner é…ç½®æ–‡ä»¶\ntouch config.toml\n# å¯åŠ¨ Runner\ndocker-compose up -d\n# æ¿€æ´» Runner\ndocker exec -it gitlab-runner gitlab-runner registerCopy</code></pre></div></figure>\n<p>åœ¨æ‰§è¡Œä¸Šä¸€æ¡æ¿€æ´»å‘½ä»¤åï¼Œä¼šæŒ‰ç…§æç¤ºè®©ä½ è¾“å…¥ä¸€äº›ä¿¡æ¯ï¼›<strong>é¦–å…ˆè¾“å…¥ GitLab åœ°å€ï¼Œç„¶åæ˜¯ Runner Tokenï¼ŒRunner Token å¯ä»¥ä» GitLab è®¾ç½®ä¸­æŸ¥çœ‹</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤º</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220624.png\" alt=\"Runner Token\"></p>\n<p>æ•´ä½“æ³¨å†Œæµç¨‹å¦‚ä¸‹</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220312.png\" alt=\"Runner registry\"></p>\n<p>æ³¨å†Œå®Œæˆåï¼Œåœ¨ GitLab Runner è®¾ç½®ä¸­å°±å¯ä»¥çœ‹åˆ°åˆšåˆšæ³¨å†Œçš„ Runnerï¼Œå¦‚ä¸‹æ‰€ç¤º</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220628.png\" alt=\"Runner List\"></p>\n<p><strong>Runner æ³¨å†ŒæˆåŠŸåä¼šå°†é…ç½®å†™å…¥åˆ° config.toml é…ç½®æ–‡ä»¶ï¼›ç”±äºä¸¤ä¸ªæµ‹è¯•å®¿ä¸»æœºéƒ½æ²¡æœ‰é…ç½®å†…ç½‘ DNSï¼Œæ‰€ä»¥ä¸ºäº†ä¿è¯ runner åœ¨ä½¿ç”¨ docker build æ—¶èƒ½æ­£ç¡®çš„æ‰¾åˆ° GitLab ä»“åº“åœ°å€ï¼Œè¿˜éœ€è¦å¢åŠ ä¸€ä¸ª docker çš„ host æ˜ å°„( <code>extra_hosts</code> )ï¼›åŒæ—¶ä¸ºäº†èƒ½è°ƒç”¨ å®¿ä¸»æœº Docker å’ŒæŒä¹…åŒ– build çš„ä¸€äº›ç¼“å­˜è¿˜æŒ‚è½½äº†ä¸€äº›æ–‡ä»¶å’Œç›®å½•ï¼›å®Œæ•´çš„ é…ç½®å¦‚ä¸‹(é…ç½®æ–‡ä»¶å¯ä»¥åšä¸€äº›æ›´é«˜çº§çš„é…ç½®ï¼Œå…·ä½“å‚è€ƒ <a href=\"https://docs.gitlab.com/runner/configuration/advanced-configuration.html\">å®˜æ–¹æ–‡æ¡£</a> )</strong></p>\n<ul>\n<li>config.toml</li>\n</ul>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-toml\" data-language=\"toml\"><code class=\"language-toml\">concurrent = 1\ncheck_interval = 0\n\n[[runners]]\n  name = \"Test Runner\"\n  url = \"http://git.mritd.me\"\n  token = \"c279ec1ac08aec98c7141c7cf2d474\"\n  executor = \"docker\"\n  builds_dir = \"/gitlab/runner-builds\"\n  cache_dir = \"/gitlab/runner-cache\"\n  [runners.docker]\n    tls_verify = false\n    image = \"debian\"\n    privileged = false\n    disable_cache = false\n    shm_size = 0\n    volumes = [\"/data/gitlab-runner:/gitlab\",\"/var/run/docker.sock:/var/run/docker.sock\",\"/data/maven_repo:/data/repo\",\"/data/maven_repo:/data/maven\",\"/data/gradle:/data/gradle\",\"/data/sonar_cache:/root/.sonar\",\"/data/androidsdk:/usr/local/android\",\"/data/node_modules:/data/node_modules\"]\n    extra_hosts = [\"git.mritd.me:172.16.0.37\"]\n  [runners.cache]Copy</code></pre></div></figure>\n<p><strong>æ³¨æ„ï¼Œè¿™é‡Œå£°æ˜çš„ Volumes ä¼šåœ¨æ¯ä¸ªè¿è¡Œçš„å®¹å™¨ä¸­éƒ½ç”Ÿæ•ˆï¼›ä¹Ÿå°±æ˜¯è¯´ build æ—¶æ–°å¼€å¯çš„æ¯ä¸ªå®¹å™¨éƒ½ä¼šè¢«æŒ‚è½½è¿™äº›ç›®å½•</strong>ï¼›ä¿®æ”¹å®Œæˆåé‡å¯ runner å®¹å™¨å³å¯ï¼Œç”±äº runner ä¸­æ²¡å•¥å¯ä¿å­˜çš„ä¸œè¥¿ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ <code>docker-compose down &amp;&amp; docker-compose up -d</code> é‡å¯</p>\n<h4 id=\"10-2ã€åˆ›å»ºåŸºç¡€é•œåƒ\">10.2ã€åˆ›å»ºåŸºç¡€é•œåƒ</h4>\n<p>ç”±äºç¤ºä¾‹é¡¹ç›®æ˜¯ä¸€ä¸ª Java é¡¹ç›®ï¼Œè€Œä¸”æ˜¯é‡‡ç”¨ Spring Boot çš„ï¼Œæ‰€ä»¥è¯¥é¡¹ç›®æƒ³è¦è¿è¡Œèµ·æ¥åªéœ€è¦ä¸€ä¸ª java ç¯å¢ƒå³å¯ï¼Œä¸­é—´ä»¶å·²ç»è¢«æ‰“åŒ…åˆ°äº† jar åŒ…ä¸­ï¼›ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½œä¸ºåŸºç¡€è¿è¡Œç¯å¢ƒçš„ openjdk é•œåƒçš„ Dockerfile</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-docker\" data-language=\"docker\"><code class=\"language-docker\">FROM alpine:edge \n\nLABEL maintainer=\"mritd &lt;mritd1234@gmail.com&gt;\"\n\nENV JAVA_HOME /usr/lib/jvm/java-1.8-openjdk\nENV PATH $PATH:/usr/lib/jvm/java-1.8-openjdk/jre/bin:/usr/lib/jvm/java-1.8-openjdk/bin\n\nRUN apk add --update bash curl tar wget ca-certificates unzip \\\n        openjdk8 font-adobe-100dpi ttf-dejavu fontconfig \\\n    &amp;&amp; rm -rf /var/cache/apk/* \\\n\nCMD [\"bash\"]Copy</code></pre></div></figure>\n<p><strong>è¿™ä¸ª openjdk Dockerfile å‡çº§åˆ°äº† 8.151 ç‰ˆæœ¬ï¼Œå¹¶ä¸”é›†æˆäº†ä¸€äº›å­—ä½“ç›¸å…³çš„è½¯ä»¶ï¼Œä»¥è§£å†³åœ¨ Java ä¸­æŸäº›éªŒè¯ç åº“æ— æ³•è¿è¡Œé—®é¢˜ï¼Œè¯¦è§ <a href=\"https://mritd.me/2017/09/27/alpine-3.6-openjdk-8-bug/\">Alpine 3.6 OpenJDK 8 Bug</a></strong>ï¼›ä½¿ç”¨è¿™ä¸ª Dockerfileï¼Œåœ¨å½“å‰ç›®å½•æ‰§è¡Œ <code>docker build -t mritd/openjdk:8 .</code> build ä¸€ä¸ª openjdk8 çš„åŸºç¡€é•œåƒï¼Œç„¶åå°†å…¶æ¨é€åˆ°ç§æœï¼Œæˆ–è€… Docker Hub å³å¯</p>\n<h4 id=\"10-3ã€åˆ›å»ºé¡¹ç›®é•œåƒ\">10.3ã€åˆ›å»ºé¡¹ç›®é•œåƒ</h4>\n<p>æœ‰äº†åŸºæœ¬çš„ openjdk çš„ docker é•œåƒåï¼Œé’ˆå¯¹äºé¡¹ç›®æ¯æ¬¡ build éƒ½åº”è¯¥ç”Ÿæˆä¸€ä¸ªåŒ…å«å‘å¸ƒç‰©çš„ docker é•œåƒï¼Œæ‰€ä»¥å¯¹äºé¡¹ç›®æ¥è¯´è¿˜éœ€è¦ä¸€ä¸ªé¡¹ç›®æœ¬èº«çš„ Dockerfileï¼›<strong>é¡¹ç›®çš„ Dockerfile æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼›ä¸€ç§æ˜¯åŠ¨æ€ç”Ÿæˆ Dockerfileï¼Œç„¶åæ¯æ¬¡ä½¿ç”¨æ–°ç”Ÿæˆçš„ Dockerfile å» buildï¼›è¿˜æœ‰ä¸€ç§æ˜¯å†™ä¸€ä¸ªé€šç”¨çš„ Dockerfileï¼Œbuild æ—¶åˆ©ç”¨ ARG å‚æ•°ä¼ å…¥å˜é‡</strong>ï¼›è¿™é‡Œé‡‡ç”¨ç¬¬äºŒç§æ–¹å¼ï¼Œä»¥ä¸‹ä¸ºä¸€ä¸ªå¯ä»¥åå¤ä½¿ç”¨çš„ Dockerfile</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-docker\" data-language=\"docker\"><code class=\"language-docker\">FROM mritd/openjdk:8-144-01\n\nMAINTAINER mritd &lt;mritd1234@gmail.com&gt;\n\nARG PROJECT_BUILD_FINALNAME\n\nENV TZ 'Asia/Shanghai'\nENV PROJECT_BUILD_FINALNAME ${PROJECT_BUILD_FINALNAME}\n\n\nCOPY build/libs/${PROJECT_BUILD_FINALNAME}.jar /${PROJECT_BUILD_FINALNAME}.jar\n\nCMD [\"bash\",\"-c\",\"java -jar /${PROJECT_BUILD_FINALNAME}.jar\"]Copy</code></pre></div></figure>\n<p><strong>è¯¥ Dockerfile é€šè¿‡å£°æ˜ä¸€ä¸ª <code>PROJECT_BUILD_FINALNAME</code> å˜é‡æ¥è¡¨ç¤ºé¡¹ç›®çš„å‘å¸ƒç‰©åç§°ï¼›ç„¶åå°†å…¶å¤åˆ¶åˆ°æ ¹ç›®å½•ä¸‹ï¼Œæœ€ç»ˆåˆ©ç”¨ java æ‰§è¡Œè¿™ä¸ª jar åŒ…ï¼›æ‰€ä»¥æ¯æ¬¡ build ä¹‹å‰åªè¦èƒ½æ‹¿åˆ°é¡¹ç›®å‘å¸ƒç‰©çš„åç§°å³å¯</strong></p>\n<h4 id=\"10-4ã€Gradle-ä¿®æ”¹\">10.4ã€Gradle ä¿®æ”¹</h4>\n<p>ä¸Šé¢å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ ‡å‡†çš„é€šç”¨å‹ Dockerfileï¼Œæ¯æ¬¡ build é•œåƒåªè¦ä¼ å…¥ <code>PROJECT_BUILD_FINALNAME</code> è¿™ä¸ªæœ€ç»ˆå‘å¸ƒç‰©åç§°å³å¯ï¼›å¯¹äºå‘å¸ƒç‰©åç§°æ¥è¯´ï¼Œæœ€å¥½ä¸è¦å›ºå®šæ­»ï¼›å½“ç„¶ä¸è®ºæ˜¯ Java è¿˜æ˜¯å…¶ä»–è¯­è¨€çš„é¡¹ç›®æˆ‘ä»¬éƒ½èƒ½å°†æœ€ç»ˆå‘å¸ƒç‰©å˜æˆä¸€ä¸ªå›ºå®šåå­—ï¼Œæœ€ä¸æµå¯ä»¥å†™è„šæœ¬é‡å‘½åä¸€ä¸‹ï¼›ä½†æ˜¯ä¸å»ºè®®é‚£ä¹ˆå¹²ï¼Œæœ€å¥½ä¿ç•™ç‰ˆæœ¬å·ä¿¡æ¯ï¼Œä»¥ä¾¿äºå¼‚å¸¸æƒ…å†µä¸‹è¿›å…¥å®¹å™¨èƒ½å¤Ÿåˆ†è¾¨ï¼›å¯¹äºå½“å‰ Java é¡¹ç›®æ¥è¯´ï¼Œæƒ³è¦æ‹¿åˆ° <code>PROJECT_BUILD_FINALNAME</code> å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦ç•¥å¾®ä¿®æ”¹ä¸€ä¸‹ Gradle çš„ build è„šæœ¬ï¼Œè®©å…¶æ¯æ¬¡æ‰“åŒ… jar åŒ…æ—¶å°†é¡¹ç›®çš„åç§°åŠç‰ˆæœ¬å·å¯¼å‡ºåˆ°æ–‡ä»¶ä¸­å³å¯ï¼›åŒæ—¶è¿™é‡Œä¹ŸåŠ å…¥äº†é•œåƒç‰ˆæœ¬å·çš„å¤„ç†ï¼ŒGradle è„šæœ¬ä¿®æ”¹å¦‚ä¸‹</p>\n<ul>\n<li>build.gradle æœ€åé¢å¢åŠ å¦‚ä¸‹</li>\n</ul>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-jade\" data-language=\"jade\"><code class=\"language-jade\">bootRepackage {\n\n    mainClass = 'me.mritd.TestProject.TestProjectApplication'\n    executable = true\n\n    doLast {\n        File envFile = new File(\"build/tmp/PROJECT_ENV\")\n\n        println(\"Create ${archivesBaseName} ENV File ===&gt; \" + envFile.createNewFile())\n        println(\"Export ${archivesBaseName} Build Version ===&gt; ${version}\")\n        envFile.write(\"export PROJECT_BUILD_FINALNAME=${archivesBaseName}-${version}\\n\")\n\n        println(\"Generate Docker image tag...\")\n        envFile.append(\"export BUILD_DATE=`date +%Y%m%d%H%M%S`\\n\")\n        envFile.append(\"export IMAGE_NAME=mritd/test:`echo \\${CI_BUILD_REF_NAME} | tr '/' '-'`-`echo \\${CI_COMMIT_SHA} | cut -c1-8`-\\${BUILD_DATE}\\n\")\n        envFile.append(\"export LATEST_IMAGE_NAME=mritd/test:latest\\n\")\n    }\n}Copy</code></pre></div></figure>\n<p><strong>è¿™ä¸€æ­¥æ“ä½œå®é™…ä¸Šæ˜¯ä¿®æ”¹äº† <code>bootRepackage</code> è¿™ä¸ª Task(ä¸äº†è§£ Gradle æˆ–è€…ä¸æ˜¯ Java é¡¹ç›®çš„è¯·å¿½ç•¥)ï¼Œåœ¨å…¶ç»“æŸååˆ›å»ºäº†ä¸€ä¸ªå« <code>PROJECT_ENV</code> çš„æ–‡ä»¶ï¼Œé‡Œé¢å®é™…ä¸Šå°±æ˜¯å†™å…¥äº†ä¸€äº› bash ç¯å¢ƒå˜é‡å£°æ˜ï¼Œä»¥æ–¹ä¾¿åé¢ source ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶æ‹¿åˆ°ä¸€äº›å˜é‡ï¼Œç„¶åç”¨æˆ· build é•œåƒä½¿ç”¨</strong>ï¼Œ<code>PROJECT_ENV</code> æœ€ç»ˆç”Ÿæˆå¦‚ä¸‹</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">export PROJECT_BUILD_FINALNAME=TestProject-0.0.1-SNAPSHOT\nexport BUILD_DATE=`date +%Y%m%d%H%M%S`\nexport IMAGE_NAME=mritd/test:`echo ${CI_BUILD_REF_NAME} | tr '/' '-'`-`echo ${CI_COMMIT_SHA} | cut -c1-8`-${BUILD_DATE}\nexport LATEST_IMAGE_NAME=mritd/test:latestCopy</code></pre></div></figure>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220738.png\" alt=\"PROJECT_ENV\"></p>\n<h4 id=\"10-5ã€åˆ›å»º-CI-é…ç½®æ–‡ä»¶\">10.5ã€åˆ›å»º CI é…ç½®æ–‡ä»¶</h4>\n<p>ä¸€åˆ‡å‡†å¤‡å°±ç»ªä»¥åï¼Œå°±å¯ä»¥ç¼–å†™ CI è„šæœ¬äº†ï¼›GitLab ä¾é è¯»å–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>.gitlab-ci.yml</code> æ–‡ä»¶æ¥æ‰§è¡Œç›¸åº”çš„ CI æ“ä½œï¼›ä»¥ä¸‹ä¸ºæµ‹è¯•é¡¹ç›®çš„ <code>.gitlab-ci.yml</code> é…ç½®</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\"># è°ƒè¯•å¼€å¯\n#before_script:\n#  - pwd\n#  - env\n\ncache:\n  key: $CI_PROJECT_NAME/$CI_COMMIT_REF_NAME-$CI_COMMIT_SHA\n  paths:\n    - build\n\nstages:\n  - build\n  - deploy\n\nauto-build:\n  image: mritd/build:2.1.1\n  stage: build\n  script:\n    - gradle --no-daemon clean assemble\n  tags:\n    - test\n\ndeploy:\n  image: mritd/docker-kubectl:v1.7.4\n  stage: deploy\n  script:\n    - source build/tmp/PROJECT_ENV\n    - echo \"Build Docker Image ==&gt; ${IMAGE_NAME}\"\n    - docker build -t ${IMAGE_NAME} --build-arg PROJECT_BUILD_FINALNAME=${PROJECT_BUILD_FINALNAME} .\n#    - docker push ${IMAGE_NAME}\n    - docker tag ${IMAGE_NAME} ${LATEST_IMAGE_NAME}\n#    - docker push ${LATEST_IMAGE_NAME}\n#    - docker rmi ${IMAGE_NAME} ${LATEST_IMAGE_NAME}\n#    - kubectl --kubeconfig ${KUBE_CONFIG} set image deployment/test test=$IMAGE_NAME\n  tags:\n    - test\n  only:\n    - master\n    - develop\n    - /^chore.*$/Copy</code></pre></div></figure>\n<ul>\n<li><strong>å…³äº CI é…ç½®çš„ä¸€äº›ç®€è¦è¯´æ˜å¦‚ä¸‹</strong></li>\n</ul>\n<h5 id=\"stages\">stages</h5>\n<p>stages å­—æ®µå®šä¹‰äº†æ•´ä¸ª CI ä¸€å…±æœ‰å“ªäº›é˜¶æ®µæµç¨‹ï¼Œä»¥ä¸Šçš„ CI é…ç½®ä¸­ï¼Œå®šä¹‰äº†è¯¥é¡¹ç›®çš„ CI æ€»å…±åˆ†ä¸º <code>build</code>ã€<code>deploy</code> ä¸¤ä¸ªé˜¶æ®µï¼›GitLab CI ä¼šæ ¹æ®å…¶é¡ºåºæ‰§è¡Œå¯¹åº”é˜¶æ®µä¸‹çš„æ‰€æœ‰ä»»åŠ¡ï¼›<strong>åœ¨æ­£å¸¸ç”Ÿäº§ç¯å¢ƒæµç¨‹å¯ä»¥å®šä¹‰å¾ˆå¤šä¸ªï¼Œæ¯”å¦‚å¯ä»¥æœ‰ <code>test</code>ã€<code>publish</code>ï¼Œç”šè‡³å¯èƒ½æœ‰ä»£ç æ‰«æçš„ <code>sonar</code> é˜¶æ®µç­‰ï¼›è¿™äº›é˜¶æ®µæ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œå®Œå…¨æ˜¯è‡ªå®šä¹‰çš„</strong>ï¼Œä¸Šé¢çš„é˜¶æ®µå®šä¹‰å¥½ååœ¨ CI ä¸­è¡¨ç°å¦‚ä¸‹å›¾</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220327.png\" alt=\"stages\"></p>\n<h5 id=\"task\">task</h5>\n<p>task éš¶å±äº stages ä¹‹ä¸‹ï¼›ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªé˜¶æ®µå¯ä»¥æœ‰å¤šä¸ªä»»åŠ¡ï¼Œä»»åŠ¡æ‰§è¡Œé¡ºåºé»˜è®¤ä¸æŒ‡å®šä¼šå¹¶å‘æ‰§è¡Œï¼›å¯¹äºä¸Šé¢çš„ CI é…ç½®æ¥è¯´ <code>auto-build</code> å’Œ <code>deploy</code> éƒ½æ˜¯ taskï¼Œä»–ä»¬é€šè¿‡ <code>stage: xxxx</code> è¿™ä¸ªæ ‡ç­¾æ¥æŒ‡å®šä»–ä»¬éš¶å±äºå“ªä¸ª stageï¼›å½“ Runner ä½¿ç”¨ Docker ä½œä¸º build æä¾›è€…æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ task çš„ <code>image</code> æ ‡ç­¾ä¸‹å£°æ˜è¯¥ task è¦ä½¿ç”¨å“ªä¸ªé•œåƒè¿è¡Œï¼Œä¸æŒ‡å®šåˆ™é»˜è®¤ä¸º Runner æ³¨å†Œæ—¶çš„é•œåƒ(è¿™é‡Œæ˜¯ debian)ï¼›<strong>åŒæ—¶ task è¿˜æœ‰ä¸€ä¸ª <code>tags</code> çš„æ ‡ç­¾ï¼Œè¯¥æ ‡ç­¾æŒ‡æ˜äº†è¿™ä¸ªä»»åŠ¡å°†å¯ä»¥åœ¨å“ªäº› Runner ä¸Šè¿è¡Œï¼›è¿™ä¸ªæ ‡ç­¾å¯ä»¥ä» Runner é¡µé¢çœ‹åˆ°ï¼Œå®é™…ä¸Šå°±æ˜¯ Runner æ³¨å†Œæ—¶è¾“å…¥çš„å“ªä¸ª tagï¼›å¯¹äºæŸäº›ç‰¹æ®Šçš„é¡¹ç›®ï¼Œæ¯”å¦‚ IOS é¡¹ç›®ï¼Œåˆ™å¿…é¡»åœ¨ç‰¹å®šæœºå™¨ä¸Šæ‰§è¡Œï¼Œæ‰€ä»¥æ­¤æ—¶æŒ‡å®š tags æ ‡ç­¾å¾ˆæœ‰ç”¨</strong>ï¼Œå½“ task è¿è¡Œåå¦‚ä¸‹å›¾æ‰€ç¤º</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101221014.png\" alt=\"Task\"></p>\n<p>é™¤æ­¤ä¹‹å¤– task è¿˜èƒ½æŒ‡å®š <code>only</code> æ ‡ç­¾ç”¨äºé™å®šé‚£äº›åˆ†æ”¯æ‰èƒ½è§¦å‘è¿™ä¸ª taskï¼Œå¦‚æœåˆ†æ”¯åå­—ä¸æ»¡è¶³åˆ™ä¸ä¼šè§¦å‘ï¼›<strong>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº› task éƒ½æ˜¯è‡ªåŠ¨æ‰§è¡Œçš„ï¼Œå¦‚æœæ„Ÿè§‰æŸäº›ä»»åŠ¡å¤ªè¿‡å±é™©ï¼Œåˆ™å¯ä»¥é€šè¿‡å¢åŠ  <code>when: manual</code> æ”¹ä¸ºæ‰‹åŠ¨æ‰§è¡Œï¼›æ³¨æ„: æ‰‹åŠ¨æ‰§è¡Œè¢« GitLab è®¤ä¸ºæ˜¯é«˜æƒé™çš„å†™æ“ä½œï¼Œæ‰€ä»¥åªæœ‰é¡¹ç›®ç®¡ç†å‘˜æ‰èƒ½æ‰‹åŠ¨è¿è¡Œä¸€ä¸ª taskï¼Œç›´ç™½çš„è¯´å°±æ˜¯ç®¡ç†å‘˜æ‰èƒ½ç‚¹å‡»</strong>ï¼›æ‰‹åŠ¨æ‰§è¡Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220759.png\" alt=\"manual task\"></p>\n<h5 id=\"cache\">cache</h5>\n<p>cache è¿™ä¸ªå‚æ•°ç”¨äºå®šä¹‰å…¨å±€é‚£äº›æ–‡ä»¶å°†è¢« cacheï¼›<strong>åœ¨ GitLab CI ä¸­ï¼Œè·¨ stage æ˜¯ä¸èƒ½ä¿å­˜ä¸œè¥¿çš„ï¼›ä¹Ÿå°±æ˜¯è¯´åœ¨ç¬¬ä¸€æ­¥ build çš„æ“ä½œç”Ÿæˆçš„ jar åŒ…ï¼Œåˆ°ç¬¬äºŒéƒ¨æ‰“åŒ… docker image æ—¶å°±ä¼šè¢«åˆ é™¤ï¼›GitLab ä¼šä¿è¯æ¯ä¸ª stage ä¸­ä»»åŠ¡åœ¨æ‰§è¡Œæ—¶éƒ½å°†å·¥ä½œç›®å½•(Docker å®¹å™¨ ä¸­)è¿˜åŸåˆ°è·Ÿ GitLab ä»£ç ä»“åº“ä¸­ä¸€æ¨¡ä¸€æ ·ï¼Œå¤šä½™æ–‡ä»¶åŠå˜æ›´éƒ½ä¼šè¢«åˆ é™¤</strong>ï¼›æ­£å¸¸æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ­¥ build ç”Ÿæˆ jar åŒ…åº”å½“ç«‹å³æ¨é€åˆ° nexus ç§æœï¼›ä½†æ˜¯è¿™é‡Œæµ‹è¯•æ²¡æœ‰æ­å»ºï¼Œæ‰€ä»¥åªèƒ½æ”¾åˆ°æœ¬åœ°ï¼›ä½†æ˜¯æ”¾åˆ°æœ¬åœ°ä¸‹ä¸€ä¸ª task å°±ä¼šåˆ é™¤å®ƒï¼Œæ‰€ä»¥åˆ©ç”¨ <code>cache</code> è¿™ä¸ªå‚æ•°å°† <code>build</code> ç›®å½• cache ä½ï¼Œä¿è¯å…¶è·¨ stage ä¹Ÿèƒ½å­˜åœ¨</p>\n<p><strong>å…³äº <code>.gitlab-ci.yml</code> å…·ä½“é…ç½®æ›´å®Œæ•´çš„è¯·å‚è€ƒ <a href=\"https://docs.gitlab.com/ee/ci/yaml/\">å®˜æ–¹æ–‡æ¡£</a></strong></p>\n<h3 id=\"åä¸€ã€å…¶ä»–ç›¸å…³\">åä¸€ã€å…¶ä»–ç›¸å…³</h3>\n<h4 id=\"11-1ã€GitLab-å†…ç½®ç¯å¢ƒå˜é‡\">11.1ã€GitLab å†…ç½®ç¯å¢ƒå˜é‡</h4>\n<p>ä¸Šé¢å·²ç»åŸºæœ¬æå®šäº†ä¸€ä¸ªé¡¹ç›®çš„ CIï¼Œä½†æ˜¯æœ‰äº›å˜é‡å¯èƒ½å¹¶æœªè¯´æ¸…æ¥šï¼›æ¯”å¦‚åœ¨åˆ›å»ºçš„ <code>PROJECT_ENV</code> æ–‡ä»¶ä¸­å¼•ç”¨äº† <code>${CI_COMMIT_SHA}</code> å˜é‡ï¼›è¿™ç§å˜é‡å…¶å®æ˜¯ GitLab CI çš„å†…ç½®éšè—å˜é‡ï¼Œè¿™äº›å˜é‡åœ¨æ¯æ¬¡ CI è°ƒç”¨ Runner è¿è¡ŒæŸä¸ªä»»åŠ¡æ—¶éƒ½ä¼šä¼ é€’åˆ°å¯¹åº”çš„ Runner çš„æ‰§è¡Œç¯å¢ƒä¸­ï¼›<strong>ä¹Ÿå°±æ˜¯è¯´è¿™äº›å˜é‡åœ¨æ¯æ¬¡çš„ä»»åŠ¡å®¹å™¨ SHELL ç¯å¢ƒä¸­éƒ½ä¼šå­˜åœ¨ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨</strong>ï¼Œå…·ä½“çš„å®Œæ•´ç¯å¢ƒå˜é‡åˆ—è¡¨å¯ä»¥ä» <a href=\"https://docs.gitlab.com/ee/ci/variables/\">å®˜æ–¹æ–‡æ¡£</a> ä¸­è·å–ï¼›å¦‚æœæƒ³çŸ¥é“ç¯å¢ƒå˜é‡å…·ä½“çš„å€¼ï¼Œå®é™…ä¸Šå¯ä»¥é€šè¿‡åœ¨ä»»åŠ¡æ‰§è¡Œå‰ç”¨ <code>env</code> æŒ‡ä»¤æ‰“å°å‡ºæ¥ï¼Œå¦‚ä¸‹æ‰€ç¤º</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220338.png\" alt=\"env\"></p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220800.png\" alt=\"env task\"></p>\n<h4 id=\"11-2ã€GitLab-è‡ªå®šä¹‰ç¯å¢ƒå˜é‡\">11.2ã€GitLab è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</h4>\n<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ› CI èƒ½è‡ªåŠ¨çš„å‘å¸ƒæˆ–è€…ä¿®æ”¹ä¸€äº›ä¸œè¥¿ï¼›æ¯”å¦‚å°† jar åŒ…ä¸Šä¼ åˆ° nexusã€å°† docker é•œåƒ push åˆ°ç§æœï¼›è¿™äº›åŠ¨ä½œå¾€å¾€éœ€è¦ä¸€ä¸ªé«˜æƒé™æˆ–è€…è¯´æœ‰å¯å†™å…¥å¯¹åº”ä»“åº“æƒé™çš„è´¦æˆ·æ¥æ”¯æŒï¼Œä½†æ˜¯è¿™äº›è´¦æˆ·åˆä¸æƒ³å†™åˆ°é¡¹ç›®çš„ CI é…ç½®é‡Œï¼›å› ä¸ºè¿™æ ·å¾ˆä¸å®‰å…¨ï¼Œè°éƒ½èƒ½çœ‹åˆ°ï¼›æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å°†è¿™äº›æ•æ„Ÿå˜é‡å†™å…¥åˆ° GitLab è‡ªå®šä¹‰ç¯å¢ƒå˜é‡ä¸­ï¼ŒGitLab ä¼šåƒå¯¹å¾…å†…ç½®å˜é‡ä¸€æ ·å°†å…¶ä¼ é€åˆ° Runner ç«¯ï¼Œä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼›GitLab ä¸­è‡ªå®šä¹‰çš„ç¯å¢ƒå˜é‡å¯ä»¥æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯é¡¹ç›®çº§åˆ«çš„ï¼Œåªèƒ½å¤Ÿåœ¨å½“å‰é¡¹ç›®ä½¿ç”¨ï¼Œå¦‚ä¸‹</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220803.png\" alt=\"project env\"></p>\n<p>å¦ä¸€ç§æ˜¯ç»„çº§åˆ«çš„ï¼Œå¯ä»¥åœ¨æ•´ä¸ªç»„å†…çš„æ‰€æœ‰é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå¦‚ä¸‹</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220805.png\" alt=\"group env\"></p>\n<p>è¿™ä¸¤ç§å˜é‡æ·»åŠ åéƒ½å¯ä»¥åœ¨ CI çš„è„šæœ¬ä¸­ç›´æ¥å¼•ç”¨</p>\n<h4 id=\"11-3ã€Kubernetes-é›†æˆ\">11.3ã€Kubernetes é›†æˆ</h4>\n<p>å¯¹äº Kubernetes é›†æˆå®é™…ä¸Šæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯å¯¹æ¥ Kubernetes çš„ apiï¼Œçº¯ä»£ç å®ç°ï¼›å¦ä¸€ç§å–å·§çš„æ–¹æ¡ˆæ˜¯è°ƒç”¨ kubectl å·¥å…·ï¼Œç”¨ kubectl å·¥å…·æ¥å®ç°æ»šåŠ¨å‡çº§ï¼›è¿™é‡Œé‡‡ç”¨åä¸€ç§å–å·§çš„æ–¹å¼ï¼Œå°† kubectl äºŒè¿›åˆ¶æ–‡ä»¶å°è£…åˆ°é•œåƒä¸­ï¼Œç„¶ååœ¨ deploy é˜¶æ®µä½¿ç”¨è¿™ä¸ªé•œåƒç›´æ¥éƒ¨ç½²å°±å¯ä»¥</p>\n<p><img src=\"https://cimg1.17lai.site/data/2021/11/0120211101220345.png\" alt=\"kubectl\"></p>\n<p>å…¶ä¸­ <code>mritd/docker-kubectl:v1.7.4</code> è¿™ä¸ªé•œåƒçš„ Dockerfile å¦‚ä¸‹</p>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-docker\" data-language=\"docker\"><code class=\"language-docker\">FROM docker:dind \n\nLABEL maintainer=\"mritd &lt;mritd1234@gmail.com&gt;\"\n\nARG TZ=\"Asia/Shanghai\"\n\nENV TZ ${TZ}\n\nENV KUBE_VERSION v1.8.0\n\nRUN apk upgrade --update \\\n    &amp;&amp; apk add bash tzdata wget ca-certificates \\\n    &amp;&amp; wget https://storage.googleapis.com/kubernetes-release/release/${KUBE_VERSION}/bin/linux/amd64/kubectl -O /usr/local/bin/kubectl \\\n    &amp;&amp; chmod +x /usr/local/bin/kubectl \\\n    &amp;&amp; ln -sf /usr/share/zoneinfo/${TZ} /etc/localtime \\\n    &amp;&amp; echo ${TZ} &gt; /etc/timezone \\\n    &amp;&amp; rm -rf /var/cache/apk/*\n\nCMD [\"/bin/bash\"]Copy</code></pre></div></figure>\n<p>è¿™é‡Œé¢çš„ <code>${KUBE_CONFIG}</code> æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ç¯å¢ƒå˜é‡ï¼Œå¯¹äºæµ‹è¯•ç¯å¢ƒæˆ‘å°†é…ç½®æ–‡ä»¶ç›´æ¥æŒ‚è½½å…¥äº†å®¹å™¨ä¸­ï¼Œç„¶å <code>${KUBE_CONFIG}</code> åªæ˜¯æŒ‡å®šäº†ä¸€ä¸ªé…ç½®æ–‡ä»¶ä½ç½®ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­å¯ä»¥é€‰æ‹©å°†é…ç½®æ–‡ä»¶å˜æˆè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ä½¿ç”¨</p>\n<h4 id=\"11-4ã€GitLab-CI-æ€»ç»“\">11.4ã€GitLab CI æ€»ç»“</h4>\n<p>å…³äº GitLab CI ä¸Šé¢å·²ç»è®²äº†å¾ˆå¤šï¼Œä½†æ˜¯å¹¶ä¸å…¨é¢ï¼Œä¹Ÿä¸ç®—å¤ªç»†è‡´ï¼›å› ä¸ºè¿™ä¸œè¥¿è¯´èµ·æ¥å®é™…å¤ªå¤šäº†ï¼Œç°åœ¨ç›®æµ‹å·²ç» 1W å¤šå­—äº†ï¼›ä»¥ä¸‹æ€»ç»“ä¸€ä¸‹ GitLab CI çš„æ€»ä½“æ€æƒ³ï¼Œå½“æ€è·¯æ¸…æ™°äº†ä»¥åï¼Œæˆ‘æƒ³åé¢çš„åªæ˜¯æŸ¥æŸ¥æ–‡æ¡£è‡ªå·±è¯•ä¸€è¯•å°±è¡Œäº†</p>\n<ul>\n<li><strong>CS æ¶æ„</strong></li>\n</ul>\n<p>GitLab ä½œä¸º Server ç«¯ï¼Œæ§åˆ¶ Runner ç«¯æ‰§è¡Œä¸€ç³»åˆ—çš„ CI ä»»åŠ¡ï¼›ä»£ç  clone ç­‰æ— éœ€å…³å¿ƒï¼ŒGitLab ä¼šè‡ªåŠ¨å¤„ç†å¥½ä¸€åˆ‡ï¼›Runner æ¯æ¬¡éƒ½ä¼šå¯åŠ¨æ–°çš„å®¹å™¨æ‰§è¡Œ CI ä»»åŠ¡</p>\n<ul>\n<li><strong>å®¹å™¨å³ç¯å¢ƒ</strong></li>\n</ul>\n<p>åœ¨ Runner ä½¿ç”¨ Docker build çš„å‰æä¸‹ï¼›<strong>æ‰€æœ‰ä¾èµ–åˆ‡æ¢ã€ç¯å¢ƒåˆ‡æ¢åº”å½“ç”±åˆ‡æ¢ä¸åŒé•œåƒå®ç°ï¼Œå³ build é‚£å°±ä½¿ç”¨ build çš„é•œåƒï¼Œdeploy å°±ç”¨å¸¦æœ‰ deploy åŠŸèƒ½çš„é•œåƒï¼›é€šè¿‡ä¸åŒé•œåƒå®¹å™¨å®ç°å®Œæ•´çš„ç¯å¢ƒéš”ç¦»</strong></p>\n<ul>\n<li><strong>CIå³è„šæœ¬</strong></li>\n</ul>\n<p>ä¸åŒçš„ CI ä»»åŠ¡å®é™…ä¸Šå°±æ˜¯åœ¨ä½¿ç”¨ä¸åŒé•œåƒçš„å®¹å™¨ä¸­æ‰§è¡Œ SHELL å‘½ä»¤ï¼Œè‡ªåŠ¨åŒ– CI å°±æ˜¯æ‰§è¡Œé¢„å…ˆå†™å¥½çš„ä¸€äº›å°è„šæœ¬</p>\n<ul>\n<li><strong>æ•æ„Ÿä¿¡æ¯èµ°ç¯å¢ƒå˜é‡</strong></li>\n</ul>\n<p>ä¸€åˆ‡é‡è¦çš„æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚è´¦æˆ·å¯†ç ç­‰ï¼Œä¸è¦å†™åˆ° CI é…ç½®ä¸­ï¼Œç›´æ¥æ”¾åˆ° GitLab çš„ç¯å¢ƒå˜é‡ä¸­ï¼›GitLab ä¼šä¿è¯å°†å…¶æ¨é€åˆ°è¿œç«¯ Runner çš„ SHELL å˜é‡ä¸­</p>\n<p>è½¬è½½æ•´ç†Fromï¼š</p>\n<ul>\n<li><a href=\"https://mritd.com/2017/09/05/git-flow-note/\">git-flow-note</a></li>\n<li><a href=\"https://mritd.com/2017/11/28/ci-cd-gitlab-ci/\">ci-cd-gitlab-ci</a></li>\n</ul>\n<h2 id=\"ç³»åˆ—æ•™ç¨‹\"><strong>ç³»åˆ—æ•™ç¨‹</strong></h2>\n<p><a href=\"/atom.xml\"><i class=\"fas fa-rss\"></i>å…¨éƒ¨æ–‡ç« RSSè®¢é˜…</a></p>\n<h3 id=\"Gitlab-ä½¿ç”¨ç³»åˆ—\"><strong>Gitlab ä½¿ç”¨ç³»åˆ—</strong></h3>\n<p><a href=\"/categories/gitlab/atom.xml\"><i class=\"fas fa-rss\"></i><strong>Gitlab RSS åˆ†ç±»è®¢é˜…</strong></a></p>\n<ul>\n<li><a href=\"/posts/acc13b70/\"><strong>Gitlabçš„å®‰è£…åŠä½¿ç”¨æ•™ç¨‹å®Œå…¨ç‰ˆ</strong></a></li>\n<li><a href=\"/posts/29a820b3/\">ç ´è§£Gitlab EE</a></li>\n<li><a href=\"/posts/d08eb7b/\">Gitlabçš„å®‰è£…åŠä½¿ç”¨</a></li>\n<li><a href=\"/posts/1879721e/\">CI/CDä¸Git Flowä¸GitLab</a></li>\n</ul>\n<h3 id=\"Devopsç³»åˆ—\"><strong>Devopsç³»åˆ—</strong></h3>\n<p><a href=\"/categories/devops/atom.xml\"><i class=\"fas fa-rss\"></i><strong>Devops åˆ†ç±» RSS è®¢é˜…</strong></a></p>\n<ul>\n<li><a href=\"/posts/ab63eb8f/\">è‡ªå»ºå…¨å¥—å¼€æºDevopså¼€å‘ç³»ç»Ÿ</a></li>\n<li><a href=\"/posts/d32a07a7/\">Gitä»‹ç»ä»¥åŠåˆ†æ”¯æ¨¡å‹å›¾è§£</a></li>\n<li><a href=\"/posts/39563241/\">ä¸‰ä¸‡å­—æ— å‘æ­å»ºåŸºäºDocker+K8S+GitLab/SVN+Jenkins+HarboræŒç»­é›†æˆäº¤ä»˜ç¯å¢ƒ</a></li>\n<li><a href=\"/posts/3437994a/\">DevOpsç³»åˆ—â€”ã€Jenkinsfile+Dockerfile+nginx+vueã€‘</a></li>\n<li><a href=\"/posts/f4c3ad41/\">é¡¹ç›®å¼€å‘ç®¡ç†å·¥å…·æ¨è</a></li>\n<li><a href=\"/posts/acc13b70/\">Gitlabçš„å®‰è£…åŠä½¿ç”¨æ•™ç¨‹å®Œå…¨ç‰ˆ</a></li>\n<li><a href=\"/posts/d08eb7b/\">Gitlabçš„å®‰è£…åŠä½¿ç”¨</a></li>\n<li><a href=\"/posts/78c3371/\">é‚£äº›æœ‰ç”¨çš„Githubå·¥å…·ä»‹ç»ï¼Actionã€appã€workflowç­‰</a></li>\n</ul>\n<h2 id=\"é¡¹ç›®ç®¡ç†ç³»åˆ—ä»‹ç»é”¦é›†\">é¡¹ç›®ç®¡ç†ç³»åˆ—ä»‹ç»é”¦é›†</h2>\n<blockquote>\n<p>å¿«é€Ÿå…¨é¢çš„ä»‹ç»ç°ä»£ä¼ä¸šä¸­é¡¹ç›®ç®¡ç†ç›¸å…³çŸ¥è¯†ï¼</p>\n</blockquote>\n<div class=\"vkr-url-wrapper\">\n    \n        <a href=\"/posts/d8b1e381/\"><img class=\"avatar\" src=\"/medias_webp/cover/guanli.webp\"></a>\n    \n    <div class=\"desc-wrapper\">\n        <a href=\"/posts/d8b1e381/\">å¦‚ä½•åšä¸€ä¸ªå®Œæ•´çš„ç¡¬ä»¶é¡¹ç›®çš„é¡¹ç›®ç®¡ç†ä¹‹ç®€æ˜æ•™ç¨‹</a>\n        <hr>\n        <div class=\"desc\">ä»¥ä¸€ä¸ªç¡¬ä»¶é¡¹ç›®å¼€å‘ä¸ºä¾‹ï¼Œä»‹ç»ç°ä»£å…¬å¸é¡¹ç›®ç®¡ç†çš„ä¸€äº›åŸºæœ¬å·¥å…·å’Œæ–¹æ³•ï¼Œç»™è¡Œä¸šå†…å¤–æœ‹å‹ä¸€ä¸ªåˆæ­¥å°è±¡ï¼Œä¸ºå¹¿å¤§ä»ä¸šè€…å…¥é—¨ç›¸å…³ç®¡ç†æ‰“ä¸‹ä¸€ä¸ªåˆæ­¥çš„ï¼Œå…¨å±€çš„åŸºç¡€ï¼æœ€åç»™å‡ºä¸€ä¸ªIPDç«¯åˆ°ç«¯ç®¡ç†é¡¹ç›®ç¤ºä¾‹</div>\n    </div>\n</div>\n<div class=\"vkr-url-wrapper\">\n    \n        <a href=\"/posts/ca630feb/\"><img class=\"avatar\" src=\"/medias_webp/cover/5w2h.webp\"></a>\n    \n    <div class=\"desc-wrapper\">\n        <a href=\"/posts/ca630feb/\">å‡ ç§å¸¸ç”¨ç®¡ç†æ¨¡å‹å’Œæ–¹æ³•</a>\n        <hr>\n        <div class=\"desc\">å‡ ç§å¸¸ç”¨ç®¡ç†æ¨¡å‹å’Œæ–¹æ³•ï¼šPDCA, 5W2H, SMART, SWOT, GROW, OKR, WBS ç­‰ï¼ŒèŒåœºäººå‘˜éœ€è¦äº†è§£çš„çŸ¥è¯†ã€‚</div>\n    </div>\n</div>\n<div class=\"vkr-url-wrapper\">\n    \n        <a href=\"/posts/ac0df556/\"><img class=\"avatar\" src=\"/medias_webp/cover/guanli.webp\"></a>\n    \n    <div class=\"desc-wrapper\">\n        <a href=\"/posts/ac0df556/\">PMBOKæŒ‡å—ï¼ˆç¬¬6ç‰ˆï¼‰</a>\n        <hr>\n        <div class=\"desc\">PMBOK åªæ˜¯ä¸€å¥—æ‚¬åœ¨ç©ºä¸­çš„æ–¹æ³•è®ºï¼Œè¦æƒ³å…·ä½“è½åœ°è¿˜éœ€è¦å…·ä½“çš„è¡Œä¸šçŸ¥è¯†ã€‚ä¸¤æ¡è…¿ï¼Œç¼ºä¸€ä¸å¯ï¼PMBOK æ˜¯åŸºç¡€ä¸­çš„åŸºç¡€çŸ¥è¯†ï¼Œäº†è§£æ€»æ˜¯æ²¡æœ‰åå¤„çš„ã€‚æ˜¯å¸¸è¯†ï¼Œä¸æ‡‚å°±æ²¡æ³•åšï¼Œä½†è¦åšé¡¹ç›®ç®¡ç†ï¼Œå…‰é PMBOKè¿œè¿œä¸å¤Ÿã€‚</div>\n    </div>\n</div>\n<div class=\"vkr-url-wrapper\">\n    \n        <a href=\"/posts/99be6dfb/\"><img class=\"avatar\" src=\"/medias_webp/cover/guanli.webp\"></a>\n    \n    <div class=\"desc-wrapper\">\n        <a href=\"/posts/99be6dfb/\">å¦‚ä½•åšå¥½ç«å“åˆ†æ</a>\n        <hr>\n        <div class=\"desc\">ç«å“åˆ†æå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æ‰¾å‡†è‡ªèº«äº§å“å®šä½ï¼Œå‘ç°è‡ªå·±äº§å“çš„ä¼˜åŠ£æ‰€åœ¨ï¼Œè¿›è€Œæ¨åŠ¨äº§å“çš„ä¼˜åŒ–è¿­ä»£ã€‚</div>\n    </div>\n</div>\n<div class=\"vkr-url-wrapper\">\n    \n        <a href=\"/posts/a6477052/\"><img class=\"avatar\" src=\"/medias_webp/cover/guanli.webp\"></a>\n    \n    <div class=\"desc-wrapper\">\n        <a href=\"/posts/a6477052/\">ä¸€å¤§å †å¯“æ„æ·±åˆ»çš„ç®¡ç†æ•…äº‹é”¦é›†</a>\n        <hr>\n        <div class=\"desc\">å‡ åä¸ªå…³äºç®¡ç†ï¼Œç»è¥çš„æ•…äº‹ã€‚å¯“æ•™äºä¹ï¼Œå¯“æ„æ·±åˆ»ï¼Œåœ¨è‡ªå·±é—å¿˜ä¹‹å‰ï¼Œè®°å½•ä¿å­˜ä¸‹æ¥ã€‚åŒ…æ‹¬ æ‰é¹Šä¸‰å…„å¼Ÿï¼Œæ›²çªå¾’è–ªï¼ŒçŒäººä¸ç‹—ç­‰ç­‰</div>\n    </div>\n</div>\n",
            "tags": [
                "gitlab",
                "git",
                "ci/cd"
            ]
        },
        {
            "id": "https://blog.17lai.site/posts/29a820b3/",
            "url": "https://blog.17lai.site/posts/29a820b3/",
            "title": "ç ´è§£Gitlab EE",
            "date_published": "2021-07-09T07:25:00.000Z",
            "content_html": "<blockquote>\n<p>ç”±äºéœ€è¦ä¸€äº›é•œåƒç­‰ gitlab é«˜çº§åŠŸèƒ½ï¼Œæ‰€æœ‰ç ´è§£gitlab eeç‰ˆæœ¬ã€‚<br>\nä½ èƒ½ä¿¡ä¹ˆï¼Ÿ è¿™äº›ç ´è§£æ–¹æ³•æ¥è‡ªå®˜æ–¹è‡ªå·±çš„æ–‡æ¡£ï¼</p>\n</blockquote>\n<h2 id=\"å®‰è£…ruby\">å®‰è£…ruby</h2>\n<p>å®‰è£…å®Œgitlab eeä¹‹å</p>\n<p>å®‰è£…rubyï¼šyum install ruby</p>\n<p>rubyç‰ˆæœ¬éœ€è¦2.3æˆ–ä»¥ä¸Šã€‚</p>\n<h2 id=\"ç”Ÿæˆè®¸å¯è¯\"><strong>ç”Ÿæˆè®¸å¯è¯</strong></h2>\n<p>gem install gitlab-license</p>\n<h2 id=\"åˆ›å»ºä¸€ä¸ªrbæ–‡ä»¶\">åˆ›å»ºä¸€ä¸ªrbæ–‡ä»¶</h2>\n<p>license.rb</p>\n<hr>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-ruby\" data-language=\"ruby\"><code class=\"language-ruby\">require \"openssl\"\nrequire \"gitlab/license\"\n \nkey_pair = OpenSSL::PKey::RSA.generate(2048)\nFile.open(\"license_key\", \"w\") { |f| f.write(key_pair.to_pem) }\n \npublic_key = key_pair.public_key\nFile.open(\"license_key.pub\", \"w\") { |f| f.write(public_key.to_pem) }\n \nprivate_key = OpenSSL::PKey::RSA.new File.read(\"license_key\")\nGitlab::License.encryption_key = private_key\n \nlicense = Gitlab::License.new\nlicense.licensee = {\n  \"Name\" =&gt; \"none\",\n  \"Company\" =&gt; \"none\",\n  \"Email\" =&gt; \"example@test.com\",\n}\nlicense.starts_at = Date.new(2020, 1, 1) # å¼€å§‹æ—¶é—´\nlicense.expires_at = Date.new(2050, 1, 1) # ç»“æŸæ—¶é—´\nlicense.notify_admins_at = Date.new(2049, 12, 1)\nlicense.notify_users_at = Date.new(2049, 12, 1)\nlicense.block_changes_at = Date.new(2050, 1, 1)\nlicense.restrictions = {\n  active_user_count: 10000,\n}\n \nputs \"License:\"\nputs license\n \ndata = license.export\nputs \"Exported license:\"\nputs data\nFile.open(\"GitLabBV.gitlab-license\", \"w\") { |f| f.write(data) }\n \npublic_key = OpenSSL::PKey::RSA.new File.read(\"license_key.pub\")\nGitlab::License.encryption_key = public_key\n \ndata = File.read(\"GitLabBV.gitlab-license\")\n$license = Gitlab::License.import(data)\n \nputs \"Imported license:\"\nputs $license\n \nunless $license\n  raise \"The license is invalid.\"\nend\n \nif $license.restricted?(:active_user_count)\n  active_user_count = 10000\n  if active_user_count &gt; $license.restrictions[:active_user_count]\n    raise \"The active user count exceeds the allowed amount!\"\n  end\nend\n \nif $license.notify_admins?\n  puts \"The license is due to expire on #{$license.expires_at}.\"\nend\n \nif $license.notify_users?\n  puts \"The license is due to expire on #{$license.expires_at}.\"\nend\n \nmodule Gitlab\n  class GitAccess\n    def check(cmd, changes = nil)\n      if $license.block_changes?\n        return build_status_object(false, \"License expired\")\n      end\n    end\n  end\nend\n \nputs \"This instance of GitLab Enterprise Edition is licensed to:\"\n$license.licensee.each do |key, value|\n  puts \"#{key}: #{value}\"\nend\n \nif $license.expired?\n  puts \"The license expired on #{$license.expires_at}\"\nelsif $license.will_expire?\n  puts \"The license will expire on #{$license.expires_at}\"\nelse\n  puts \"The license will never expire.\"\nend\n </code></pre></div></figure>\n<hr>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ruby license.rb</code></pre></div></figure>\n<p>ç”Ÿæˆ <code>GitLabBV.gitlab-license</code> <code>license_key</code> <code>license_key.pub</code> è¿™ä¸‰ä¸ªæ–‡ä»¶ã€‚</p>\n<h2 id=\"ä½¿ç”¨è®¸å¯è¯\"><strong>ä½¿ç”¨è®¸å¯è¯</strong></h2>\n<p>ç”¨ <code>license_key.pub</code> æ–‡ä»¶æ›¿æ¢ <code>/opt/gitlab/embedded/service/gitlab-rails/.license_encryption_key.pub</code>ã€‚</p>\n<p><code>GitLabBV.gitlab-license</code> å³æ˜¯è®¸å¯è¯ï¼Œå¡«å…¥ <code>${address}/admin/license</code> åœ°å€å¹¶é‡å¯ <code>gitlab-ctl restart</code> ã€‚</p>\n<h2 id=\"ä¿®æ”¹ç­‰çº§\"><strong>ä¿®æ”¹ç­‰çº§</strong></h2>\n<figure><div class=\"code-area\"><pre class=\"line-numbers language-diff-ruby\" data-language=\"diff-ruby\"><code class=\"language-diff-ruby\">--- /opt/gitlab/embedded/service/gitlab-rails/ee/app/models/license.rb\n+++ /opt/gitlab/embedded/service/gitlab-rails/ee/app/models/license.rb\n@@ -458,7 +458,7 @@\n  end\n \n  def plan\n-    restricted_attr(:plan).presence || STARTER_PLAN\n+    restricted_attr(:plan).presence || ULTIMATE_PLAN\n  end\n \n  def edition\n </code></pre></div></figure>\n<h2 id=\"Gitlabæ·»åŠ è®¸å¯è¯\">Gitlabæ·»åŠ è®¸å¯è¯</h2>\n<h3 id=\"14-x-Gitlabä¹‹å‰æ·»åŠ è®¸å¯è¯ä½ç½®\">14.x Gitlabä¹‹å‰æ·»åŠ è®¸å¯è¯ä½ç½®</h3>\n<blockquote>\n<p>èœå•-&gt;ç®¡ç†å‘˜-&gt;è®¢é˜…-&gt;è®¸å¯è¯ä¸Šä¼ </p>\n</blockquote>\n<h3 id=\"æ–°ç‰ˆGitlabæ·»åŠ è®¸å¯è¯çš„ä½ç½®åœ¨\">æ–°ç‰ˆGitlabæ·»åŠ è®¸å¯è¯çš„ä½ç½®åœ¨</h3>\n<blockquote>\n<p>èœå•-&gt;ç®¡ç†å‘˜-&gt;è®¾ç½®-&gt;é€šç”¨-&gt;æ·»åŠ è®¸å¯è¯å¤„ç‚¹å‡»å±•å¼€-&gt;ç‚¹å‡»ä¸Šä¼ </p>\n</blockquote>\n<p>ä¿®æ”¹å®Œæˆåä½¿ç”¨ <code>gitlab-ctl restart</code> é‡æ–°åŠ è½½é…ç½®ã€‚</p>\n<blockquote>\n<p>èœå•-&gt;ç®¡ç†å‘˜-&gt;è®¢é˜…</p>\n<p>åœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°æ¿€æ´»çŠ¶æ€ï¼Œä¸Šé¢æ“ä½œæ²¡é—®é¢˜çš„è¯ï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°æ¿€æ´»æˆåŠŸï¼</p>\n</blockquote>\n<h2 id=\"å‚è€ƒ\"><strong>å‚è€ƒ</strong></h2>\n<ul>\n<li><a href=\"https://www.rubydoc.info/gems/gitlab-license/1.0.0/file/README.md\">https://www.rubydoc.info/gems/gitlab-license/1.0.0/file/README.md</a></li>\n</ul>\n<blockquote>\n<p>ç°åœ¨ä½ å·²ç»ç ´è§£å¥½äº†Gitlab eeï¼Œ å¯ä»¥ä½¿ç”¨å…¶ä¸­çš„é«˜çº§åŠŸèƒ½ã€‚</p>\n<p>æ›´å¤šçš„Gitlab eeè¯¦ç»†æ•™ç¨‹ï¼Œè¯·å‚è€ƒä¸‹é¢çš„gitlabç³»åˆ—æ•™ç¨‹ï¼ ğŸ‘‡ï¸</p>\n</blockquote>\n<h2 id=\"ç³»åˆ—æ•™ç¨‹\"><strong>ç³»åˆ—æ•™ç¨‹</strong></h2>\n<p><a href=\"/atom.xml\"><i class=\"fas fa-rss\"></i>å…¨éƒ¨æ–‡ç« RSSè®¢é˜…</a></p>\n<h3 id=\"Gitlab-ä½¿ç”¨ç³»åˆ—\"><strong>Gitlab ä½¿ç”¨ç³»åˆ—</strong></h3>\n<p><a href=\"/categories/gitlab/atom.xml\"><i class=\"fas fa-rss\"></i><strong>Gitlab RSS åˆ†ç±»è®¢é˜…</strong></a></p>\n<ul>\n<li><a href=\"/posts/acc13b70/\"><strong>Gitlabçš„å®‰è£…åŠä½¿ç”¨æ•™ç¨‹å®Œå…¨ç‰ˆ</strong></a></li>\n<li><a href=\"/posts/29a820b3/\">ç ´è§£Gitlab EE</a></li>\n<li><a href=\"/posts/d08eb7b/\">Gitlabçš„å®‰è£…åŠä½¿ç”¨</a></li>\n<li><a href=\"/posts/1879721e/\">CI/CDä¸Git Flowä¸GitLab</a></li>\n</ul>\n<h3 id=\"Devopsç³»åˆ—\"><strong>Devopsç³»åˆ—</strong></h3>\n<p><a href=\"/categories/devops/atom.xml\"><i class=\"fas fa-rss\"></i><strong>Devops åˆ†ç±» RSS è®¢é˜…</strong></a></p>\n<ul>\n<li><a href=\"/posts/ab63eb8f/\">è‡ªå»ºå…¨å¥—å¼€æºDevopså¼€å‘ç³»ç»Ÿ</a></li>\n<li><a href=\"/posts/d32a07a7/\">Gitä»‹ç»ä»¥åŠåˆ†æ”¯æ¨¡å‹å›¾è§£</a></li>\n<li><a href=\"/posts/39563241/\">ä¸‰ä¸‡å­—æ— å‘æ­å»ºåŸºäºDocker+K8S+GitLab/SVN+Jenkins+HarboræŒç»­é›†æˆäº¤ä»˜ç¯å¢ƒ</a></li>\n<li><a href=\"/posts/3437994a/\">DevOpsç³»åˆ—â€”ã€Jenkinsfile+Dockerfile+nginx+vueã€‘</a></li>\n<li><a href=\"/posts/f4c3ad41/\">é¡¹ç›®å¼€å‘ç®¡ç†å·¥å…·æ¨è</a></li>\n<li><a href=\"/posts/acc13b70/\">Gitlabçš„å®‰è£…åŠä½¿ç”¨æ•™ç¨‹å®Œå…¨ç‰ˆ</a></li>\n<li><a href=\"/posts/d08eb7b/\">Gitlabçš„å®‰è£…åŠä½¿ç”¨</a></li>\n<li><a href=\"/posts/78c3371/\">é‚£äº›æœ‰ç”¨çš„Githubå·¥å…·ä»‹ç»ï¼Actionã€appã€workflowç­‰</a></li>\n</ul>\n<h2 id=\"é¡¹ç›®ç®¡ç†ç³»åˆ—ä»‹ç»é”¦é›†\">é¡¹ç›®ç®¡ç†ç³»åˆ—ä»‹ç»é”¦é›†</h2>\n<blockquote>\n<p>å¿«é€Ÿå…¨é¢çš„ä»‹ç»ç°ä»£ä¼ä¸šä¸­é¡¹ç›®ç®¡ç†ç›¸å…³çŸ¥è¯†ï¼</p>\n</blockquote>\n<div class=\"vkr-url-wrapper\">\n    \n        <a href=\"/posts/d8b1e381/\"><img class=\"avatar\" src=\"/medias_webp/cover/guanli.webp\"></a>\n    \n    <div class=\"desc-wrapper\">\n        <a href=\"/posts/d8b1e381/\">å¦‚ä½•åšä¸€ä¸ªå®Œæ•´çš„ç¡¬ä»¶é¡¹ç›®çš„é¡¹ç›®ç®¡ç†ä¹‹ç®€æ˜æ•™ç¨‹</a>\n        <hr>\n        <div class=\"desc\">ä»¥ä¸€ä¸ªç¡¬ä»¶é¡¹ç›®å¼€å‘ä¸ºä¾‹ï¼Œä»‹ç»ç°ä»£å…¬å¸é¡¹ç›®ç®¡ç†çš„ä¸€äº›åŸºæœ¬å·¥å…·å’Œæ–¹æ³•ï¼Œç»™è¡Œä¸šå†…å¤–æœ‹å‹ä¸€ä¸ªåˆæ­¥å°è±¡ï¼Œä¸ºå¹¿å¤§ä»ä¸šè€…å…¥é—¨ç›¸å…³ç®¡ç†æ‰“ä¸‹ä¸€ä¸ªåˆæ­¥çš„ï¼Œå…¨å±€çš„åŸºç¡€ï¼æœ€åç»™å‡ºä¸€ä¸ªIPDç«¯åˆ°ç«¯ç®¡ç†é¡¹ç›®ç¤ºä¾‹</div>\n    </div>\n</div>\n<div class=\"vkr-url-wrapper\">\n    \n        <a href=\"/posts/ca630feb/\"><img class=\"avatar\" src=\"/medias_webp/cover/5w2h.webp\"></a>\n    \n    <div class=\"desc-wrapper\">\n        <a href=\"/posts/ca630feb/\">å‡ ç§å¸¸ç”¨ç®¡ç†æ¨¡å‹å’Œæ–¹æ³•</a>\n        <hr>\n        <div class=\"desc\">å‡ ç§å¸¸ç”¨ç®¡ç†æ¨¡å‹å’Œæ–¹æ³•ï¼šPDCA, 5W2H, SMART, SWOT, GROW, OKR, WBS ç­‰ï¼ŒèŒåœºäººå‘˜éœ€è¦äº†è§£çš„çŸ¥è¯†ã€‚</div>\n    </div>\n</div>\n<div class=\"vkr-url-wrapper\">\n    \n        <a href=\"/posts/ac0df556/\"><img class=\"avatar\" src=\"/medias_webp/cover/guanli.webp\"></a>\n    \n    <div class=\"desc-wrapper\">\n        <a href=\"/posts/ac0df556/\">PMBOKæŒ‡å—ï¼ˆç¬¬6ç‰ˆï¼‰</a>\n        <hr>\n        <div class=\"desc\">PMBOK åªæ˜¯ä¸€å¥—æ‚¬åœ¨ç©ºä¸­çš„æ–¹æ³•è®ºï¼Œè¦æƒ³å…·ä½“è½åœ°è¿˜éœ€è¦å…·ä½“çš„è¡Œä¸šçŸ¥è¯†ã€‚ä¸¤æ¡è…¿ï¼Œç¼ºä¸€ä¸å¯ï¼PMBOK æ˜¯åŸºç¡€ä¸­çš„åŸºç¡€çŸ¥è¯†ï¼Œäº†è§£æ€»æ˜¯æ²¡æœ‰åå¤„çš„ã€‚æ˜¯å¸¸è¯†ï¼Œä¸æ‡‚å°±æ²¡æ³•åšï¼Œä½†è¦åšé¡¹ç›®ç®¡ç†ï¼Œå…‰é PMBOKè¿œè¿œä¸å¤Ÿã€‚</div>\n    </div>\n</div>\n<div class=\"vkr-url-wrapper\">\n    \n        <a href=\"/posts/99be6dfb/\"><img class=\"avatar\" src=\"/medias_webp/cover/guanli.webp\"></a>\n    \n    <div class=\"desc-wrapper\">\n        <a href=\"/posts/99be6dfb/\">å¦‚ä½•åšå¥½ç«å“åˆ†æ</a>\n        <hr>\n        <div class=\"desc\">ç«å“åˆ†æå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æ‰¾å‡†è‡ªèº«äº§å“å®šä½ï¼Œå‘ç°è‡ªå·±äº§å“çš„ä¼˜åŠ£æ‰€åœ¨ï¼Œè¿›è€Œæ¨åŠ¨äº§å“çš„ä¼˜åŒ–è¿­ä»£ã€‚</div>\n    </div>\n</div>\n<div class=\"vkr-url-wrapper\">\n    \n        <a href=\"/posts/a6477052/\"><img class=\"avatar\" src=\"/medias_webp/cover/guanli.webp\"></a>\n    \n    <div class=\"desc-wrapper\">\n        <a href=\"/posts/a6477052/\">ä¸€å¤§å †å¯“æ„æ·±åˆ»çš„ç®¡ç†æ•…äº‹é”¦é›†</a>\n        <hr>\n        <div class=\"desc\">å‡ åä¸ªå…³äºç®¡ç†ï¼Œç»è¥çš„æ•…äº‹ã€‚å¯“æ•™äºä¹ï¼Œå¯“æ„æ·±åˆ»ï¼Œåœ¨è‡ªå·±é—å¿˜ä¹‹å‰ï¼Œè®°å½•ä¿å­˜ä¸‹æ¥ã€‚åŒ…æ‹¬ æ‰é¹Šä¸‰å…„å¼Ÿï¼Œæ›²çªå¾’è–ªï¼ŒçŒäººä¸ç‹—ç­‰ç­‰</div>\n    </div>\n</div>\n",
            "tags": [
                "gitlab",
                "git",
                "crack"
            ]
        }
    ]
}